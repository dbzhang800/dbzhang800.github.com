<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>1+1=10 - Tools</title><link href="https://blog.debao.me/" rel="alternate"></link><link href="https://blog.debao.me/feeds/tools.atom.xml" rel="self"></link><id>https://blog.debao.me/</id><updated>2025-02-07T00:31:00+08:00</updated><subtitle>记记笔记，放松一下...</subtitle><entry><title>BPM 小记</title><link href="https://blog.debao.me/2025/02/notes-on-bpm/" rel="alternate"></link><published>2025-02-07T00:31:00+08:00</published><updated>2025-02-07T00:31:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2025-02-07:/2025/02/notes-on-bpm/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;随便记录一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="bpm"&gt;BPM&lt;/h2&gt;
&lt;p&gt;BPM（Business Process Management，业务流程管理）是一种系统化的方法，用于设计、分析、执行、监控和优化企业的业务流程。&lt;/p&gt;
&lt;p&gt;BPM 的实施 …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;随便记录一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="bpm"&gt;BPM&lt;/h2&gt;
&lt;p&gt;BPM（Business Process Management，业务流程管理）是一种系统化的方法，用于设计、分析、执行、监控和优化企业的业务流程。&lt;/p&gt;
&lt;p&gt;BPM 的实施通常依赖于 BPM 软件平台。&lt;/p&gt;
&lt;h3 id="process"&gt;Process&lt;/h3&gt;
&lt;p&gt;在 BPM 中，Process（流程） 是指一系列有序的活动（Tasks）或步骤（Steps），这些活动协同工作以实现特定的业务目标。&lt;/p&gt;
&lt;h3 id="product-project-process"&gt;Product, Project 与 Process 管理对比&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;贴个表格，内容由 ChatGPT (GPT-4) 生成。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;特点&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;产品管理（Product Management）&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;项目管理（Project Management）&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;流程管理（Process Management）&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;核心关注点&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;产品的用户价值、市场定位和商业成功。&lt;/td&gt;
&lt;td&gt;项目的目标、进度、预算和资源的管理。&lt;/td&gt;
&lt;td&gt;企业内部流程的效率和标准化。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;目标&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;创建满足用户需求并实现商业价值的产品。&lt;/td&gt;
&lt;td&gt;完成特定的任务或交付成果（如发布新功能、完成建筑施工等）。&lt;/td&gt;
&lt;td&gt;持续优化和改进日常业务流程，确保运营效率。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;时间框架&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;持续性&lt;/strong&gt;：贯穿整个产品生命周期（从概念到退市）。&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;临时性&lt;/strong&gt;：项目有明确的开始和结束时间。&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;持续性&lt;/strong&gt;：流程是长期存在的，并定期优化。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;重复性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;产品的开发和优化可能重复，但每次迭代有所不同。&lt;/td&gt;
&lt;td&gt;项目通常是&lt;strong&gt;一次性&lt;/strong&gt;的，针对特定目标。&lt;/td&gt;
&lt;td&gt;流程是&lt;strong&gt;高度重复&lt;/strong&gt;的，按照既定规则反复执行。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;管理对象&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;产品的功能、体验、市场表现和用户满意度。&lt;/td&gt;
&lt;td&gt;项目的时间、资源、范围和预算。&lt;/td&gt;
&lt;td&gt;流程的步骤、规则、效率和跨部门协作。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;参与角色&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;产品经理、设计师、开发人员、市场营销团队、用户等。&lt;/td&gt;
&lt;td&gt;项目经理、开发团队、相关干系人。&lt;/td&gt;
&lt;td&gt;流程分析师、运营团队、技术支持团队等。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;结果&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;成功的产品（如应用、服务、硬件等），用户愿意为之买单。&lt;/td&gt;
&lt;td&gt;项目目标的完成（如新产品发布、活动成功举办）。&lt;/td&gt;
&lt;td&gt;流程效率提升、标准化和一致性。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;工具/方法&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;产品路线图、用户故事地图、市场调研工具、原型设计工具等。&lt;/td&gt;
&lt;td&gt;甘特图、敏捷开发工具（如 Jira、Trello）、Scrum 框架等。&lt;/td&gt;
&lt;td&gt;流程建模工具（如 BPMN）、工作流管理系统等。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;另外，可能还有 Program（项目集）管理。&lt;/p&gt;
&lt;h2 id="bpmn"&gt;BPMN&lt;/h2&gt;
&lt;p&gt;BPMN（Business Process Model and Notation） 是一种建模语言，由 OMG（Object Management Group） 组织制定，目的是提供一种直观、易读、可执行的方式来描述业务流程。&lt;/p&gt;
&lt;p&gt;BPMN 是 BPM 中的重要工具，它通过标准化的符号和规则帮助业务人员和技术人员协作，共同理解并优化流程。&lt;/p&gt;
&lt;h3 id="_1"&gt;历史&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BPMN 1.0&lt;/strong&gt;（2004年）  &lt;/li&gt;
&lt;li&gt;由 BPMI.org 发布，首次引入业务流程建模符号（如任务、网关、事件）。  &lt;/li&gt;
&lt;li&gt;提供了一种标准化的业务流程图（BPD）表示方法。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BPMN 1.1&lt;/strong&gt;（2008年）  &lt;/li&gt;
&lt;li&gt;由 OMG（Object Management Group）维护，改进了 1.0 的技术细节。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BPMN 2.0&lt;/strong&gt;（2011年）  &lt;/li&gt;
&lt;li&gt;重大更新版本，由 OMG 发布。  &lt;/li&gt;
&lt;li&gt;新增 XML 表达支持，实现业务流程的建模与自动化。  &lt;/li&gt;
&lt;li&gt;引入泳道池（Pools and Lanes）、协作建模和更多事件类型。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BPMN 2.0.2&lt;/strong&gt;（2014年）  &lt;/li&gt;
&lt;li&gt;修正了 2.0 的部分技术细节，无重大符号变更。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;一个例子&lt;/h3&gt;
&lt;p&gt;&lt;img alt="demo" src="https://blog.debao.me/images/tools/bpmn-demo-diagram.png"&gt;&lt;/p&gt;
&lt;p&gt;对应的xml文件还是很复杂的&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;  1&lt;/span&gt;
&lt;span class="normal"&gt;  2&lt;/span&gt;
&lt;span class="normal"&gt;  3&lt;/span&gt;
&lt;span class="normal"&gt;  4&lt;/span&gt;
&lt;span class="normal"&gt;  5&lt;/span&gt;
&lt;span class="normal"&gt;  6&lt;/span&gt;
&lt;span class="normal"&gt;  7&lt;/span&gt;
&lt;span class="normal"&gt;  8&lt;/span&gt;
&lt;span class="normal"&gt;  9&lt;/span&gt;
&lt;span class="normal"&gt; 10&lt;/span&gt;
&lt;span class="normal"&gt; 11&lt;/span&gt;
&lt;span class="normal"&gt; 12&lt;/span&gt;
&lt;span class="normal"&gt; 13&lt;/span&gt;
&lt;span class="normal"&gt; 14&lt;/span&gt;
&lt;span class="normal"&gt; 15&lt;/span&gt;
&lt;span class="normal"&gt; 16&lt;/span&gt;
&lt;span class="normal"&gt; 17&lt;/span&gt;
&lt;span class="normal"&gt; 18&lt;/span&gt;
&lt;span class="normal"&gt; 19&lt;/span&gt;
&lt;span class="normal"&gt; 20&lt;/span&gt;
&lt;span class="normal"&gt; 21&lt;/span&gt;
&lt;span class="normal"&gt; 22&lt;/span&gt;
&lt;span class="normal"&gt; 23&lt;/span&gt;
&lt;span class="normal"&gt; 24&lt;/span&gt;
&lt;span class="normal"&gt; 25&lt;/span&gt;
&lt;span class="normal"&gt; 26&lt;/span&gt;
&lt;span class="normal"&gt; 27&lt;/span&gt;
&lt;span class="normal"&gt; 28&lt;/span&gt;
&lt;span class="normal"&gt; 29&lt;/span&gt;
&lt;span class="normal"&gt; 30&lt;/span&gt;
&lt;span class="normal"&gt; 31&lt;/span&gt;
&lt;span class="normal"&gt; 32&lt;/span&gt;
&lt;span class="normal"&gt; 33&lt;/span&gt;
&lt;span class="normal"&gt; 34&lt;/span&gt;
&lt;span class="normal"&gt; 35&lt;/span&gt;
&lt;span class="normal"&gt; 36&lt;/span&gt;
&lt;span class="normal"&gt; 37&lt;/span&gt;
&lt;span class="normal"&gt; 38&lt;/span&gt;
&lt;span class="normal"&gt; 39&lt;/span&gt;
&lt;span class="normal"&gt; 40&lt;/span&gt;
&lt;span class="normal"&gt; 41&lt;/span&gt;
&lt;span class="normal"&gt; 42&lt;/span&gt;
&lt;span class="normal"&gt; 43&lt;/span&gt;
&lt;span class="normal"&gt; 44&lt;/span&gt;
&lt;span class="normal"&gt; 45&lt;/span&gt;
&lt;span class="normal"&gt; 46&lt;/span&gt;
&lt;span class="normal"&gt; 47&lt;/span&gt;
&lt;span class="normal"&gt; 48&lt;/span&gt;
&lt;span class="normal"&gt; 49&lt;/span&gt;
&lt;span class="normal"&gt; 50&lt;/span&gt;
&lt;span class="normal"&gt; 51&lt;/span&gt;
&lt;span class="normal"&gt; 52&lt;/span&gt;
&lt;span class="normal"&gt; 53&lt;/span&gt;
&lt;span class="normal"&gt; 54&lt;/span&gt;
&lt;span class="normal"&gt; 55&lt;/span&gt;
&lt;span class="normal"&gt; 56&lt;/span&gt;
&lt;span class="normal"&gt; 57&lt;/span&gt;
&lt;span class="normal"&gt; 58&lt;/span&gt;
&lt;span class="normal"&gt; 59&lt;/span&gt;
&lt;span class="normal"&gt; 60&lt;/span&gt;
&lt;span class="normal"&gt; 61&lt;/span&gt;
&lt;span class="normal"&gt; 62&lt;/span&gt;
&lt;span class="normal"&gt; 63&lt;/span&gt;
&lt;span class="normal"&gt; 64&lt;/span&gt;
&lt;span class="normal"&gt; 65&lt;/span&gt;
&lt;span class="normal"&gt; 66&lt;/span&gt;
&lt;span class="normal"&gt; 67&lt;/span&gt;
&lt;span class="normal"&gt; 68&lt;/span&gt;
&lt;span class="normal"&gt; 69&lt;/span&gt;
&lt;span class="normal"&gt; 70&lt;/span&gt;
&lt;span class="normal"&gt; 71&lt;/span&gt;
&lt;span class="normal"&gt; 72&lt;/span&gt;
&lt;span class="normal"&gt; 73&lt;/span&gt;
&lt;span class="normal"&gt; 74&lt;/span&gt;
&lt;span class="normal"&gt; 75&lt;/span&gt;
&lt;span class="normal"&gt; 76&lt;/span&gt;
&lt;span class="normal"&gt; 77&lt;/span&gt;
&lt;span class="normal"&gt; 78&lt;/span&gt;
&lt;span class="normal"&gt; 79&lt;/span&gt;
&lt;span class="normal"&gt; 80&lt;/span&gt;
&lt;span class="normal"&gt; 81&lt;/span&gt;
&lt;span class="normal"&gt; 82&lt;/span&gt;
&lt;span class="normal"&gt; 83&lt;/span&gt;
&lt;span class="normal"&gt; 84&lt;/span&gt;
&lt;span class="normal"&gt; 85&lt;/span&gt;
&lt;span class="normal"&gt; 86&lt;/span&gt;
&lt;span class="normal"&gt; 87&lt;/span&gt;
&lt;span class="normal"&gt; 88&lt;/span&gt;
&lt;span class="normal"&gt; 89&lt;/span&gt;
&lt;span class="normal"&gt; 90&lt;/span&gt;
&lt;span class="normal"&gt; 91&lt;/span&gt;
&lt;span class="normal"&gt; 92&lt;/span&gt;
&lt;span class="normal"&gt; 93&lt;/span&gt;
&lt;span class="normal"&gt; 94&lt;/span&gt;
&lt;span class="normal"&gt; 95&lt;/span&gt;
&lt;span class="normal"&gt; 96&lt;/span&gt;
&lt;span class="normal"&gt; 97&lt;/span&gt;
&lt;span class="normal"&gt; 98&lt;/span&gt;
&lt;span class="normal"&gt; 99&lt;/span&gt;
&lt;span class="normal"&gt;100&lt;/span&gt;
&lt;span class="normal"&gt;101&lt;/span&gt;
&lt;span class="normal"&gt;102&lt;/span&gt;
&lt;span class="normal"&gt;103&lt;/span&gt;
&lt;span class="normal"&gt;104&lt;/span&gt;
&lt;span class="normal"&gt;105&lt;/span&gt;
&lt;span class="normal"&gt;106&lt;/span&gt;
&lt;span class="normal"&gt;107&lt;/span&gt;
&lt;span class="normal"&gt;108&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;definitions&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.omg.org/spec/BPMN/20100524/MODEL&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xmlns:bpmndi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.omg.org/spec/BPMN/20100524/DI&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xmlns:dc=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.omg.org/spec/DD/20100524/DC&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xmlns:di=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.omg.org/spec/DD/20100524/DI&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;xmlns:camunda=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://camunda.org/schema/1.0/bpmn&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Definitions_1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetNamespace=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://bpmn.io/schema/bpmn&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;leave_approval&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;请假审批流程&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;isExecutable=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 开始事件 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;startEvent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;startEvent&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;提交请假申请&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow1&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/startEvent&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 任务：经理审批 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;userTask&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;managerApproval&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;经理审批&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;camunda:assignee=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;manager&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow1&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow2&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/userTask&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 网关：审批是否通过 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;exclusiveGateway&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gateway1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;审批通过？&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow2&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow3&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow4&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/exclusiveGateway&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 任务：通知 HR --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;userTask&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyHR&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;通知 HR&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;camunda:assignee=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hr&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow3&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow5&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/userTask&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 任务：通知员工（审批被拒绝） --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;userTask&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyEmployee&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;通知员工&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;camunda:assignee=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;employee&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow4&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;outgoing&amp;gt;&lt;/span&gt;flow6&lt;span class="nt"&gt;&amp;lt;/outgoing&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/userTask&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 结束事件 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;endEvent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;endEvent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow5&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;incoming&amp;gt;&lt;/span&gt;flow6&lt;span class="nt"&gt;&amp;lt;/incoming&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/endEvent&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 流程连线 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;startEvent&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;managerApproval&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow2&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;managerApproval&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gateway1&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow3&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gateway1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyHR&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;通过&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow4&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gateway1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyEmployee&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;拒绝&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow5&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyHR&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;endEvent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;sequenceFlow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow6&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;sourceRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyEmployee&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;targetRef=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;endEvent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/process&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 添加 BPMN 图形 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNDiagram&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;BPMNDiagram_1&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNPlane&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;BPMNPlane_1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;leave_approval&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;StartEvent_1_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;startEvent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;150&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UserTask_1_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;managerApproval&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;150&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;80&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Gateway_1_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gateway1&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;350&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;165&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UserTask_2_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyHR&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;450&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;80&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UserTask_3_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;notifyEmployee&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;450&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;80&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNShape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EndEvent_1_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;endEvent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dc:Bounds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;600&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;180&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;width=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;height=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNShape&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="cm"&gt;&amp;lt;!-- 连接线 --&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow1_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow1&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;136&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow2_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow2&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;300&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;350&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow3_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow3&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;400&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;450&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;140&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow4_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow4&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;400&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;168&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;450&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;290&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow5_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow5&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;550&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;140&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;600&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;180&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;bpmndi:BPMNEdge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow6_di&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;bpmnElement=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flow6&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;550&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;290&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;di:waypoint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;x=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;600&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;y=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;180&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNEdge&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNPlane&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/bpmndi:BPMNDiagram&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;/definitions&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可以通过一些网站，比如 demo.bpmn.io 等将其可视化。&lt;/p&gt;
&lt;h2 id="epc"&gt;EPC&lt;/h2&gt;
&lt;p&gt;EPC（Event-driven Process Chain） 是一种图形化的流程建模方法，专注于描述业务流程中事件和功能之间的关系。它广泛用于企业流程建模，特别是在 ERP 系统（如 SAP）的实施过程中。&lt;/p&gt;
&lt;p&gt;1992 年，由德国萨尔布吕肯大学（University of Saarland）的 August-Wilhelm Scheer 教授 及其团队在 ARIS 框架中首次提出。&lt;/p&gt;
&lt;h3 id="epc-vs-bpmn"&gt;EPC vs BPMN&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;比较维度&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;BPMN&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;EPC&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;全称&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Business Process Model and Notation（业务流程建模与标注）&lt;/td&gt;
&lt;td&gt;Event-driven Process Chain（事件驱动流程链）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;组织制定&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;OMG（Object Management Group）&lt;/td&gt;
&lt;td&gt;SAP 与 IDS Scheer&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;主要用途&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;业务流程建模、流程 &lt;strong&gt;自动化执行&lt;/strong&gt; 、BPM 执行&lt;/td&gt;
&lt;td&gt;业务流程分析、优化，不直接支持自动化执行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;建模方式&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;以任务（Task）为核心&lt;/strong&gt;，结合事件（Event）、网关（Gateway）等元素&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;以事件（Event）驱动流程&lt;/strong&gt;，连接功能（Function）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;表达能力&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;强，支持复杂流程、子流程、异常处理、消息流等&lt;/td&gt;
&lt;td&gt;适用于高层次流程分析，但对复杂逻辑表达有限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;核心元素&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;事件（Event）、任务（Task）、网关（Gateway）、流程（Flow）等&lt;/td&gt;
&lt;td&gt;事件（Event）、功能（Function）、连接器（Connector）、组织单元（Organization Unit）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;流程控制&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;使用 &lt;strong&gt;网关（Gateways）&lt;/strong&gt; 进行分支与合并&lt;/td&gt;
&lt;td&gt;依赖 &lt;strong&gt;连接符（如 AND、OR、XOR）&lt;/strong&gt; 实现分支控制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;优缺点&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;优点&lt;/strong&gt;：标准化强，支持自动化执行，表达能力强&lt;br&gt;&lt;strong&gt;缺点&lt;/strong&gt;：复杂流程可能较难理解&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;优点&lt;/strong&gt;：适用于企业级 ERP 业务流程，适合高层分析&lt;br&gt;&lt;strong&gt;缺点&lt;/strong&gt;：不适用于复杂流程自动化，缺少标准化执行支持&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="bpmn_1"&gt;如何理解 BPMN 自动化执行&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;头大，如何理解？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;BPMN 2.0 规范使用 XML 格式存储流程模型，并且可以被 &lt;strong&gt;BPM 引擎&lt;/strong&gt;（如 Camunda、jBPM、Bonita）解析和自动执行。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;BPMN&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;EPC&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;是否有标准 XML 存储格式&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;✅ 是，BPMN 2.0 XML&lt;/td&gt;
&lt;td&gt;❌ 不是，EPC 没有标准 XML&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;是否可被 BPM 引擎解析和执行&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;✅ 可以自动执行&lt;/td&gt;
&lt;td&gt;❌ 不能自动执行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;是否有任务分配机制&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;✅ &lt;code&gt;userTask&lt;/code&gt; 可自动分配&lt;/td&gt;
&lt;td&gt;❌ 任务只是描述，没有执行机制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;是否支持流程控制（网关）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;✅ &lt;code&gt;exclusiveGateway&lt;/code&gt;、&lt;code&gt;parallelGateway&lt;/code&gt; 控制流程&lt;/td&gt;
&lt;td&gt;⚠️ 有控制流但无标准执行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;是否支持事件驱动&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;✅ &lt;code&gt;startEvent&lt;/code&gt;、&lt;code&gt;endEvent&lt;/code&gt;、&lt;code&gt;messageEvent&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;❌ 事件只是状态，不会主动触发&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="aris"&gt;Aris&lt;/h2&gt;
&lt;p&gt;Aris 是支持流程建模和企业架构管理的工具（之一）。&lt;/p&gt;
&lt;p&gt;Aris: Architecture of Integrated Information Systems&lt;/p&gt;
&lt;h3 id="software-ag"&gt;Software AG&lt;/h3&gt;
&lt;p&gt;Aris 是德国 Software AG 公司的产品。Software AG 成立于1969年，在2023被Silver Lake收购后，已经已经股份公司（Aktiengesellschaft，AG） 转变为 有限责任公司（GmbH），但继续使用原有商标 Software AG。&lt;/p&gt;
&lt;h3 id="_3"&gt;五视图架构&lt;/h3&gt;
&lt;p&gt;ARIS 主要依赖于自己的五视图架构（ARIS house）。这五个视图基于流程的功能、组织、数据、产品或服务视图，以及集成其他视图的流程视图本身。进行分类是为了将模型的复杂性分解为五个方面，从而使业务流程建模更简单。&lt;/p&gt;
&lt;p&gt;&lt;img alt="aris house" src="https://blog.debao.me/images/tools/aris_house.png"&gt;&lt;/p&gt;
&lt;p&gt;每一个 Process 【流程视图】
- 需要有 Actor 执行 【组织视图】
- 依赖或生成 Data 【数据视图】
- 由 Action 构成 【功能视图】
- 有产出 Output 【产品或服务视图】&lt;/p&gt;
&lt;p&gt;换句话，回答如下问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What（做什么）？【功能视图】&lt;/li&gt;
&lt;li&gt;Who（谁来做）？【组织视图】&lt;/li&gt;
&lt;li&gt;Why（为什么）？【产品或服务视图】&lt;/li&gt;
&lt;li&gt;Which（哪些信息）？【数据视图】&lt;/li&gt;
&lt;li&gt;How（如何做）？【流程视图】&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Business_process_management&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Architecture_of_Integrated_Information_Systems&lt;/li&gt;
&lt;li&gt;https://ariscommunity.com/university/bpm-tutorials-aris&lt;/li&gt;
&lt;li&gt;https://s3-eu-west-1.amazonaws.com/arisexpress/community2/documents/urelation/BPM-ARIS_Part2.pdf&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>Windows下CMD、Powershell、pwsh与Terminal小记</title><link href="https://blog.debao.me/2025/01/notes-on-cmd-powershell-pwsh-and-terminal-in-windows/" rel="alternate"></link><published>2025-01-01T00:03:00+08:00</published><updated>2025-01-01T00:03:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2025-01-01:/2025/01/notes-on-cmd-powershell-pwsh-and-terminal-in-windows/</id><summary type="html">&lt;p&gt;&lt;img alt="terminal" src="https://blog.debao.me/images/tools/windows_terminal.png"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;从传统的 &lt;code&gt;cmd.exe&lt;/code&gt; 到 &lt;code&gt;Windows Powershell&lt;/code&gt;，再到跨平台的 &lt;code&gt;PowerShell Core&lt;/code&gt;，随着 Windows 系统的不断发展，命令行工具上的选择也越来越多（乱），稍作记录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#windows"&gt;Windows 下的黑 …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="terminal" src="https://blog.debao.me/images/tools/windows_terminal.png"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;从传统的 &lt;code&gt;cmd.exe&lt;/code&gt; 到 &lt;code&gt;Windows Powershell&lt;/code&gt;，再到跨平台的 &lt;code&gt;PowerShell Core&lt;/code&gt;，随着 Windows 系统的不断发展，命令行工具上的选择也越来越多（乱），稍作记录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#windows"&gt;Windows 下的黑色窗口到底叫什么？&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;列个表&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pwshexepowershell-corepowershell"&gt;pwsh.exe（Powershell Core，Powershell）&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;面向对象&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;别名&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#powershellexewindows-powershell"&gt;powershell.exe（Windows Powershell）&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#windows-powershell-ise"&gt;Windows PowerShell ISE&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#cmdexecommand-promote"&gt;cmd.exe（Command Promote）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#commandcomms-dos-prompt"&gt;command.com（MS-DOS Prompt）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#bashexemingw-bash"&gt;bash.exe（MinGW Bash）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#wsl-shell"&gt;WSL Shell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowsterminalexewindows-terminal"&gt;WindowsTerminal.exe（Windows Terminal）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#conhostexewindows-console"&gt;conhost.exe（Windows Console）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;配置文件&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#pwsh"&gt;pwsh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mingw-bash"&gt;mingw bash&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windows-terminal"&gt;Windows terminal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;脚本&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_6"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="windows"&gt;Windows 下的黑色窗口到底叫什么？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;“控制台”？？那个黑色的文字交互窗口本身&lt;/li&gt;
&lt;li&gt;“命令提示符”？？运行在控制台中的 CMD.exe 程序&lt;/li&gt;
&lt;li&gt;“终端”？？现代化的工具（如 Windows Terminal），支持运行多个命令行解释器&lt;/li&gt;
&lt;li&gt;“Shell”？？负责解析命令的实际程序。&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_1"&gt;列个表&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;平台支持&lt;/th&gt;
&lt;th&gt;特点和用途&lt;/th&gt;
&lt;th&gt;适用场景&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;pwsh.exe&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Shell+脚本语言&lt;/td&gt;
&lt;td&gt;跨平台&lt;/td&gt;
&lt;td&gt;跨平台支持，持续更新，现代化功能丰富&lt;/td&gt;
&lt;td&gt;跨平台脚本开发、云计算管理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;powershell.exe&lt;/td&gt;
&lt;td&gt;Shell+脚本语言&lt;/td&gt;
&lt;td&gt;Windows&lt;/td&gt;
&lt;td&gt;深度集成 Windows，成熟稳定，但已停止更新&lt;/td&gt;
&lt;td&gt;Windows 系统管理、企业环境&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cmd.exe&lt;/td&gt;
&lt;td&gt;Shell&lt;/td&gt;
&lt;td&gt;Windows&lt;/td&gt;
&lt;td&gt;基础命令行工具，支持旧版批处理脚本&lt;/td&gt;
&lt;td&gt;简单任务、运行旧版脚本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;command.com&lt;/td&gt;
&lt;td&gt;Shell&lt;/td&gt;
&lt;td&gt;DOS/早期 Windows&lt;/td&gt;
&lt;td&gt;16 位环境，仅用于兼容性目的&lt;/td&gt;
&lt;td&gt;运行旧版 DOS 程序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Windows Terminal&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;终端模拟器&lt;/td&gt;
&lt;td&gt;Windows&lt;/td&gt;
&lt;td&gt;多标签、多主题，支持丰富的命令行工具&lt;/td&gt;
&lt;td&gt;多工具整合、开发者日常任务&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="pwshexepowershell-corepowershell"&gt;pwsh.exe（Powershell Core，Powershell）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;首个预览版发布于2016年，正式版PowerShell Core6.0发布于2018年，2020年更名为PowerShell7（注意它和Windows Powershell的关系）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;pwsh.exe&lt;/code&gt;&lt;/strong&gt; 是 &lt;strong&gt;PowerShell Core/PowerShell&lt;/strong&gt; 的可执行程序。&lt;/li&gt;
&lt;li&gt;它是 &lt;strong&gt;PowerShell&lt;/strong&gt; 的现代化版本，由 Microsoft 基于 .NET Core 开发，支持 &lt;strong&gt;Windows、Linux、macOS&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;相较于 &lt;strong&gt;Windows PowerShell&lt;/strong&gt;，它更轻量、更快，并且提供了跨平台兼容性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对powershell的评价挺两极分化的，它的问题包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;学习曲线较陡，对新手不友好&lt;/li&gt;
&lt;li&gt;对 Unix/Linux 用户来说不够直观&lt;/li&gt;
&lt;li&gt;对 Windows 用户的传统习惯冲击大&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_2"&gt;面向对象&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;PowerShell（pwsh） 和 CMD 的核心区别之一是 PowerShell 是面向对象的，而 CMD 是基于文本的。理解这一点的关键在于它们处理数据的方式：CMD 将命令输出作为纯文本，而 PowerShell 将命令输出作为对象。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Cmdlet 是 PowerShell 的核心命令，是一种小型、轻量级的命令行工具&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所有 Cmdlet 都采用统一的命名规范，格式为 Verb-Noun（如 Get-Process、Set-Location）。&lt;/li&gt;
&lt;li&gt;动词表示操作（如 Get、Set、Remove 等），名词表示目标对象（如 Process、Location 等）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;找个例子看看：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;Get-ChildItem&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;输出是一个对象列表，每个文件或文件夹是一个 System.IO.FileInfo 或 System.IO.DirectoryInfo 对象。&lt;/li&gt;
&lt;li&gt;这些对象包含丰富的元数据，例如文件名称、大小、创建时间等。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        2025-01-01  10:00 AM                Documents
-a----        2025-01-01  10:00 AM         12345 example.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可以直接访问这些对象的属性，例如文件名和大小&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;Get-ChildItem&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;Select-Object&lt;/span&gt; &lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Length&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可能这样更直观&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;$files&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Get-ChildItem&lt;/span&gt;
&lt;span class="nv"&gt;$files&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;  &lt;span class="c"&gt;# 获取第一个文件/文件夹的名称&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="_3"&gt;别名&lt;/h4&gt;
&lt;p&gt;别名是一种对完整命令（Cmdlet）的简化表示。常见的别名&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;别名&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;对应命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;来源&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;类似于&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ls&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-ChildItem&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;列出文件和目录&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;ls&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;ls&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pwd&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Location&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;显示当前目录&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;pwd&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;pwd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;rm&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Remove-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;删除文件或目录&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;rm&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;rm&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Move-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;移动或重命名文件/目录&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;mv&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;mv&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Copy-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;复制文件或目录&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;cp&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;cp&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cat&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Content&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;显示文件内容&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;cat&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;cat&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;man&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;help&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;获取命令帮助信息&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;man&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;man&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;sleep&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Start-Sleep&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;等待指定秒数&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;sleep&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;sleep&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;grep&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Select-String&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;查找文本内容&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;grep&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;grep&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;kill&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Stop-Process&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;终止进程&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;kill&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;kill&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;clear&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Clear-Host&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;清屏&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;clear&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;clear&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;echo&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Write-Output&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;输出内容&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;echo&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;echo&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;touch&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;New-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;创建新文件&lt;/td&gt;
&lt;td&gt;模拟 Linux 下的 &lt;code&gt;touch&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;Linux 的 &lt;code&gt;touch&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;type&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Content&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;查看文件内容&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;type&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;type&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Clear-Host&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;清屏&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;cls&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;cls&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cd&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Set-Location&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;切换目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;cd&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;cd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-ChildItem&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;列出文件和目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;dir&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;dir&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;del&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Remove-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;删除文件&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;del&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;del&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;rd&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Remove-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;删除目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;rd&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;rd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;md&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;New-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;创建目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;md&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;md&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ren&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Rename-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;重命名文件或目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;ren&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;ren&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;history&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-History&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;查看命令历史&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;doskey /history&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;doskey /history&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;start&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Start-Process&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;启动文件/程序&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;start&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;start&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;popd&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Pop-Location&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;从堆栈中恢复目录&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;popd&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;popd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pushd&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Push-Location&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;将目录压入堆栈&lt;/td&gt;
&lt;td&gt;模拟 CMD 下的 &lt;code&gt;pushd&lt;/code&gt; 命令&lt;/td&gt;
&lt;td&gt;CMD 的 &lt;code&gt;pushd&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;%&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ForEach-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;遍历对象&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;?&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Where-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;过滤对象&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;gci&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-ChildItem&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;列出文件和目录&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;gps&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Process&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;获取当前运行的进程信息&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;gal&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Alias&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;查看别名列表&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;gc&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Get-Content&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;读取文件内容&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ni&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;New-Item&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;创建新文件或目录&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;measure&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Measure-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;统计对象数量、总和等&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;select&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Select-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;选择对象的属性&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;sort&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Sort-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;对对象进行排序&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;fl&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Format-List&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;以列表形式显示对象&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ft&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Format-Table&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;以表格形式显示对象&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;sls&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Select-String&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;查找字符串内容&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ogv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Out-GridView&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;图形化方式显示内容&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ipcsv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Import-Csv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;从 CSV 文件导入数据&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;epcsv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Export-Csv&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;导出数据到 CSV 文件&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tee&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Tee-Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;将输出写入文件并同时输出到控制台&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;r&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Invoke-History&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;运行历史中的命令&lt;/td&gt;
&lt;td&gt;PowerShell 原生&lt;/td&gt;
&lt;td&gt;无&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="powershellexewindows-powershell"&gt;powershell.exe（Windows Powershell）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;首次发布于2006年，Windows PowerShell 5.1 是基于 .NET Framework 构建的最后一个版本，也是 Windows PowerShell 系列的最终版本。（后续转向开源的Powershell Core）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Windows PowerShell&lt;/strong&gt; 是 Windows 系统自带的命令行 Shell 和脚本语言。&lt;/li&gt;
&lt;li&gt;基于 .NET Framework 开发，仅支持 Windows 平台。&lt;/li&gt;
&lt;li&gt;虽然功能强大，但由于依赖 .NET Framework，它的跨平台能力和性能相比 PowerShell Core 有所限制。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="windows-powershell-ise"&gt;Windows PowerShell ISE&lt;/h4&gt;
&lt;p&gt;Windows PowerShell ISE（Integrated Scripting Environment）是一个图形化的脚本编辑和运行环境，专为 Windows PowerShell 用户设计。它集成了脚本编辑、调试和运行功能，使用户可以更轻松地编写、测试和调试 PowerShell 脚本。&lt;/p&gt;
&lt;p&gt;Windows PowerShell ISE 是专为 Windows PowerShell（基于 .NET Framework）设计的工具，因此仅支持 Windows 平台。已经停止开发，且不适用于pwsh。&lt;/p&gt;
&lt;h3 id="cmdexecommand-promote"&gt;cmd.exe（Command Promote）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;首次发布于1987年&lt;/li&gt;
&lt;li&gt;Command Prompt（命令提示符）是 Windows 系统的传统命令行工具，通常简称为 CMD。&lt;/li&gt;
&lt;li&gt;Windows 早期的 Shell 环境，提供了 DOS 风格的命令行接口。&lt;/li&gt;
&lt;li&gt;支持 .bat 和 .cmd 文件的执行&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="commandcomms-dos-prompt"&gt;command.com（MS-DOS Prompt）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;首次发布于1980年&lt;/li&gt;
&lt;li&gt;command.com 是 MS-DOS 的命令行解释器，也是 Windows 9x 系列系统中默认的 Shell。&lt;/li&gt;
&lt;li&gt;它是 CMD 的前辈，设计于 16 位环境，功能非常有限。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="bashexemingw-bash"&gt;bash.exe（MinGW Bash）&lt;/h3&gt;
&lt;p&gt;MinGW（Minimalist GNU for Windows） 是一个工具集，它将一部分常见的 GNU 工具移植到 Windows 平台上，主要用于编译和构建基于 Windows 的程序。&lt;/p&gt;
&lt;p&gt;MinGW Bash 是 MinGW 提供的一个命令行工具，它模拟了一个类似于 Linux 环境的 Bash Shell，用于在 Windows 上运行一部分 GNU 命令。&lt;/p&gt;
&lt;h3 id="wsl-shell"&gt;WSL Shell&lt;/h3&gt;
&lt;p&gt;WSL 提供了一个核心命令行工具 wsl.exe，它允许：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;启动默认的 WSL 发行版。&lt;/li&gt;
&lt;li&gt;指定启动某个具体的 WSL 发行版（如 Ubuntu、Debian 等）。&lt;/li&gt;
&lt;li&gt;执行 Linux 命令或脚本（例如：wsl ls）。&lt;/li&gt;
&lt;li&gt;启动 Bash Shell&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当运行 wsl 或 wsl.exe 时，WSL 会启动用户安装的 Linux 发行版的默认 Shell（通常是 Bash）。&lt;/p&gt;
&lt;h3 id="windowsterminalexewindows-terminal"&gt;WindowsTerminal.exe（Windows Terminal）&lt;/h3&gt;
&lt;p&gt;&lt;img alt="terminal" src="https://blog.debao.me/images/tools/windows_terminal.png"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首次发布于2019年。&lt;/li&gt;
&lt;li&gt;Windows Terminal 是微软开发的现代化终端工具，为用户提供统一的命令行体验。&lt;/li&gt;
&lt;li&gt;它并不是一个 Shell，而是一个终端模拟器，可以托管多个 Shell 和命令行工具，如 CMD、PowerShell、WSL、Azure CLI 等。&lt;/li&gt;
&lt;li&gt;它支持多标签、多主题和 GPU 加速渲染，是现代开发者的首选终端工具。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Windows Terminal 使用一个 JSON 配置文件（settings.json）来定义终端的外观和行为。每种终端环境（如 PowerShell、CMD、WSL Bash）都作为一个单独的 "profile" 被定义在这个配置文件中。通过配置文件，Windows Terminal 可以调用这些环境并在独立的标签页或分屏中运行它们。&lt;/p&gt;
&lt;h3 id="conhostexewindows-console"&gt;conhost.exe（Windows Console）&lt;/h3&gt;
&lt;p&gt;conhost.exe 是 Console Host（控制台主机），是 Windows Console API 的宿主进程。
它是用来管理和渲染 控制台窗口 的组件，负责处理控制台应用程序的输入输出（如显示文本、处理键盘输入等）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在早期 Windows 系统（如 XP）中，控制台应用程序（如 cmd.exe）直接与 csrss.exe（Client Server Runtime Process）交互，这是 Windows 的核心系统服务。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;从 Windows 7 开始，Microsoft 引入了 conhost.exe，将控制台窗口的管理从 csrss.exe 中分离出来。&lt;/p&gt;
&lt;h2 id="_4"&gt;配置文件&lt;/h2&gt;
&lt;p&gt;看看位置&lt;/p&gt;
&lt;h3 id="pwsh"&gt;pwsh&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;%UserProfile%\Documents\PowerShell\Profile.ps1&lt;/li&gt;
&lt;li&gt;%ProgramFiles%\PowerShell\7\Profile.ps1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可以通过如下命令查看具体位置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$PROFILE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;比如：anaconda的 conda init 会修改这个文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="mingw-bash"&gt;mingw bash&lt;/h3&gt;
&lt;p&gt;全局配置文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通常在 MinGW 安装目录下的 /etc/profile 或 /etc/bash.bashrc。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;用户级配置文件，则在用户主目录下的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;~/.bashrc&lt;/li&gt;
&lt;li&gt;~/.bash_profile&lt;/li&gt;
&lt;li&gt;~/.profile&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="windows-terminal"&gt;Windows terminal&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;%LocalAppData%\Packages\Microsoft.WindowsTerminal_8wekyb3d8bbwe\LocalState&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;脚本&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;.ps1 中的 ps 代表 PowerShell。数字 1 代表 PowerShell 版本 1.0（这是 PowerShell 的第一个正式版本），后面没再改。【注意：.ps 是 Adobe 公司大名鼎鼎的 postscript 文件（.pdf文件的前身）的后缀，微软这也是避嫌了】&lt;/li&gt;
&lt;li&gt;.bat 或 .cmd：Windows 批处理脚本文件。（Powershell 通过内部调用cmd可以支持.bat文件）&lt;/li&gt;
&lt;li&gt;.sh 取自shell，Linux 本身不关注后缀，而且有各种shell存在&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;特性&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;.ps1&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;.bat&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;.sh&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;运行环境&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;PowerShell&lt;/td&gt;
&lt;td&gt;Windows CMD（命令提示符）&lt;/td&gt;
&lt;td&gt;Linux/Unix（Shell）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;适用系统&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Windows、Linux、macOS&lt;/td&gt;
&lt;td&gt;仅 Windows&lt;/td&gt;
&lt;td&gt;Linux、macOS（Windows 需工具）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;强（支持面向对象和模块化设计）&lt;/td&gt;
&lt;td&gt;中（适合简单任务）&lt;/td&gt;
&lt;td&gt;强（擅长文本处理和系统管理）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;现代化&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;中等&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_6"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/PowerShell&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Cmd.exe&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Windows_Terminal&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/COMMAND.COM&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Windows_Console&lt;/li&gt;
&lt;li&gt;https://github.com/microsoft/terminal&lt;/li&gt;
&lt;li&gt;https://github.com/PowerShell/PowerShell&lt;/li&gt;
&lt;li&gt;https://www.mingw-w64.org/&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>Nvidia GPU历史小记</title><link href="https://blog.debao.me/2024/12/notes-on-the-history-of-nvidia-gpus/" rel="alternate"></link><published>2024-12-31T00:11:00+08:00</published><updated>2024-12-31T00:11:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-12-31:/2024/12/notes-on-the-history-of-nvidia-gpus/</id><summary type="html">&lt;p&gt;据说，Nvidia开头的大写字母“N”代表着“新”（new）、“下一代”（next-generation）和“数字”（number），而“vidia”则来源于拉丁语单词“videre”，意为“看见”。合起来整个名称可以理解为“新视野”（new vision …&lt;/p&gt;</summary><content type="html">&lt;p&gt;据说，Nvidia开头的大写字母“N”代表着“新”（new）、“下一代”（next-generation）和“数字”（number），而“vidia”则来源于拉丁语单词“videre”，意为“看见”。合起来整个名称可以理解为“新视野”（new vision），体现在logo中是一只眼睛。&lt;/p&gt;
&lt;p&gt;创新时间线：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1993：3D Graphics&lt;/li&gt;
&lt;li&gt;1999：GPU&lt;/li&gt;
&lt;li&gt;2006：CUDA&lt;/li&gt;
&lt;li&gt;2012：AI&lt;/li&gt;
&lt;li&gt;2018：RTX&lt;/li&gt;
&lt;li&gt;2022：Omniverse&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;术语&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;GPU：Graphics Processing Unit&lt;/li&gt;
&lt;li&gt;CUDA：Compute Unified Device Architecture&lt;/li&gt;
&lt;li&gt;RT：Ray tracing&lt;/li&gt;
&lt;li&gt;Omniverse：由 "Omni"（意为“全、全面”）和 "Universe"（意为“宇宙”）组合而成。聚焦元宇宙（Metaverse） 和 虚拟现实（VR） 需求的实时协作与3D仿真平台。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2006年起，Nvidia开始以知名人物命名起架构：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tesla&lt;/strong&gt;：尼古拉·特斯拉（Nikola Tesla），发明家和电气工程师，交流电系统的先驱。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fermi&lt;/strong&gt;：恩里科·费米（Enrico Fermi），物理学家，“原子弹之父”，也是量子力学和粒子物理学的开创者。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kepler&lt;/strong&gt;：约翰内斯·开普勒（Johannes Kepler），天文学家，开普勒行星运动定律的发现者。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Maxwell&lt;/strong&gt;：詹姆斯·克拉克·麦克斯韦（James Clerk Maxwell），提出了电磁场理论的物理学家。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pascal&lt;/strong&gt;：布莱兹·帕斯卡（Blaise Pascal），数学家、物理学家，概率论和流体力学的奠基者。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Volta&lt;/strong&gt;：亚历山德罗·伏打（Alessandro Volta），电池的发明者，电压单位“伏特”的来源。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Turing&lt;/strong&gt;：艾伦·图灵（Alan Turing），计算机科学之父，人工智能和图灵测试的奠基者。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ampere&lt;/strong&gt;：安德烈-玛丽·安培（André-Marie Ampère），电磁学的先驱，“安培”单位的来源。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ada Lovelace&lt;/strong&gt;：阿达·洛芙莱斯（Ada Lovelace），世界上第一位程序员，现代计算机科学的先驱。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hopper&lt;/strong&gt;：格蕾丝·霍普（Grace Hopper），计算机科学家，“COBOL”语言的创造者，现代编程的开拓者。  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;简要历史&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;1993年&lt;/strong&gt;: Nvidia 由黄仁勋（Jensen Huang）、Chris Malachowsky 和 Curtis Priem 创立。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;1995年&lt;/strong&gt;: 发布 NV1，这是首款多媒体 PCI 单槽卡（PCI single-slot card），实现 3D 图像渲染，并支持连接游戏手柄。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;1997年&lt;/strong&gt;: 发布 RIVA 128，这是首款高性能的 128 位 Direct3D 图形处理器，能够渲染 2D 和 3D 图像。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="1999-2010"&gt;早期的图形处理单元（1999-2010）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;GeForce 256 (1999)&lt;/strong&gt;：被称为“世界上第一款GPU”，标志着从传统的图形加速卡向专门的图形处理单元的转变。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tesla (2006)&lt;/strong&gt;：专为科学计算和高性能计算（HPC）设计的系列，开创了GPU计算的先河。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fermi (2009)&lt;/strong&gt;：第一个支持CUDA并行计算架构的GPU，开启了GPU在深度学习和科学计算中的应用。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;关于Tesla:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tesla 是 NVIDIA 的第四代 GPU 架构名称（2006 年），首次引入统一着色器架构和 CUDA 支持。&lt;/li&gt;
&lt;li&gt;Tesla 也是 NVIDIA 的专业显卡系列名称，专注于高性能计算（HPC）、科学计算和 AI 加速，后续产品基于不同架构（如 Fermi、Kepler、Pascal 等）。&lt;/li&gt;
&lt;li&gt;Tesla 系列显卡如今已被 NVIDIA A 系列（如 A100、H100）取代，但其架构和技术仍是现代 GPU 的基础之一。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id="gpu2010"&gt;现代GPU架构的崛起（2010至今）&lt;/h3&gt;
&lt;p&gt;&lt;img alt="kapler" src="https://blog.debao.me/images/tools/nvidia_gpu_history_0.png"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kepler (2012)&lt;/strong&gt;：Kepler架构进一步提升了性能，并优化了功耗表现，成为了游戏和计算领域的主力架构。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Maxwell (2014)&lt;/strong&gt;：专注于能效提升，广泛应用于消费级显卡中。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pascal (2016)&lt;/strong&gt;：强化了深度学习、AI计算和VR等领域的性能，推出了Titan X和P100等标志性产品。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Volta (2017)&lt;/strong&gt;：推出了Tesla V100，进一步推动了深度学习的训练任务。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Turing (2018)&lt;/strong&gt;：引入了实时光线追踪技术，开创了AI推理、游戏、专业图形的多重应用领域。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ampere (2020)&lt;/strong&gt;：强化了深度学习训练的性能，并推出了A100，成为AI和HPC的“工作马”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hopper (2022)&lt;/strong&gt;：为AI推理任务提供了更强大的算力，继续在数据中心领域占据主导地位。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ada Lovelace (2023)&lt;/strong&gt;：最新一代的架构，优化了AI推理和图形渲染的性能。&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;架构&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;代表系列&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Tesla&lt;/td&gt;
&lt;td&gt;Tesla C870, S1070&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Fermi&lt;/td&gt;
&lt;td&gt;GeForce GTX 400 系列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Kepler&lt;/td&gt;
&lt;td&gt;GeForce GTX 600 系列 / Tesla K 系列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Maxwell&lt;/td&gt;
&lt;td&gt;GeForce GTX 900 系列 / Quadro M 系列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pascal&lt;/td&gt;
&lt;td&gt;GeForce GTX 10 系列 / Tesla P 系列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Volta&lt;/td&gt;
&lt;td&gt;Tesla V100, Titan V&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Turing&lt;/td&gt;
&lt;td&gt;GeForce RTX 20 系列 / T4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ampere&lt;/td&gt;
&lt;td&gt;GeForce RTX 30 系列 / A100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hopper&lt;/td&gt;
&lt;td&gt;H100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ada Lovelace&lt;/td&gt;
&lt;td&gt;GeForce RTX 40 系列&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_3"&gt;系列分类&lt;/h2&gt;
&lt;p&gt;似乎很乱&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;系列&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;架构&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;典型用途&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;代表产品&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GeForce GTX 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Kepler / Maxwell / Pascal&lt;/td&gt;
&lt;td&gt;游戏、家庭娱乐、基础图形处理&lt;/td&gt;
&lt;td&gt;GTX 1660, GTX 1080 Ti&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GeForce RTX 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Turing / Ampere / Ada Lovelace&lt;/td&gt;
&lt;td&gt;游戏、实时光线追踪、内容创作&lt;/td&gt;
&lt;td&gt;RTX 4090, RTX 3090, RTX 2080 Ti&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NVIDIA RTX（专业级）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Turing / Ampere&lt;/td&gt;
&lt;td&gt;CAD、3D 渲染、科学可视化、动画制作&lt;/td&gt;
&lt;td&gt;RTX A6000, RTX A4000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Quadro 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Kepler / Maxwell / Pascal / Turing&lt;/td&gt;
&lt;td&gt;专业图形设计与工程软件优化&lt;/td&gt;
&lt;td&gt;Quadro RTX 8000, Quadro P5000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Tesla 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Kepler / Maxwell / Pascal&lt;/td&gt;
&lt;td&gt;高性能计算（HPC）、AI 训练与推理&lt;/td&gt;
&lt;td&gt;Tesla K80, Tesla P100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;A 系列（数据中心）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Ampere&lt;/td&gt;
&lt;td&gt;数据中心 AI 训练与推理、大模型计算&lt;/td&gt;
&lt;td&gt;A100, A30, A40&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;H 系列（数据中心）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Hopper&lt;/td&gt;
&lt;td&gt;AI 推理优化、大模型（Transformer）训练&lt;/td&gt;
&lt;td&gt;H100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Jetson 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Maxwell / Pascal / Volta&lt;/td&gt;
&lt;td&gt;边缘计算、嵌入式 AI、机器人&lt;/td&gt;
&lt;td&gt;Jetson Xavier NX, Jetson Nano&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;T 系列（推理优化）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Turing&lt;/td&gt;
&lt;td&gt;云推理、边缘计算、低功耗 AI 推理&lt;/td&gt;
&lt;td&gt;T4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NVIDIA GRID 系列&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Kepler / Maxwell / Pascal&lt;/td&gt;
&lt;td&gt;虚拟化、云游戏、虚拟桌面&lt;/td&gt;
&lt;td&gt;GRID K2, GRID V100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CMP 系列（挖矿专用）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Ampere&lt;/td&gt;
&lt;td&gt;加密货币挖矿&lt;/td&gt;
&lt;td&gt;CMP 30HX, CMP 170HX&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/List_of_Nvidia_graphics_processing_units&lt;/li&gt;
&lt;li&gt;https://www.nvidia.com.tw/content/PDF/GTC/keynote/marc-hamilton-nvidia-keynote.pdf&lt;/li&gt;
&lt;li&gt;https://www.thestreet.com/technology/nvidia-company-history-timeline&lt;/li&gt;
&lt;li&gt;https://www.girolino.com/nvidia-gpu-evolution-from-geforce-to-ai-powerhouse/&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>图像格式tiff小记</title><link href="https://blog.debao.me/2024/12/notes-no-tiff-image-format/" rel="alternate"></link><published>2024-12-29T19:19:00+08:00</published><updated>2024-12-29T19:19:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-12-29:/2024/12/notes-no-tiff-image-format/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;一个很古老，很简单 的图像格式；同时又是存在各种扩展，又超级复杂的图像格式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiff-60"&gt;Tiff 6.0 规格书&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiffbaseline-tiff"&gt;基线TIFF（Baseline TIFF）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tifftiff-extensions"&gt;TIFF扩展（TIFF Extensions）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;压缩格 …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;一个很古老，很简单 的图像格式；同时又是存在各种扩展，又超级复杂的图像格式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiff-60"&gt;Tiff 6.0 规格书&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiffbaseline-tiff"&gt;基线TIFF（Baseline TIFF）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tifftiff-extensions"&gt;TIFF扩展（TIFF Extensions）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;压缩格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#tiffep"&gt;TIFF/EP&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiff60exif"&gt;与TIFF6.0、EXIF的关系&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;压缩格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#dngdigital-negative"&gt;DNG(Digital Negative)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#readerwriter"&gt;对Reader、Writer的要求&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#reader"&gt;Reader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#writer"&gt;Writer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#tiff"&gt;TIFF格式&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tiff_1"&gt;TIFF文件结构&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;文件头&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifdimage-file-directory"&gt;IFD(Image File Directory)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd-entrytag"&gt;IFD Entry（Tag）&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_4"&gt;数据类型&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#field"&gt;一些可选Field&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;图像数据&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_6"&gt;灰度图像&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_7"&gt;索引图像&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_8"&gt;真彩图像&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tile"&gt;平铺（Tile）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#thumbnail"&gt;缩微图（Thumbnail）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#libtiff"&gt;LibTiff 库&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_9"&gt;文件打开&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd"&gt;IFD&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#ifd_1"&gt;读IFD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd_2"&gt;写IFD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd_3"&gt;切换IFD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd_4"&gt;移除IFD&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#tag"&gt;Tag&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_10"&gt;注意事项&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tifffield"&gt;TIFFField&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tag_1"&gt;非内置的Tag&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_11"&gt;读写图像数据&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tile_1"&gt;Tile接口&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_12"&gt;压缩格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#geotiff"&gt;GeoTiff&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#bigtiff"&gt;BigTiff&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_13"&gt;格式&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_14"&gt;文件头&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ifd_5"&gt;IFD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#tag-field"&gt;TAG Field&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_15"&gt;软件&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#photoshop"&gt;Photoshop&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#pyramin"&gt;Pyramin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_16"&gt;缩微图&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#imagemagick"&gt;ImageMagick&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#qt"&gt;Qt 图像&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_17"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;TIFF(Tag Image File Format)是用于存储位图图像的计算机文件格式，在印刷行业和摄影界等很流行。它被扫描仪、传真机、文字处理、光学字符识别、桌面出版系统、图像处理、页面布局等程序广泛的支持。&lt;/p&gt;
&lt;p&gt;TIFF格式由Aldus公司创建，最新版本（Tiff 6.0）发布于1992年。1994年Adobe Systems收购Aldus。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TIFF、PNG、JEPG是三种支持(deep-color)的图像格式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="tiff-60"&gt;Tiff 6.0 规格书&lt;/h2&gt;
&lt;p&gt;Tiff6.0 规格书包含下列部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part1: 基线TIFF （Baseline TIFF）&lt;/li&gt;
&lt;li&gt;Part2: TIFF扩展 （TIFF Extensions）&lt;/li&gt;
&lt;li&gt;Part3: 附件 （Appendices）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="tiffbaseline-tiff"&gt;基线TIFF（Baseline TIFF）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;多页面或子文件（Multiple subfiles）&lt;ul&gt;
&lt;li&gt;每个TIFF文件可以包含多页图像（multi-page images）&lt;/li&gt;
&lt;li&gt;每一个图像需要一个IFD（Image File Directory）&lt;/li&gt;
&lt;li&gt;每个IFD定义一个子文件（subfile）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;带（Strips）&lt;ul&gt;
&lt;li&gt;一个图像可以有多个带（Strip）构成。&lt;/li&gt;
&lt;li&gt;每一个带由一行或多行图像数据构成，每个带可以使用不同的压缩算法。&lt;/li&gt;
&lt;li&gt;如果没有Strip的标记，认为图像只有一个Strip构成。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;压缩（Compression）&lt;ul&gt;
&lt;li&gt;1 无压缩 （默认）&lt;/li&gt;
&lt;li&gt;2 CCITT Group 3 1（只用于二值图像）&lt;/li&gt;
&lt;li&gt;32773 PackBits Compression&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;图像类型&lt;ul&gt;
&lt;li&gt;二值图像 bilevel&lt;/li&gt;
&lt;li&gt;灰度图像 grayscale&lt;/li&gt;
&lt;li&gt;调色板 pallette-color&lt;/li&gt;
&lt;li&gt;真彩图像 RGB full-color &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;字节序&lt;ul&gt;
&lt;li&gt;"II"(Intel byte ordering)小端&lt;/li&gt;
&lt;li&gt;"MM"（Motoroia byte ordering）大端&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;其他字段（Other TIFF fields）&lt;ul&gt;
&lt;li&gt;规范中没有的字段，Reader需要能处理并忽略&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="tifftiff-extensions"&gt;TIFF扩展（TIFF Extensions）&lt;/h3&gt;
&lt;p&gt;引入更多的图像类型（CMYK、YCbCr、HalftoneHints、&lt;strong&gt;Tiled&lt;/strong&gt;、CIELab）和压缩格式（CCITT T.4 bilevel、CCITT T.6 bilevel、LZW、JPEG）；引入SUBIFD标签支持图像树（Image Trees）；私有Tag。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Image Trees&lt;ul&gt;
&lt;li&gt;SUBIFD 用于标记子IFD&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Tiled&lt;ul&gt;
&lt;li&gt;一个TIFF图像可以有多个大小相同的图像平铺构成，类似于Strips。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Baseline Reader&lt;/strong&gt;不要求读Tiled图像。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Private tags&lt;ul&gt;
&lt;li&gt;32768~64999和65536及以上 的Tag 是私有的，仅对个人或组织有意义，但是需要向Adobe申请，由Adobe进行分配，以避免冲突。（TIFF/EP定义的一些新标签位于该段）&lt;/li&gt;
&lt;li&gt;65000~65535的Tag，可以复用，无需注册登记&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Private IFD&lt;ul&gt;
&lt;li&gt;如果需要10个以上的私有Tag，考虑使用私有IFD&lt;/li&gt;
&lt;li&gt;定义一个类型为LONG或IFD类型的私有Tag，其值作为offset指向其他区域（该区域怎么用是完全自由的）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_1"&gt;压缩格式&lt;/h3&gt;
&lt;p&gt;关注 LZW JPEG ZIP&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LZW 之所以不再TIFF6.0 BaseLine里面，是因为当时有专利。（2003年过期）&lt;/li&gt;
&lt;li&gt;LZW 对16位深度的图像，压缩效果很不好，甚至比压缩前体积更大。&lt;/li&gt;
&lt;li&gt;JPEG: TIFF 6.0引入的 "6"(老的，libtiff对其支持也不好); &lt;code&gt;TIFF Technical Note#2&lt;/code&gt; 引入的 “7”（新的，也在TIFF/EP中使用）&lt;/li&gt;
&lt;li&gt;ZIP(Deflate/Inflate) 放气充气，值为“8”：&lt;code&gt;TIFF Technical Note#2&lt;/code&gt;引入&lt;/li&gt;
&lt;li&gt;ZIP(Deflate/Inflate)，值为32946：存在时间更早，“8”和它通用&lt;ul&gt;
&lt;li&gt;Photoshop可以读，但写时使用"8"??(Fix me!!)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tiffep"&gt;TIFF/EP&lt;/h2&gt;
&lt;p&gt;TIFF/EP（Tag Image File Format/Electronic Photography) 是数码图像文件的国际标准 ISO 12234-2 。文件后缀名也是 .tiff 或 .tif。该标准发布于2001年。&lt;/p&gt;
&lt;p&gt;Adobe 的 DNG 格式基于 TIFF/EP 标准（兼容）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当前数码相机保存图片的工业标准是 Exif/DCF。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="tiff60exif"&gt;与TIFF6.0、EXIF的关系&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;TIFF/EP遵守 TIFF6.0 的标准，并使用和TIFF6.0同样的文件头。&lt;ul&gt;
&lt;li&gt;但是它定义了一些放置到第一个IFD中的标签（TAG），并忽略了不少TIFF6.0中的标签。&lt;/li&gt;
&lt;li&gt;TIFF/EP不允许缺省值，所有的值必须显式设置。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;TIFF/EP和Exif标准有一些显著的区别。&lt;ul&gt;
&lt;li&gt;Exif标准中位于 Exif Sub-IFD 的标签现在直接位于第一个 IFD中。&lt;/li&gt;
&lt;li&gt;Exif IFD Sub-IFD，互操作的 Sub-IFD以及MakerNode都被省略。&lt;/li&gt;
&lt;li&gt;TIFF/EP 定义了一个处理缩微图的方法。该方法不同于Exif标准中的方法。&lt;/li&gt;
&lt;li&gt;TIFF/EP 重新定义了一些 Exif标准中定义的标签。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;压缩格式&lt;/h3&gt;
&lt;p&gt;TIFF/EP可以存储无压缩格式，或者JPEG基线DCT-Based有损压缩。TIFF/EP允许使用其他的格式，但不强制要求Reader能读。&lt;/p&gt;
&lt;p&gt;不同于TIFF6.0中，压缩格式默认是无压缩，可以省略Tag（259），TIFF/EP必须通过Tag来指定，不能省略。&lt;/p&gt;
&lt;p&gt;缩微图必须是无压缩的，即：IFD的Tag(259)值必须是1。（当主图像采用JPEG压缩或其他压缩格式时，必须存在缩微图，且需要在第一个IFD中，以便与TIFF6.0BaseLine Reader兼容）&lt;/p&gt;
&lt;h2 id="dngdigital-negative"&gt;DNG(Digital  Negative)&lt;/h2&gt;
&lt;p&gt;文件后缀: &lt;code&gt;.dng&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;DNG是TIFF 6.0格式的扩展，并且与TIFF/EP兼容。一个DNG文件同时遵守DNG规范和TIFF/EP标准是可行的（不强制要求）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNG建议使用SubIFD树（见TIFF/EP中描述）。SubIFD链（chain）不被支持。&lt;/li&gt;
&lt;li&gt;DNG建议第一个IFD中包含一个低分辨率的缩微图（如TIFF/EP规范所描述），但不强制。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="readerwriter"&gt;对Reader、Writer的要求&lt;/h2&gt;
&lt;h3 id="reader"&gt;Reader&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Reader&lt;strong&gt;必须&lt;/strong&gt;能处理多页的TIFF文件，但不强制要求Baseline Reader读第一个IFD之后的任何一个IFD（换言之，大量的Baseline Reader可能只读第一个IFD）。&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;必须&lt;/strong&gt;支持BaseLine中的三种压缩方式（无压缩、CCITT Group3 1、PackBits Compression）。注：TIFF/EP的Reader必须支持（无压缩、JPEG压缩）。&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;必须&lt;/strong&gt;能读取大端和小端的TIFF图像&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;必须&lt;/strong&gt;准备好处理并能忽略不认识（TIFF规范中未定义）的Tag&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;不能拒绝&lt;/strong&gt;读取可选Field（比如Make、Model、DateTime等）不存在的TIFF文件。&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;必须&lt;/strong&gt;能读取缺省Field存在和不存在的情况。&lt;/li&gt;
&lt;li&gt;Reader&lt;strong&gt;应当&lt;/strong&gt;跳过不认识的字段类型（比如不排除以后会有新的类型）的Field&lt;/li&gt;
&lt;li&gt;TIFF可能包含新的Pixel类型，如果字段SampleFormat存在且其值不为1，BaseLine Reader需要结束读流程。&lt;/li&gt;
&lt;li&gt;TIFF中的单像素可能包含超出我们想象的通道，BaseLine Reader需要借助SmaplesPrePixel和BitsPreSample字段的值优雅地跳过它们。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="writer"&gt;Writer&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;缺省的Field，可写可不写。&lt;/li&gt;
&lt;li&gt;TIFF6.0要求：如果TIFF中有多个页面，第一个必须是全分辨率图像，后续的图像（比如缩减分辨率图像）可以按任何顺序。对这些图像，Reader需要遍历相应的IFD来决定如何处理&lt;ul&gt;
&lt;li&gt;但是TIFF/EP 以及DNG都建议在IFD0中放置缩微图。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;TIFF6.0要求：任何引用都不能在多处出现。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tiff"&gt;TIFF格式&lt;/h2&gt;
&lt;h3 id="tiff_1"&gt;TIFF文件结构&lt;/h3&gt;
&lt;p&gt;TIFF是图像文件格式，它以一个8字节的文件头开始的，文件头指向一个IFD（Image File Directory），IFD包含图像的信息，以及一个指向真实数据的指针。&lt;/p&gt;
&lt;p&gt;&lt;img alt="Tiff File Structure" src="https://blog.debao.me/images/tools/tiff.png"&gt;&lt;/p&gt;
&lt;h3 id="_3"&gt;文件头&lt;/h3&gt;
&lt;p&gt;文件头固定占用8个字节。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移(offset)&lt;/th&gt;
&lt;th&gt;数据类型(DataType)&lt;/th&gt;
&lt;th&gt;值(Value)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;字节序指示："II"代表小端，"MM"代表大端。影响所有的16位或32位整数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;版本号 (始终是 42)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Unsigned Long&lt;/td&gt;
&lt;td&gt;第一个 IFD 的偏移值，偏移值总是相对于TIFF文件的，本文件的第一个字节偏移值是0。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;注：TIFF/EP标准建议判断版本时使用 VERSION &amp;gt;= 42，而不是VERSION==42&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="ifdimage-file-directory"&gt;IFD(Image File Directory)&lt;/h3&gt;
&lt;p&gt;一个TIFF文件至少包含一个IFD。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移(offset)&lt;/th&gt;
&lt;th&gt;数据类型(DataType)&lt;/th&gt;
&lt;th&gt;值(Value)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;本IFD中的Tag数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2+x*12&lt;/td&gt;
&lt;td&gt;Tag structure&lt;/td&gt;
&lt;td&gt;Tag data&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2+(本IFD中Tag数)*12&lt;/td&gt;
&lt;td&gt;Unsigned Long&lt;/td&gt;
&lt;td&gt;下一个IFD在文件内的偏移值, 如果没有则为0。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;一个IFD中至少包含一个DE(Directory entry)，最多包含65535个？所有的Tag需要按&lt;strong&gt;升序&lt;/strong&gt;排序。每一个Tag精确占12个字节。&lt;/p&gt;
&lt;h3 id="ifd-entrytag"&gt;IFD Entry（Tag）&lt;/h3&gt;
&lt;p&gt;TIFF field：包含Tag和其值的逻辑实体（entry）。每一个Field都有一个关联的Count，也就是说所有的Field都是一个一维的数组，即使是大多数Field只包含一个值。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移(offset)&lt;/th&gt;
&lt;th&gt;数据类型(DataType)&lt;/th&gt;
&lt;th&gt;值(Value)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;Tag标识&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;Tag数据的数据类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Unsigned Long&lt;/td&gt;
&lt;td&gt;值的个数（注意，不是字节数，比如单个SHORT，是1不是2）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Tag数据或数据在文件内的偏移值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果 数据大小*个数 &amp;lt;=4，则可以直接存储（小于4，则左对齐，存在低位），反之则需要在其他地方存储，此处只存储偏移值。&lt;/p&gt;
&lt;p&gt;注意：
* 偏移值不能认为是LONG类型
* TIFF标准禁止在Tag数据中包含偏移值，标准中定义的(TileOffsets、StripOffsets、...)除外。&lt;/p&gt;
&lt;h4 id="_4"&gt;数据类型&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1=BYTE&lt;/td&gt;
&lt;td&gt;8位无符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2=ASCII&lt;/td&gt;
&lt;td&gt;7位的ASCII码，最后一个字节需要是NUL。（可以包含多个字符串，每个都以NUL结束，COUNT是指所有字节数）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3=SHORT&lt;/td&gt;
&lt;td&gt;16位无符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4=LONG&lt;/td&gt;
&lt;td&gt;32位无符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5=RATIONAL&lt;/td&gt;
&lt;td&gt;两个LONG，前者分子后者分母&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6=SBYTE&lt;/td&gt;
&lt;td&gt;8位有符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7=UNDEFINED&lt;/td&gt;
&lt;td&gt;8位字节，可以存储任何东西&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8=SSHORT&lt;/td&gt;
&lt;td&gt;16位有符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9=SLONG&lt;/td&gt;
&lt;td&gt;32位有符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10=SRATIONAL&lt;/td&gt;
&lt;td&gt;两个SLONG，前者分子后者分母&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11=FLOAT&lt;/td&gt;
&lt;td&gt;单精度浮点（32位）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12=DOUBLE&lt;/td&gt;
&lt;td&gt;双精度浮点（64位）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13=IFD&lt;/td&gt;
&lt;td&gt;32位无符号数，是指向IFD的offset值（Adobe Thchnology Note）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16=LONG8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位无符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;17=SLONG8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位有符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;18=IFD8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位无符号数，是指向IFD的offset值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果Reader遇到不认识的TYPE，要跳过该Tag。&lt;/p&gt;
&lt;h4 id="field"&gt;一些可选Field&lt;/h4&gt;
&lt;p&gt;描述性的：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Artist&lt;/td&gt;
&lt;td&gt;315&lt;/td&gt;
&lt;td&gt;13B&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像创建者（某些老TIFF用于存放版权说明）。系统登录用户&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Copyright&lt;/td&gt;
&lt;td&gt;33432&lt;/td&gt;
&lt;td&gt;8298&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;版权说明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DateTime&lt;/td&gt;
&lt;td&gt;306&lt;/td&gt;
&lt;td&gt;132&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;&lt;code&gt;YYYY:MM:DD HH:MM:SS&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;包含NUL在内，共20字节，TIFF/EP下强制存在&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HostComputer&lt;/td&gt;
&lt;td&gt;316&lt;/td&gt;
&lt;td&gt;13C&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像创建时的计算机或操作系统&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ImageDescription&lt;/td&gt;
&lt;td&gt;270&lt;/td&gt;
&lt;td&gt;10E&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像的主题，比如"1988 company picnic"&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Make&lt;/td&gt;
&lt;td&gt;271&lt;/td&gt;
&lt;td&gt;10F&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;创建图像的工具（比如扫描仪）制造商。聚束SEM具体名字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Model&lt;/td&gt;
&lt;td&gt;272&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;工具（比如扫描仪）的Model名或数字。聚束SEM型号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Software&lt;/td&gt;
&lt;td&gt;305&lt;/td&gt;
&lt;td&gt;131&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;创建图像的软件名字或版本号。聚束SEM控制软件名字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 DocumentName&lt;/td&gt;
&lt;td&gt;269&lt;/td&gt;
&lt;td&gt;10D&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;文档名，本TIFF通过扫描哪个文件得到的&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 PageName&lt;/td&gt;
&lt;td&gt;285&lt;/td&gt;
&lt;td&gt;11D&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;页面名，通过扫描那个页面得到&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 PageNumber&lt;/td&gt;
&lt;td&gt;297&lt;/td&gt;
&lt;td&gt;129&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;页号，总页数&lt;/td&gt;
&lt;td&gt;两个数字&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;有其他意义的：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;NewSubfileType&lt;/td&gt;
&lt;td&gt;254&lt;/td&gt;
&lt;td&gt;FE&lt;/td&gt;
&lt;td&gt;LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Bit0为1表示是分辨率缩减的图像，Bit1为1表示多页图像中单独1页，Bit2为1表示是另一个图像透明度掩码。默认值为0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Orientation&lt;/td&gt;
&lt;td&gt;274&lt;/td&gt;
&lt;td&gt;112&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Baseline Tiff下取值范围1~8，默认值为1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PlanarConfiguration&lt;/td&gt;
&lt;td&gt;284&lt;/td&gt;
&lt;td&gt;11C&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;1或2&lt;/td&gt;
&lt;td&gt;像素存储格式：块（Chunky）或面(Planar)，默认1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP SubIFDs&lt;/td&gt;
&lt;td&gt;330&lt;/td&gt;
&lt;td&gt;14A&lt;/td&gt;
&lt;td&gt;LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;指向各个子IFD的文件偏移量，由Adobe公司定义&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP TimeZoneOffset&lt;/td&gt;
&lt;td&gt;34858&lt;/td&gt;
&lt;td&gt;882A&lt;/td&gt;
&lt;td&gt;SSHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;1~2个有符号short，第二个数表示是设置哪个DateTime的时区&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DNG DNGPrivateData&lt;/td&gt;
&lt;td&gt;50740&lt;/td&gt;
&lt;td&gt;C634&lt;/td&gt;
&lt;td&gt;BYTE&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;必须以一个NUL结尾的ASCII字符串（制造商名字）开头，之后的数据必须是自包含的，且需要与字节序无关。（自由写私有数据）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;不建议用：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SubfileType&lt;/td&gt;
&lt;td&gt;255&lt;/td&gt;
&lt;td&gt;FF&lt;/td&gt;
&lt;td&gt;LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;废弃，建议使用NewSubfileType&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_5"&gt;图像数据&lt;/h3&gt;
&lt;h4 id="_6"&gt;灰度图像&lt;/h4&gt;
&lt;p&gt;对于灰度图像（Grayscale Image），以下Field是必须的&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ImageWidth&lt;/td&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像列数，单扫描线中的像素数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ImageLength&lt;/td&gt;
&lt;td&gt;257&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像行数，有时用扫描线数（scanlines）描述&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BitsPerSample&lt;/td&gt;
&lt;td&gt;258&lt;/td&gt;
&lt;td&gt;102&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;4 or 8&lt;/td&gt;
&lt;td&gt;聚束只使用常规的8位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Compression&lt;/td&gt;
&lt;td&gt;259&lt;/td&gt;
&lt;td&gt;103&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;1 or 32773&lt;/td&gt;
&lt;td&gt;聚束只使用无压缩的1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PhotometricInterpretation&lt;/td&gt;
&lt;td&gt;262&lt;/td&gt;
&lt;td&gt;106&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;0 or 1&lt;/td&gt;
&lt;td&gt;0： 灰度最小值0表示白色；1：灰度最小值0表示黑色&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StripOffsets&lt;/td&gt;
&lt;td&gt;273&lt;/td&gt;
&lt;td&gt;111&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;每个带（strip）在的文件中的偏移值，各个带不一定是顺序存储，不能做顺序存储的假定！！！&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RowsPerStrip&lt;/td&gt;
&lt;td&gt;278&lt;/td&gt;
&lt;td&gt;116&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;每个带（strip）中的图像行数（最后一个带除外，最后一个带可能小于该数值）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StripByteCounts&lt;/td&gt;
&lt;td&gt;279&lt;/td&gt;
&lt;td&gt;117&lt;/td&gt;
&lt;td&gt;LONG or SHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;每个带（strip）！！压缩后！！的字节数，TIFF/EP要求每个Strip压缩&lt;strong&gt;前&lt;/strong&gt;的大小不大于64k&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XResolution&lt;/td&gt;
&lt;td&gt;282&lt;/td&gt;
&lt;td&gt;11A&lt;/td&gt;
&lt;td&gt;RATIONAL&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;ImageWidth方向（一般水平方向），单位ResolutionUnit中的像素点数，这种值对布局排版等有意义，对图像编辑程序没多大意义。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;YResolution&lt;/td&gt;
&lt;td&gt;283&lt;/td&gt;
&lt;td&gt;11B&lt;/td&gt;
&lt;td&gt;RATIONAL&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;ImageLength方向（一般竖直方向），单位ResolutionUnit中的像素点数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ResolutionUnit&lt;/td&gt;
&lt;td&gt;296&lt;/td&gt;
&lt;td&gt;128&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;1 or 2 or 3&lt;/td&gt;
&lt;td&gt;分别：无绝对测量单位，英寸，厘米。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP PlanarConfiguration&lt;/td&gt;
&lt;td&gt;284&lt;/td&gt;
&lt;td&gt;11C&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;1或2&lt;/td&gt;
&lt;td&gt;像素存储格式：块（Chunky）或面(Planar)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP NewSubfileType&lt;/td&gt;
&lt;td&gt;254&lt;/td&gt;
&lt;td&gt;FE&lt;/td&gt;
&lt;td&gt;LONG&lt;/td&gt;
&lt;td&gt;0或1&lt;/td&gt;
&lt;td&gt;1代表缩微图，否则是0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP SamplesPerPixel&lt;/td&gt;
&lt;td&gt;277&lt;/td&gt;
&lt;td&gt;115&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;每个像素的通道数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP StandardID&lt;/td&gt;
&lt;td&gt;37298&lt;/td&gt;
&lt;td&gt;9216&lt;/td&gt;
&lt;td&gt;BYTE&lt;/td&gt;
&lt;td&gt;1 0 0 0&lt;/td&gt;
&lt;td&gt;4个8位无符号数字&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TIFF/EP要求，IFD0中必须存在下列Field&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP DateTime&lt;/td&gt;
&lt;td&gt;306&lt;/td&gt;
&lt;td&gt;132&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;&lt;code&gt;YYYY:MM:DD HH:MM:SS&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;包含NUL在内，共20字节，文件的上次修改值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP DateTimeOriginal&lt;/td&gt;
&lt;td&gt;36867&lt;/td&gt;
&lt;td&gt;9003&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;&lt;code&gt;YYYY:MM:DD HH:MM:SS&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;包含NUL在内，共20字节，文件创建后不能再修改该值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP Make&lt;/td&gt;
&lt;td&gt;271&lt;/td&gt;
&lt;td&gt;10F&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;创建图像的工具（比如扫描仪）制造商。聚束SEM具体名字，可以为空“”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP Model&lt;/td&gt;
&lt;td&gt;272&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;工具（比如扫描仪）的Model名或数字。聚束SEM型号，可以为空“”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP Software&lt;/td&gt;
&lt;td&gt;305&lt;/td&gt;
&lt;td&gt;131&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;创建图像的软件名字或版本号。聚束SEM控制软件名字，可以为空“”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP ImageDescription&lt;/td&gt;
&lt;td&gt;270&lt;/td&gt;
&lt;td&gt;10E&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;图像的主题，比如"1988 company picnic"，可以为空“”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP Copyright&lt;/td&gt;
&lt;td&gt;33432&lt;/td&gt;
&lt;td&gt;8298&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;版权说明，可以为空“”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;【Tiff扩展】如果使用Tile而不是Strip方式的话，StripOffsets、RowsPreStrip和StripByteCount被相应的Tile字段取代，Strip不是必须的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="_7"&gt;索引图像&lt;/h4&gt;
&lt;p&gt;对于调色板索引图像，和灰度图像相比，PhotometricInterpretation和SamplesPerPixel取值不一样，并多一个ColorMap。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;PhotometricInterpretation&lt;/td&gt;
&lt;td&gt;262&lt;/td&gt;
&lt;td&gt;106&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;使用调色板颜色&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ColorMap&lt;/td&gt;
&lt;td&gt;320&lt;/td&gt;
&lt;td&gt;140&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;对于8为深度图像，这是一个&lt;code&gt;3*(2^8)&lt;/code&gt;的数组，颜色按照R、G、B排列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF/EP SamplesPerPixel&lt;/td&gt;
&lt;td&gt;277&lt;/td&gt;
&lt;td&gt;115&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;每个像素的通道数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="_8"&gt;真彩图像&lt;/h4&gt;
&lt;p&gt;对于真彩色图像，和灰度图像相比，BitsPerSample、SamplesPrePixel和PhotometricInterpretation取值不一样。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;BitsPerSample&lt;/td&gt;
&lt;td&gt;258&lt;/td&gt;
&lt;td&gt;102&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;8，8，8&lt;/td&gt;
&lt;td&gt;每一个通道都是8位深度（Baseline Tiff）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PhotometricInterpretation&lt;/td&gt;
&lt;td&gt;262&lt;/td&gt;
&lt;td&gt;106&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;使用R G B 颜色&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SamplesPerPixel&lt;/td&gt;
&lt;td&gt;277&lt;/td&gt;
&lt;td&gt;115&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;3 or more&lt;/td&gt;
&lt;td&gt;每个像素的通道数，没有额外的采样通道的话，正常是3。TIFF6.0要求&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="tile"&gt;平铺（Tile）&lt;/h4&gt;
&lt;p&gt;在Baseline Tiff 6.0中，图像数据使用Strip方式。如果支持Tiff 6.0扩展的话，图像数据可以使用Strip或Tile方式（在一个图像中，只能二选一）。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 TileWidth&lt;/td&gt;
&lt;td&gt;322&lt;/td&gt;
&lt;td&gt;142&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Title块的宽度，如和ImageWidth不是整数倍关系，后面的数据需要填补(Padding)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 TileLengh&lt;/td&gt;
&lt;td&gt;323&lt;/td&gt;
&lt;td&gt;143&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Tile块的长度，如和ImageLength不是整数倍关系，后面的数据需要填补(Padding)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 TileOffsets&lt;/td&gt;
&lt;td&gt;324&lt;/td&gt;
&lt;td&gt;144&lt;/td&gt;
&lt;td&gt;LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;各个Tile数据在文件中的偏移值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIFF扩展 TileByteCounts&lt;/td&gt;
&lt;td&gt;325&lt;/td&gt;
&lt;td&gt;145&lt;/td&gt;
&lt;td&gt;SHORT or LONG&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;一个Tile中的字节数（压缩后）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TIff6.0要求：TileWidth和TileLength &lt;strong&gt;必须是&lt;/strong&gt;16的整数倍。Tile不一定的正方的，建议 的 TileWidth 与 TileLength 乘积位于 4K~32K。（也就是64x64,256x128,个人感觉有点小，所以不接受它的建议）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Strips模式下，Tiff6.0建议每个strip的大小不超过8K。如果单行超过8K，那么rowsperstrip建议用1.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;了解术语：TilesAcross、TilesDown、TilesPerImage&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;TilesAcross&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImageWidth&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TileWidth&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TileWidth&lt;/span&gt;
&lt;span class="n"&gt;TilesDown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImageLength&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TileLength&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TileLength&lt;/span&gt;
&lt;span class="n"&gt;TilesPerImage&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TilesAcross&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TilesDown&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="thumbnail"&gt;缩微图（Thumbnail）&lt;/h4&gt;
&lt;p&gt;TIFF/EP 引入缩微图支持。通过SubIFDs和NewSubFileType标签，IFD变成树型（tree）结构而不再是链式（chain）结构。&lt;/p&gt;
&lt;p&gt;&lt;img alt="TIFF IFD Tree" src="https://blog.debao.me/images/tools/tiff-ifd-tree.png"&gt;&lt;/p&gt;
&lt;p&gt;对缩微图IFD，TIFF/EP要求：
* NewSubFileType 取值必须是1（DNG除了主缩微图外，允许使用替代的缩微图，取值 10001.H）。
* PhotometricInterpretation 取值仅限于1,2,6
* Compression 取值必须是1
* 缩微图大小不超过宽度和高度(256x256)，必须使用Strip方式&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当主图像采用JPEG压缩或其他压缩格式时，TIFF/EP 要求：必须存在缩微图，且需要在IFD0中。（以便兼容Baseline Reader）&lt;/li&gt;
&lt;li&gt;当主图像数据比较大时，TIFF/EP建议：使用缩微图，且放置在IFD0中。（以便图像快速打开）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="libtiff"&gt;LibTiff 库&lt;/h2&gt;
&lt;p&gt;官网：http://simplesystems.org/libtiff/&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;老的官网： http://www.libtiff.org/ 【被劫持】&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;包含非常老的信息，有些信息是错误的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;老的官网：http://remotesensing.org/libtiff/ 【失去控制】&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;从2003年起作为官网，但2016年维护者失去控制。&lt;/p&gt;
&lt;h3 id="_9"&gt;文件打开&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;TIFFOpen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;TIFFOpenW&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;TIFFdOpen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;TIFFClientOpen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;前三个是第四个的马甲(注：Qt的Tiff插件，直接使用的第四个来对接QIODevice)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;打开模式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;r:读&lt;/li&gt;
&lt;li&gt;w：写&lt;/li&gt;
&lt;li&gt;a：追加&lt;/li&gt;
&lt;li&gt;4：配合w，写传统TIFF&lt;/li&gt;
&lt;li&gt;8：配合w，写BigTIFF&lt;/li&gt;
&lt;li&gt;M：只读时启用内存映射文件&lt;/li&gt;
&lt;li&gt;m：禁用内存映射文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他选项，l、b、L、B、H、C、c 估计我们以后也不会使用的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有这么一个说法，默认写入文件时，先写传统的TIFF头，但是给BigTiff头留出空间，当后期发现文件大于4G时，将头重写为BigTiff头，其他IFD的字段根据状况也进行重写，但是数据位置不动（来自 bigtiff.ofg）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="ifd"&gt;IFD&lt;/h3&gt;
&lt;h4 id="ifd_1"&gt;读IFD&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFReadDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;读文件中的下一个IFD，并将其设为当前IFD&lt;/li&gt;
&lt;li&gt;对于多页的tiff文件，只调用这一个函数就够了。&lt;/li&gt;
&lt;li&gt;‘r’模式调用TIFFOpen()打开文件时，会自动调用该函数。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ifd_2"&gt;写IFD&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFWriteDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFRewriteDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFCheckpointDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;TIFFWriteDirectory() &lt;ul&gt;
&lt;li&gt;写入当前IFD的内容到文件中，同时为创建下一个IFD做好准备【内部调用了TIFFCreateDirectory()】。&lt;/li&gt;
&lt;li&gt;正常写入多页的tiff文件时，只调用这个函数就足够了。&lt;/li&gt;
&lt;li&gt;写模式下如IFD有修改，文件关闭【TIFFClose】或刷新【TIFFFlush】时，会自动调用该函数。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;TIFFReWriteDirectory()&lt;ul&gt;
&lt;li&gt;对于之前已经写入的IFD，将其从chain中断开。&lt;/li&gt;
&lt;li&gt;在文件尾部追加新的IFD，将其加入chian链中（效果上替换了老的IFD，但没有覆盖）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;TIFFCheckpointDirectory()&lt;ul&gt;
&lt;li&gt;将当前IFD内容写入到文件中，但是不释放内存中的数据结构。这样可以持续追加Strip或Tile数据&lt;/li&gt;
&lt;li&gt;当文件完成时，调用TIFFWriteDirectory()完成写入。&lt;/li&gt;
&lt;li&gt;【尽量不要用这个东西】&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ifd_3"&gt;切换IFD&lt;/h4&gt;
&lt;p&gt;设置当前的IFD&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFSetDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tdir_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dirnum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFSetSubDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uint64&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;diroff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;前者使用dirnum【从0开始】，后者使用偏移值【这对subIFD很有用】。&lt;/p&gt;
&lt;p&gt;前者需要从头遍历，也就是后者效率更高。&lt;/p&gt;
&lt;h4 id="ifd_4"&gt;移除IFD&lt;/h4&gt;
&lt;p&gt;将指定的IFD从chain链中移除&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFUnlinkDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uint16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dirn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="tag"&gt;Tag&lt;/h3&gt;
&lt;p&gt;获取或写入Field，通过如下2个函数。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TIFFGetField()&lt;/li&gt;
&lt;li&gt;TIFFSetField()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有些Field有默认值，通过如下成员获取&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TIFFGetFieldDefaulted()&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_10"&gt;注意事项&lt;/h4&gt;
&lt;p&gt;对XResolution 和 YResolution，其类型为Rational，但是set时需要使用一个double，get时需要使用&lt;code&gt;float*&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;需要传入指针类型时，可以传入空指针，这样get内部会分配内存，在文件close时释放。&lt;/p&gt;
&lt;h4 id="tifffield"&gt;TIFFField&lt;/h4&gt;
&lt;p&gt;每一个内置的Tag/Field都有一个这样的结构体。有的Tag可以使用不同的数据类型，每一个数据类型都有这样的一个结构体。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;_TIFFField&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;uint32&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_tag&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="cm"&gt;/* field&amp;#39;s tag */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_readcount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="cm"&gt;/* read count/TIFF_VARIABLE/TIFF_SPP */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_writecount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="cm"&gt;/* write count/TIFF_VARIABLE */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIFFDataType&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="cm"&gt;/* type of associated data */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;uint32&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reserved&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="cm"&gt;/* reserved for future extension */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIFFSetGetFieldType&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;set_field_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="cm"&gt;/* type to be passed to TIFFSetField */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIFFSetGetFieldType&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;get_field_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="cm"&gt;/* type to be passed to TIFFGetField */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="cm"&gt;/* bit in fieldsset bit vector */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_oktochange&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="cm"&gt;/* if true, can change while writing */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_passcount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="cm"&gt;/* if true, pass dir count on set */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="cm"&gt;/* ASCII name */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIFFFieldArray&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_subfields&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="cm"&gt;/* if field points to child ifds, child ifd field definition array */&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注：一些老的资料可能会介绍TIFFFieldInfo，这个Info已经废弃，不建议使用。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;typedef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ttag_t&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;field_tag&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="cm"&gt;/* field&amp;#39;s tag */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;field_readcount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* read count/TIFF_VARIABLE/TIFF_SPP */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;field_writecount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cm"&gt;/* write count/TIFF_VARIABLE */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TIFFDataType&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="cm"&gt;/* type of associated data */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;short&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_bit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="cm"&gt;/* bit in fieldsset bit vector */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_oktochange&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="cm"&gt;/* if true, can change while writing */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;field_passcount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="cm"&gt;/* if true, pass dir count on set */&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;field_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="cm"&gt;/* ASCII name */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFFieldInfo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFMergeFieldInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tif&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFFieldInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uint32&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;；&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="tag_1"&gt;非内置的Tag&lt;/h4&gt;
&lt;p&gt;libTiff遇到位置的tag时，会自动注册这个Tag。可以通过下列函数来读取这些Tag&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFField&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFFindField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uint32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFDataType&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFField&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFFieldWithTag&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uint32&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFField&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TIFFFieldWithName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIFF&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;但是，如果应用程序需要定义自己的Tag来存储TIFF标准之外的信息（读和写）...&lt;/p&gt;
&lt;h3 id="_11"&gt;读写图像数据&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;高层接口：TIFFReadRGBAImage() 或 TIFFRGBAImageGet()&lt;/li&gt;
&lt;li&gt;简单接口：TIFF{Read/Write}Sanline()&lt;ul&gt;
&lt;li&gt;不能用于tile模式&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Strip接口：TIFF{Read/Write}{Encoded/Raw}Strip()&lt;/li&gt;
&lt;li&gt;Tile接口：TIFF{Read/Write}Tile()、TIFF{Read/Write}{Encoded/Raw}Tile()&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;目前只考虑&lt;code&gt;PLANARCONFIG_CONTIG&lt;/code&gt;，只考虑 索引、灰度 图像&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="tile_1"&gt;Tile接口&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;TIFFWriteTile(TIFF* tif, void* buf, uint32 x, uint32 y, uint32 z, uint16 s)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;内部调用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;TIFFWriteEncodedTile(TIFF* tif, uint32 tile, void* data, tmsize_t cc)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="_12"&gt;压缩格式&lt;/h4&gt;
&lt;p&gt;我们关注 1、5、7、8&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#define TIFFTAG_COMPRESSION     259 &lt;/span&gt;&lt;span class="cm"&gt;/* data compression technique */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_NONE        1   &lt;/span&gt;&lt;span class="cm"&gt;/* dump mode */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITTRLE    2   &lt;/span&gt;&lt;span class="cm"&gt;/* CCITT modified Huffman RLE */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITTFAX3   3   &lt;/span&gt;&lt;span class="cm"&gt;/* CCITT Group 3 fax encoding */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITT_T4        3       &lt;/span&gt;&lt;span class="cm"&gt;/* CCITT T.4 (TIFF 6 name) */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITTFAX4   4   &lt;/span&gt;&lt;span class="cm"&gt;/* CCITT Group 4 fax encoding */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITT_T6        4       &lt;/span&gt;&lt;span class="cm"&gt;/* CCITT T.6 (TIFF 6 name) */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_LZW     5       &lt;/span&gt;&lt;span class="cm"&gt;/* Lempel-Ziv  &amp;amp; Welch */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_OJPEG       6   &lt;/span&gt;&lt;span class="cm"&gt;/* !6.0 JPEG */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_JPEG        7   &lt;/span&gt;&lt;span class="cm"&gt;/* %JPEG DCT compression */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_T85         9   &lt;/span&gt;&lt;span class="cm"&gt;/* !TIFF/FX T.85 JBIG compression */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_T43         10  &lt;/span&gt;&lt;span class="cm"&gt;/* !TIFF/FX T.43 colour by layered JBIG compression */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_NEXT        32766   &lt;/span&gt;&lt;span class="cm"&gt;/* NeXT 2-bit RLE */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_CCITTRLEW   32771   &lt;/span&gt;&lt;span class="cm"&gt;/* #1 w/ word alignment */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_PACKBITS    32773   &lt;/span&gt;&lt;span class="cm"&gt;/* Macintosh RLE */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_THUNDERSCAN 32809   &lt;/span&gt;&lt;span class="cm"&gt;/* ThunderScan RLE */&lt;/span&gt;
&lt;span class="cm"&gt;/* codes 32895-32898 are reserved for ANSI IT8 TIFF/IT &amp;lt;dkelly@apago.com) */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_IT8CTPAD    32895   &lt;/span&gt;&lt;span class="cm"&gt;/* IT8 CT w/padding */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_IT8LW       32896   &lt;/span&gt;&lt;span class="cm"&gt;/* IT8 Linework RLE */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_IT8MP       32897   &lt;/span&gt;&lt;span class="cm"&gt;/* IT8 Monochrome picture */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_IT8BL       32898   &lt;/span&gt;&lt;span class="cm"&gt;/* IT8 Binary line art */&lt;/span&gt;
&lt;span class="cm"&gt;/* compression codes 32908-32911 are reserved for Pixar */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_PIXARFILM   32908   &lt;/span&gt;&lt;span class="cm"&gt;/* Pixar companded 10bit LZW */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_PIXARLOG    32909   &lt;/span&gt;&lt;span class="cm"&gt;/* Pixar companded 11bit ZIP */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_DEFLATE     32946   &lt;/span&gt;&lt;span class="cm"&gt;/* Deflate compression */&lt;/span&gt;
&lt;span class="cp"&gt;#define     COMPRESSION_ADOBE_DEFLATE   8       &lt;/span&gt;&lt;span class="cm"&gt;/* Deflate compression,&lt;/span&gt;
&lt;span class="cm"&gt;                           as recognized by Adobe */&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="geotiff"&gt;GeoTiff&lt;/h2&gt;
&lt;p&gt;GeoTiff文件是一个标准的TIFF6.0文件，它使用了一些私有的Tag，对Tag值的含义做了新的规定（格式）。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tag名称&lt;/th&gt;
&lt;th&gt;Dec&lt;/th&gt;
&lt;th&gt;Hex&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ModelPixelScaleTag&lt;/td&gt;
&lt;td&gt;33550&lt;/td&gt;
&lt;td&gt;830E&lt;/td&gt;
&lt;td&gt;DOUBLE&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;3个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;INGR Packet Data Tag&lt;/td&gt;
&lt;td&gt;33918&lt;/td&gt;
&lt;td&gt;847E&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;多个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ModelTiepointTag&lt;/td&gt;
&lt;td&gt;33922&lt;/td&gt;
&lt;td&gt;8482&lt;/td&gt;
&lt;td&gt;DOUBLE&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GeoKeyDirectoryTag&lt;/td&gt;
&lt;td&gt;34735&lt;/td&gt;
&lt;td&gt;87AF&lt;/td&gt;
&lt;td&gt;SHORT&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;4个以上，别名ProjectionInfoTag,CoordSystemInfoTag&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GeoDoubleParamsTag&lt;/td&gt;
&lt;td&gt;34736&lt;/td&gt;
&lt;td&gt;87B1&lt;/td&gt;
&lt;td&gt;DOUBLE&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GeoAsciiParamsTag&lt;/td&gt;
&lt;td&gt;34737&lt;/td&gt;
&lt;td&gt;87B2&lt;/td&gt;
&lt;td&gt;ASCII&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;GeoAsciiParamsTag = &lt;code&gt;first_value|second_value|...|&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：33918~33922 这5个私有Tag是“Intergraph's Private TIFF Tags”，是Aldus（现在的Adobe）授权给Intergraph使用的。但是TIFF任何正式的文档中没有提这个事情。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="bigtiff"&gt;BigTiff&lt;/h2&gt;
&lt;p&gt;Tiff使用32位的偏移值，，文件最大支持到4G。BigTiff是TIFF的一个变体，它使用64位的偏移值。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LibTiff4.0支持 BigTiff。&lt;/li&gt;
&lt;li&gt;Matlab支持 BigTiff。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;链接：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://www.awaresystems.be/imaging/tiff/bigtiff.html&lt;/li&gt;
&lt;li&gt;http://www.bigtiff.org/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_13"&gt;格式&lt;/h3&gt;
&lt;p&gt;如前所述，为了支持大偏移量，bigtiff引入三种新的tag类型&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;16=LONG8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位无符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;17=SLONG8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位有符号数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;18=IFD8&lt;/td&gt;
&lt;td&gt;BigTIFF 64位无符号数，是指向IFD的offset值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="_14"&gt;文件头&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;字节序指示符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;版本（始终是43），不同于TIFF6.0的42&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;必须是8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;必须是0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;Unsigned 8Byte&lt;/td&gt;
&lt;td&gt;指向IFD0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="ifd_5"&gt;IFD&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Unsigned 8Byte&lt;/td&gt;
&lt;td&gt;Tag个数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8+x*20&lt;/td&gt;
&lt;td&gt;Tag 结构&lt;/td&gt;
&lt;td&gt;Tag数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8+(IFD中Tag数)*20&lt;/td&gt;
&lt;td&gt;LONG8&lt;/td&gt;
&lt;td&gt;指向下一个Tag的偏移值，或者0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="tag-field"&gt;TAG Field&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;偏移&lt;/th&gt;
&lt;th&gt;数据类型&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;Tag&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Word&lt;/td&gt;
&lt;td&gt;Tag数据类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Unsigned Long&lt;/td&gt;
&lt;td&gt;个数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;8字节，数据或偏移值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_15"&gt;软件&lt;/h2&gt;
&lt;h3 id="photoshop"&gt;Photoshop&lt;/h3&gt;
&lt;h4 id="pyramin"&gt;Pyramin&lt;/h4&gt;
&lt;p&gt;Photoshop 保存Tiff图像时，有一个“存储图像金字塔（Save Image Pyramin）”选项。勾选该选项，保存出来的图像会包含SUBIFDS。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Photoshop CS6 存储图像金字塔时，其指向的IFD格式和普通的IFD不一样，无法直接解析。是否是Bug??
更老的Photoshop使用过其他的方式，非SUBIFD？？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;LIBTIFF邮件列表： https://www.asmail.be/msg0055058889.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Photoshop实现：IFD0 的SUBIFD中包含一个offset值，指向其第一个子IFD，第一个子IFD的offset指向第二个子IFD，依次类推。（而不是通过SUBIFD一次定义多个子IFD的offset值，libtiff中是这种实现）&lt;/p&gt;
&lt;h4 id="_16"&gt;缩微图&lt;/h4&gt;
&lt;p&gt;存储在私有tag中：Photoshop（34377）&lt;/p&gt;
&lt;p&gt;https://www.awaresystems.be/imaging/tiff/tifftags/docs/photoshopthumbnail.html&lt;/p&gt;
&lt;h3 id="imagemagick"&gt;ImageMagick&lt;/h3&gt;
&lt;p&gt;ImageMagick使用 .ptif 和 .ptiff 作为 Pyramid-encoded TIFF文件的后缀。其内容是普通chain风格的多个页面，每个页面的NewSubFileType都是2。&lt;/p&gt;
&lt;h3 id="qt"&gt;Qt 图像&lt;/h3&gt;
&lt;p&gt;在Qt中， QPixmap 宽和高都不能超过32768，QImage的大小没有限制，字节数&amp;lt;INT最大值即可。QImageReader可以设置setAllocationLimit。&lt;/p&gt;
&lt;h2 id="_17"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/TIFF&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Libtiff&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/TIFF/EP&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Digital_Negative&lt;/li&gt;
&lt;li&gt;https://www.awaresystems.be/imaging/tiff/tifftags.html&lt;/li&gt;
&lt;li&gt;https://stackoverflow.com/questions/11959617/in-a-tiff-create-a-sub-ifd-with-thumbnail-libtiff&lt;/li&gt;
&lt;li&gt;http://www.simplesystems.org/libtiff/libtiff.html&lt;/li&gt;
&lt;li&gt;http://www.simplesystems.org/libtiff/addingtags.html&lt;/li&gt;
&lt;li&gt;https://www.awaresystems.be/imaging/tiff/tifftags/docs/intergraph.html&lt;/li&gt;
&lt;li&gt;http://www.bigtiff.org/&lt;/li&gt;
&lt;li&gt;https://www.awaresystems.be/imaging/tiff/tifftags/docs/photoshopthumbnail.html&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.adobe.com/devnet-apps/photoshop/fileformatashtml"&gt;Adobe Photoshop File Formats Specification&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.asmail.be/msg0055060707.html"&gt;2012.06.06 05:05 "Custom and EXIF directory read/write", by Frank Warmerdam&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;http://maptools-org.996276.n3.nabble.com/Creating-private-IFD-td13645.html&lt;/li&gt;
&lt;li&gt;http://maptools-org.996276.n3.nabble.com/Custom-and-EXIF-directory-read-write-td3290.html&lt;/li&gt;
&lt;li&gt;http://maptools-org.996276.n3.nabble.com/help-writing-thumbnails-to-TIFF-file-td3824.html&lt;/li&gt;
&lt;li&gt;https://gis.stackexchange.com/questions/206509/how-are-geotiff-pyramids-overviews-standardised&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.ques10.com/p/29824/explain-image-file-formats/"&gt;Explain Image File Formats (ques10.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>Pelican的theme小记</title><link href="https://blog.debao.me/2024/12/notes-on-pelican-s-theme/" rel="alternate"></link><published>2024-12-28T22:45:00+08:00</published><updated>2024-12-28T22:45:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-12-28:/2024/12/notes-on-pelican-s-theme/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;接前面 &lt;a href="https://blog.debao.me/2023/11/hello-pelican-again/"&gt;Hello Pelican Again&lt;/a&gt; 与 &lt;a href="https://blog.debao.me/2024/10/a-deeper-dive-into-pelican/"&gt;Pelican继续了解&lt;/a&gt;，当前blog系统已经改的有点面目全非。再简单了解一下 Pelican 的 theme，Pelican模板使用的Jinja2。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;模板结构&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt; 部分用于存放主题的静态资源文件，包括 CSS、图片、JavaScript 等。Pelican …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;接前面 &lt;a href="https://blog.debao.me/2023/11/hello-pelican-again/"&gt;Hello Pelican Again&lt;/a&gt; 与 &lt;a href="https://blog.debao.me/2024/10/a-deeper-dive-into-pelican/"&gt;Pelican继续了解&lt;/a&gt;，当前blog系统已经改的有点面目全非。再简单了解一下 Pelican 的 theme，Pelican模板使用的Jinja2。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;模板结构&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt; 部分用于存放主题的静态资源文件，包括 CSS、图片、JavaScript 等。Pelican 会将此目录中的文件复制到输出目录中，与生成的 HTML 文件一起发布。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;templates&lt;/code&gt; 目录下的Jinja2模板文件用于定义每个页面的布局和内容显示方式。Pelican 会根据内容类型（文章、标签、分类等）选择相应的模板文件来生成 HTML 页面。下面列出的这些模板必须都存在。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;├── static
│   ├── css
│   └── images
└── templates
    ├── archives.html         // to display archives
    ├── article.html          // processed for each article
    ├── author.html  // processed for each author
    ├── authors.html          // must list all the authors
    ├── categories.html       // must list all the categories
    ├── category.html         // processed for each category
    ├── index.html // the index (list all the articles)
    ├── page.html  // processed for each page
    ├── period_archives.html  // to display time-period archives
    ├── tag.html// processed for each tag
    └── tags.html  // must list all the tags. Can be a tag cloud.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_2"&gt;变量&lt;/h2&gt;
&lt;p&gt;Pelican为模板提供的一些常规变量&lt;/p&gt;
&lt;h3 id="_3"&gt;通用变量&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;变量&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;output_file&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前正在生成的文件名。例如，当 Pelican 正在渲染首页时，&lt;code&gt;output_file&lt;/code&gt; 的值为 &lt;code&gt;"index.html"&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;文章列表，按日期降序排列。所有元素都是 &lt;code&gt;Article&lt;/code&gt; 对象，可访问其属性（如标题、摘要、作者等）。有时会被覆盖（例如在标签页面中）。在这种情况下，可以在 &lt;code&gt;all_articles&lt;/code&gt; 变量中找到信息。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;dates&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;相同的文章列表，但按日期升序排列。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hidden_articles&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;隐藏的文章列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;drafts&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;草稿文章列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;period_archives&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;一个字典，包含与时间段归档相关的元素（如果启用）。详见“Listing and Linking to Period Archives”部分的细节。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;authors&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(作者, 文章) 元组的列表，包含所有作者及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;categories&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(分类, 文章) 元组的列表，包含所有分类及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(标签, 文章) 元组的列表，包含所有标签及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hidden_pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;隐藏的页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;draft_pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;草稿页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;另外，在配置文件 pelicanconf.py 中，可以自由定义变量（注意不要和pelian内置变量冲突），这些自定义变量，在jinja2模板中也可以直接用。&lt;/p&gt;
&lt;p&gt;每个页面有自己额外支持的变量&lt;/p&gt;
&lt;h3 id="indexhtml"&gt;index.html&lt;/h3&gt;
&lt;p&gt;主页，也支持分页（pagination），主要的变量：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;变量&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles_paginator&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;文章列表的分页器对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles_page&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前页的文章&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles_previous_page&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;文章的上一页（如果页面不存在则为 &lt;code&gt;None&lt;/code&gt;）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles_next_page&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;文章的下一页（如果页面不存在则为 &lt;code&gt;None&lt;/code&gt;）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;分页机制：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pagination&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;articles_page.has_next&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;prev&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;SITEURL&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;articles_next_page.url&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;larr;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Older&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;articles_page.has_previous&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;next&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;SITEURL&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;articles_previous_page.url&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Newer&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;rarr;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;br&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;文章列表&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;    &lt;/span&gt;{%&lt;span class="w"&gt; &lt;/span&gt;for&lt;span class="w"&gt; &lt;/span&gt;article&lt;span class="w"&gt; &lt;/span&gt;in&lt;span class="w"&gt; &lt;/span&gt;articles_page.object_list&lt;span class="w"&gt; &lt;/span&gt;%}
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;article&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;{%&lt;span class="w"&gt; &lt;/span&gt;include&lt;span class="w"&gt; &lt;/span&gt;&amp;#39;_includes/article.html&amp;#39;&lt;span class="w"&gt; &lt;/span&gt;%}
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/article&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;{%&lt;span class="w"&gt; &lt;/span&gt;endfor&lt;span class="w"&gt; &lt;/span&gt;%}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="articlehtml"&gt;article.html&lt;/h3&gt;
&lt;p&gt;单篇文章页面&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;变量&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;article&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前显示的文章对应的article对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;category&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前文章所属类别 名称&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;变量 article 的成员主要来自头部的meta data：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Pelican的theme小记&lt;/span&gt;
&lt;span class="nt"&gt;date&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;2024-12-28 22:45&lt;/span&gt;
&lt;span class="nt"&gt;slug&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;notes-on-pelican-s-theme&lt;/span&gt;
&lt;span class="nt"&gt;category&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Tools&lt;/span&gt;
&lt;span class="nt"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;pelican&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;span class="nt"&gt;status&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;published&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可以自行定义新的字段，只要不和pelican预留字段冲突即可：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;预留字段&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;title&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;标题（Article 或 Page)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;date&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;发布日期， (&lt;code&gt;YYYY-MM-DD HH:SS&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;modified&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;修改日期 (&lt;code&gt;YYYY-MM-DD HH:SS&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;逗号分隔&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;keywords&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;逗号分隔 (HTML content only)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;category&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;每个article只能指定一个类别&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;slug&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ID，当title有中文时，最好指定它（不然url中会用拼音）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;author&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;authors&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者们&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;summary&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Brief description of content for index pages&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;lang&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;语言 (&lt;code&gt;en&lt;/code&gt;, &lt;code&gt;fr&lt;/code&gt;, etc.)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;translation&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前article是否是另一个的翻译 (&lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;status&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;状态:&lt;code&gt;draft&lt;/code&gt;, &lt;code&gt;hidden&lt;/code&gt;, or &lt;code&gt;published&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;template&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Name of template to use to generate content (without extension)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;save_as&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Save content to this relative file path&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;url&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;URL to use for this article/page&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;模板中使用：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;entry-content&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;article.summary&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;article.summary&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nv"&gt;article.content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;footer&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;rel=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;full-article&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;SITEURL&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;article.url&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Read&lt;span class="w"&gt; &lt;/span&gt;On&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;crarr;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/footer&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;entry-content&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;article.content&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/4.10.2/themes.html&lt;/li&gt;
&lt;li&gt;https://github.com/getpelican/pelican/tree/main/pelican/themes/simple/templates&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="pelican"></category></entry><entry><title>Windows下WSL小记</title><link href="https://blog.debao.me/2024/12/notes-on-wsl-for-windows/" rel="alternate"></link><published>2024-12-27T20:01:00+08:00</published><updated>2024-12-27T20:01:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-12-27:/2024/12/notes-on-wsl-for-windows/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;稍微梳理一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl"&gt;WSL 是什么&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl1"&gt;WSL1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#wsl2"&gt;WSL2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;文件系统&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#linux"&gt;Linux的文件系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#linuxwindows"&gt;Linux下访问Windows文件系统&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;挂载？&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowslinux"&gt;Windows访问Linux文件系统&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#wslexe"&gt;wsl.exe&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl_1"&gt;启动和运行 WSL 实例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#wsl_2"&gt;管理 WSL 发行版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;帮助及其他&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#wslconf"&gt;wsl.conf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vscode-wsl"&gt;VSCode 与 WSL&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_4"&gt;如何工 …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;稍微梳理一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl"&gt;WSL 是什么&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl1"&gt;WSL1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#wsl2"&gt;WSL2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;文件系统&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#linux"&gt;Linux的文件系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#linuxwindows"&gt;Linux下访问Windows文件系统&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;挂载？&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowslinux"&gt;Windows访问Linux文件系统&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#wslexe"&gt;wsl.exe&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#wsl_1"&gt;启动和运行 WSL 实例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#wsl_2"&gt;管理 WSL 发行版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;帮助及其他&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#wslconf"&gt;wsl.conf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vscode-wsl"&gt;VSCode 与 WSL&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_4"&gt;如何工作的？&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#wslg"&gt;WSLg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="wsl"&gt;WSL 是什么&lt;/h2&gt;
&lt;p&gt;WSL，全称为Windows Subsystem for Linux，是微软在Windows操作系统中引入的一项功能，旨在使用户能够在Windows上原生运行Linux的命令行工具和应用程序。&lt;/p&gt;
&lt;h3 id="wsl1"&gt;WSL1&lt;/h3&gt;
&lt;p&gt;2016年，WSL的第一个版本在 Windows 10 周年更新中推出。它允许用户在 Windows 上运行 Linux 程序，而无需使用虚拟机或双系统。&lt;/p&gt;
&lt;p&gt;WSL1 通过一个抽象层翻译 Linux 的系统调用（syscall），将其映射到 Windows 系统调用。本质上是一个兼容层，而非完整的 Linux 内核。&lt;/p&gt;
&lt;p&gt;只支持Ubuntu，也叫过 “Bash on Ubuntu on Windows” 或 “Bash on Windows”。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;由于没有原生 Linux 内核支持，某些复杂的系统调用和应用程序（例如 Docker）无法运行。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="wsl2"&gt;WSL2&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;2019年，微软在Build 开发者大会上正式宣布 WSL2。WSL2 引入了完整的 Linux 内核，运行在 Hyper-V 虚拟机中。&lt;/li&gt;
&lt;li&gt;2020年，Docker Desktop 开始支持 WSL2。&lt;/li&gt;
&lt;li&gt;2021年，微软为 WSL 引入了 WSLg，使用户可以运行 Linux 桌面应用和 GUI 程序。同时，提供 GPU 支持（GPU Compute），专注于硬件加速。&lt;/li&gt;
&lt;li&gt;2022年，WSL 从 Windows 功能中独立出来，通过 Microsoft Store 提供更快的更新频率。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;文件系统&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;2024马上要结束了。只考虑 WSL2 下面的 Ubuntu24.04 情况&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;而Windows和Linux的目录结构则通过挂载机制和特定路径关系实现互通。&lt;/p&gt;
&lt;h3 id="linux"&gt;Linux的文件系统&lt;/h3&gt;
&lt;p&gt;WSL2的Linux文件系统是运行在虚拟化的Linux内核上的，与Windows的文件系统是分开的。这个文件系统通常存储在Windows文件系统中的一个虚拟磁盘文件（VHDX格式）。&lt;/p&gt;
&lt;p&gt;每个WSL2发行版的文件系统存储在Windows文件系统中的一个特定位置，通常路径类似：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;C:\Users\&amp;lt;Username&amp;gt;\AppData\Local\Packages\&amp;lt;LinuxDistro&amp;gt;\LocalState\ext4.vhdx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意，其中 &lt;code&gt;&amp;lt;LinuxDistro&amp;gt;&lt;/code&gt; 长这个样子：&lt;code&gt;CanonicalGroupLimited.Ubuntu_79rhkp1fndgab&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;借助后面的 wsl.exe，可以将Linux文件系统移动到其他盘符下面。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="linuxwindows"&gt;Linux下访问Windows文件系统&lt;/h3&gt;
&lt;p&gt;WSL2允许通过挂载访问Windows文件系统中的文件。可以在Linux环境下访问Windows的目录，Windows系统的文件会通过挂载点提供给WSL2。具体路径如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows的C盘通常被挂载到WSL2的 /mnt/c/ 目录下。&lt;ul&gt;
&lt;li&gt;例如，Windows中的 &lt;code&gt;C:\Users\&amp;lt;Username&amp;gt;&lt;/code&gt; 在WSL2中对应 &lt;code&gt;/mnt/c/Users/&amp;lt;Username&amp;gt;&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;其他Windows盘符（如D盘、E盘等）通过 &lt;code&gt;/mnt/d/&lt;/code&gt;、&lt;code&gt;/mnt/e/&lt;/code&gt; 等方式提供访问。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_2"&gt;挂载？&lt;/h4&gt;
&lt;p&gt;在Linux下，WSL2的文件系统（如 /mnt/c）是通过Windows的虚拟化层挂载的。
WSL2本身没有一个传统的“挂载配置文件”&lt;/p&gt;
&lt;p&gt;可以通过 &lt;code&gt;mount&lt;/code&gt; 命令查看：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;mount&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;grep&lt;span class="w"&gt; &lt;/span&gt;/mnt/c
C:&lt;span class="se"&gt;\ &lt;/span&gt;on&lt;span class="w"&gt; &lt;/span&gt;/mnt/c&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;9p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;rw,noatime,dirsync,aname&lt;span class="o"&gt;=&lt;/span&gt;drvfs&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;C:&lt;span class="se"&gt;\;&lt;/span&gt;&lt;span class="nv"&gt;uid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;gid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;symlinkroot&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/mnt/,mmap,access&lt;span class="o"&gt;=&lt;/span&gt;client,msize&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;65536&lt;/span&gt;,trans&lt;span class="o"&gt;=&lt;/span&gt;fd,rfd&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;,wfd&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过 &lt;code&gt;/etc/fstab&lt;/code&gt; 看不出东西：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;/etc/fstab
&lt;span class="c1"&gt;# UNCONFIGURED FSTAB FOR BASE SYSTEM&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;如果要修改加载行为，需要使用 &lt;code&gt;/etc/wsl.conf&lt;/code&gt; 文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="windowslinux"&gt;Windows访问Linux文件系统&lt;/h3&gt;
&lt;p&gt;你可以通过Windows资源管理器访问WSL2中的文件。路径是：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;\\wsl$\&amp;lt;DistroName&amp;gt;\
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;例如对于Ubuntu来说，路径是：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;\\wsl$\Ubuntu\
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="wslexe"&gt;wsl.exe&lt;/h2&gt;
&lt;p&gt;wsl.exe 是 Windows Subsystem for Linux (WSL) 的命令行工具，用于在
Windows 上管理和与 WSL 实例交互。&lt;/p&gt;
&lt;p&gt;一些常见功能：&lt;/p&gt;
&lt;h3 id="wsl_1"&gt;启动和运行 WSL 实例&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;启动默认 WSL 实例：&lt;code&gt;wsl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;启动指定的发行版：&lt;code&gt;wsl -d &amp;lt;DistroName&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止所有 WSL 实例：&lt;code&gt;wsl --shutdown&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止指定实例：&lt;code&gt;wsl --terminate &amp;lt;DistroName&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="wsl_2"&gt;管理 WSL 发行版&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装发行版：&lt;code&gt;wsl --install -d &amp;lt;DistroName&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;列出已安装的发行版：&lt;code&gt;wsl --list --verbose&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;设置默认发行版：&lt;code&gt;wsl --setdefault &amp;lt;DistroName&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;切换 WSL 版本：&lt;code&gt;wsl --set-version &amp;lt;DistroName&amp;gt; &amp;lt;Version&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;导出发行版：&lt;code&gt;wsl --export &amp;lt;DistroName&amp;gt; &amp;lt;FilePath&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;导入发行版：&lt;code&gt;wsl --import &amp;lt;DistroName&amp;gt; &amp;lt;InstallLocation&amp;gt; &amp;lt;FilePath&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_3"&gt;帮助及其他&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;运行Linux下的命令：&lt;code&gt;wsl &amp;lt;command&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看命令帮助：&lt;code&gt;wsl --help&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="wslconf"&gt;wsl.conf&lt;/h2&gt;
&lt;p&gt;配置文件 wsl.conf 位于每个Linux的 /etc/ 目录下，路径为 &lt;code&gt;/etc/wsl.conf&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;wsl.conf 文件使用 INI 文件格式（键值对和段落格式），例如，默认情况下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[boot]&lt;/span&gt;
&lt;span class="na"&gt;systemd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过它可以控制自动挂载、网络设置、默认用户等关键功能。配置后：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Automatically mount Windows drive when the distribution is launched&lt;/span&gt;
&lt;span class="k"&gt;[automount]&lt;/span&gt;

&lt;span class="c1"&gt;# Set to true will automount fixed drives (C:/ or D:/) with DrvFs under the root directory set above. Set to false means drives won&amp;#39;t be mounted automatically, but need to be mounted manually or with fstab.&lt;/span&gt;
&lt;span class="na"&gt;enabled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;

&lt;span class="c1"&gt;# Sets the directory where fixed drives will be automatically mounted. This example changes the mount location, so your C-drive would be /c, rather than the default /mnt/c. &lt;/span&gt;
&lt;span class="na"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;

&lt;span class="c1"&gt;# DrvFs-specific options can be specified.  &lt;/span&gt;
&lt;span class="na"&gt;options&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;metadata,uid=1003,gid=1003,umask=077,fmask=11,case=off&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Sets the `/etc/fstab` file to be processed when a WSL distribution is launched.&lt;/span&gt;
&lt;span class="na"&gt;mountFsTab&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;

&lt;span class="c1"&gt;# Network host settings that enable the DNS server used by WSL 2. This example changes the hostname, sets generateHosts to false, preventing WSL from the default behavior of auto-generating /etc/hosts, and sets generateResolvConf to false, preventing WSL from auto-generating /etc/resolv.conf, so that you can create your own (ie. nameserver 1.1.1.1).&lt;/span&gt;
&lt;span class="k"&gt;[network]&lt;/span&gt;
&lt;span class="na"&gt;hostname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;DemoHost&lt;/span&gt;
&lt;span class="na"&gt;generateHosts&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="na"&gt;generateResolvConf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;false&lt;/span&gt;

&lt;span class="c1"&gt;# Set whether WSL supports interop processes like launching Windows apps and adding path variables. Setting these to false will block the launch of Windows processes and block adding $PATH environment variables.&lt;/span&gt;
&lt;span class="k"&gt;[interop]&lt;/span&gt;
&lt;span class="na"&gt;enabled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="na"&gt;appendWindowsPath&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;false&lt;/span&gt;

&lt;span class="c1"&gt;# Set the user when launching a distribution with WSL.&lt;/span&gt;
&lt;span class="k"&gt;[user]&lt;/span&gt;
&lt;span class="na"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;DemoUser&lt;/span&gt;

&lt;span class="c1"&gt;# Set a command to run when a new WSL instance launches. This example starts the Docker container service.&lt;/span&gt;
&lt;span class="k"&gt;[boot]&lt;/span&gt;
&lt;span class="na"&gt;command&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;service docker start&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="vscode-wsl"&gt;VSCode 与 WSL&lt;/h2&gt;
&lt;p&gt;VSCode下面由WSL扩展，安装后，可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在Linux下，直接输入 code&lt;/li&gt;
&lt;li&gt;或，在Windows下，直接输入 wsl code&lt;/li&gt;
&lt;li&gt;或，在打开的VSCode中，Ctrl+Shift+P，中，&lt;code&gt;WSL: Connect to WSL in New Window&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后就可以使用Linux下的g++ 或 Python 等工具链了。&lt;/p&gt;
&lt;h3 id="_4"&gt;如何工作的？&lt;/h3&gt;
&lt;p&gt;当在 WSL 下的Linux中运行 code 时，实际执行的是 Windows 上的 code.exe，验证一下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;which&lt;span class="w"&gt; &lt;/span&gt;code
/mnt/c/Users/dbzha/AppData/Local/Programs/Microsoft&lt;span class="w"&gt; &lt;/span&gt;VS&lt;span class="w"&gt; &lt;/span&gt;Code/bin/code
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这是一个bash的脚本文件，它里面会调用真正的 code.exe 程序。&lt;/p&gt;
&lt;p&gt;是的，WSL下的Linux中可以启动exe，比如notepad.exe 或 calc.exe。这是通过 Windows 提供的 Interop（互操作性） 功能实现的。&lt;/p&gt;
&lt;h2 id="wslg"&gt;WSLg&lt;/h2&gt;
&lt;p&gt;WSLg（Windows Subsystem for Linux GUI）是 Windows Subsystem for Linux (WSL) 的一个扩展功能，允许你在 Windows 10 或 Windows 11 上运行 Linux 图形用户界面（GUI）应用程序，并且与 Windows 上的应用程序无缝集成。&lt;/p&gt;
&lt;p&gt;WSLg 使得我们能够在 Windows 中直接运行 Linux 图形应用程序，比如 GIMP、Firefox、KDE、X11 应用等，而不需要额外的虚拟机或复杂的配置。&lt;/p&gt;
&lt;p&gt;&lt;img alt="gvim" src="https://blog.debao.me/images/tools/wsl_gvim.png"&gt;&lt;/p&gt;
&lt;p&gt;WSLg 目前主要优化的是 运行单一应用程序 的图形界面，而不是提供完整的桌面环境。&lt;/p&gt;
&lt;h2 id="_5"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/windows/wsl/&lt;/li&gt;
&lt;li&gt;https://ubuntu.com/desktop/wsl&lt;/li&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/windows/wsl/wsl-config&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>静电吸盘E-Chuck小记</title><link href="https://blog.debao.me/2024/12/notes-on-electrostatic-chuck/" rel="alternate"></link><published>2024-12-13T19:13:00+08:00</published><updated>2024-12-13T19:13:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-12-13:/2024/12/notes-on-electrostatic-chuck/</id><summary type="html">&lt;p&gt;静电吸盘/静电夹具（electrostatic chuck，E-Chuck，ESC）是一种利用人为地产生静电力来夹持、固定和拾取工件（workpiece）的夹具。&lt;/p&gt;
&lt;p&gt;&lt;img alt="echuck" src="https://blog.debao.me/images/sem/struct_echuck_ct.png"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：&lt;a href="https://creative-technology.co.jp/esc-e/"&gt;creative-technology&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;与机械夹具相 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;静电吸盘/静电夹具（electrostatic chuck，E-Chuck，ESC）是一种利用人为地产生静电力来夹持、固定和拾取工件（workpiece）的夹具。&lt;/p&gt;
&lt;p&gt;&lt;img alt="echuck" src="https://blog.debao.me/images/sem/struct_echuck_ct.png"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：&lt;a href="https://creative-technology.co.jp/esc-e/"&gt;creative-technology&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;与机械夹具相比，它有如下特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;非机械夹持：通过静电力固定物体，避免了传统夹具的物理压力，保护精密材料并节省空间。&lt;/li&gt;
&lt;li&gt;均匀夹持力：提供一致的夹持力，确保物体稳定并保持平整，优于真空夹具。&lt;/li&gt;
&lt;li&gt;温度控制：通过电力调节基板温度，确保最佳加工条件，减少热应力。&lt;/li&gt;
&lt;li&gt;多功能性：适用于各种材料、形状和尺寸，提供灵活的夹持解决方案。&lt;/li&gt;
&lt;li&gt;减少粒子污染：避免物理接触，降低洁净室中的粒子污染风险，关键于半导体制造。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;结构&lt;/h2&gt;
&lt;p&gt;&lt;img alt="struct" src="https://blog.debao.me/images/sem/struct_echuck.png"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：&lt;a href="https://www.shinko.co.jp/english/product/equipment/esc.php"&gt;shinko&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ceramic Disk（陶瓷盘）：晶圆直接与之接触并被吸附&lt;/li&gt;
&lt;li&gt;Electrode（电极）：施加电压产生电场，从而使物体吸附在盘上。&lt;/li&gt;
&lt;li&gt;Heater（加热器）：用于控制静电吸盘的温度&lt;/li&gt;
&lt;li&gt;Baseplate（底板）：提供结构支撑&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;类型&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;库仑型&lt;/strong&gt; (Coulombic)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;约翰森-拉布克型&lt;/strong&gt; (Johnsen-Rahbek)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;工作原理&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;基于库仑定律，电荷间的吸引力；施加直流电压，诱发物体表面相反电荷。&lt;/td&gt;
&lt;td&gt;使用交流电压在电介质表面产生高导电状态，依靠电流流动夹持物体。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;电源&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;直流&lt;/td&gt;
&lt;td&gt;交流&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;介电层&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;绝缘材料&lt;/td&gt;
&lt;td&gt;具有导电性&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;接触要求&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;不依赖物理接触，电场作用即可。&lt;/td&gt;
&lt;td&gt;需要物体表面与电介质有接触，表面不平整时可能无法有效夹持。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;夹持力&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;夹持力较为均匀，适合精确夹持。&lt;/td&gt;
&lt;td&gt;在接触区域产生较强的夹持力，但如果接触不良，夹持力较弱。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_3"&gt;加热/水冷&lt;/h3&gt;
&lt;p&gt;保持温度均一性很重要&lt;/p&gt;
&lt;p&gt;&lt;img alt="header" src="https://blog.debao.me/images/sem/struct_of_echuck_with_heater.png"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：&lt;a href="https://upt-co.com/en/product-technology/metal-foil-heaters-for-electrostatic-chucks/"&gt;upt-co&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="dechuck"&gt;Dechuck&lt;/h3&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;h3 id="ceramics"&gt;陶瓷（Ceramics）&lt;/h3&gt;
&lt;p&gt;一般用到氧化铝或氮化铝陶瓷。什么是陶瓷？先看一下材料分类：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;材料类型&lt;/strong&gt; (Material Type)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;主要特点&lt;/strong&gt; (Key Characteristics)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;典型材料&lt;/strong&gt; (Typical Materials)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;金属材料&lt;/strong&gt; (Metals)&lt;/td&gt;
&lt;td&gt;- 导电性和导热性好&lt;br&gt;- 延展性强&lt;br&gt;- 高强度&lt;/td&gt;
&lt;td&gt;铁 (Iron), 铜 (Copper), 铝 (Aluminum), 钢 (Steel)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;陶瓷材料&lt;/strong&gt; (Ceramics)&lt;/td&gt;
&lt;td&gt;- 高硬度、耐高温&lt;br&gt;- 良好的耐腐蚀性&lt;br&gt;- 脆性较大&lt;/td&gt;
&lt;td&gt;氧化铝 (Aluminum Oxide), 氮化硅 (Silicon Nitride), 陶瓷 (Ceramics)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;聚合物材料&lt;/strong&gt; (Polymers)&lt;/td&gt;
&lt;td&gt;- 轻质&lt;br&gt;- 柔韧性强&lt;br&gt;- 良好的耐化学腐蚀性&lt;br&gt;- 可塑性强&lt;/td&gt;
&lt;td&gt;塑料 (Plastic), 橡胶 (Rubber), 纤维 (Fibers), 尼龙 (Nylon)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;复合材料&lt;/strong&gt; (Composites)&lt;/td&gt;
&lt;td&gt;- 轻质高强&lt;br&gt;- 耐腐蚀、耐高温&lt;br&gt;- 设计灵活、性能可定制&lt;/td&gt;
&lt;td&gt;玻璃钢 (Fiberglass), 碳纤维复合材料 (Carbon Fiber Composites), 木材复合材料 (Wood Composites)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;半导体材料&lt;/strong&gt; (Semiconductors)&lt;/td&gt;
&lt;td&gt;- 可控电导性&lt;br&gt;- 对外界环境敏感&lt;/td&gt;
&lt;td&gt;硅 (Silicon), 锗 (Germanium), 氮化镓 (Gallium Nitride)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;“Ceramics” 这个词来源于希腊语“keramos”，意思是“陶土”或“粘土”。它指的是通过高温烧制的无机非金属材料，通常由粘土、石英、长石和其他天然矿物质组成。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://www.shinko.co.jp/english/product/equipment/esc.php&lt;/li&gt;
&lt;li&gt;https://creative-technology.co.jp/esc-e/&lt;/li&gt;
&lt;li&gt;https://creative-technology.co.jp/esc-e/genri-e/&lt;/li&gt;
&lt;li&gt;https://www.electrogrip.com/egrip2023/support/assets/Principles7_3faq.pdf&lt;/li&gt;
&lt;li&gt;https://www.spellmanhv.com/en/high-voltage-power-supplies/Industries/Applications/E-Chuck&lt;/li&gt;
&lt;li&gt;https://www.advancedenergy.com/en-us/products/high-voltage-power-supplies/e-chuck/&lt;/li&gt;
&lt;li&gt;https://www.matsusada.com/application/ps/electrostatic_chuck/&lt;/li&gt;
&lt;li&gt;https://patents.google.com/patent/CN102160167B/zh&lt;/li&gt;
&lt;li&gt;https://www.jstage.jst.go.jp/article/pfr/3/0/3_0_051/_pdf&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="SEM"></category></entry><entry><title>一些绘图相关的工具与网站链接</title><link href="https://blog.debao.me/2024/11/some-charts-related-tool-software-and-website-links/" rel="alternate"></link><published>2024-11-08T10:36:00+08:00</published><updated>2024-11-08T10:36:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-11-08:/2024/11/some-charts-related-tool-software-and-website-links/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;除了Python家族的各种东西，记录一些的开源/开放的绘图或可视化工具&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;在线工具&lt;/h2&gt;
&lt;h3 id="materials-project"&gt;Materials Project&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://next-gen.materialsproject.org&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在线数据库，提供了数十万种材料的晶体结构 …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;除了Python家族的各种东西，记录一些的开源/开放的绘图或可视化工具&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;在线工具&lt;/h2&gt;
&lt;h3 id="materials-project"&gt;Materials Project&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://next-gen.materialsproject.org&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在线数据库，提供了数十万种材料的晶体结构数据和计算属性。&lt;/p&gt;
&lt;p&gt;&lt;img alt="materialsproject" src="https://blog.debao.me/images/science/materialsproject-sic.png"&gt;&lt;/p&gt;
&lt;h3 id="drawio"&gt;drawio&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://app.diagrams.net/"&gt;https://app.diagrams.net/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/jgraph/drawio&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;draw.io（diagrams.net）是一款免费且开源的在线图形绘制工具，
常用于创建各种图表和流程图。它适用于从简单的流程图到复杂的网络架构图等用途。&lt;/p&gt;
&lt;h3 id="geogebra"&gt;Geogebra&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.geogebra.org/calculator"&gt;https://www.geogebra.org/calculator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/geogebra/geogebra&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="geogebra" src="https://blog.debao.me/images/geogebra-example1.png"&gt;&lt;/p&gt;
&lt;p&gt;“GeoGebra” 的发音通常是 /ˌdʒiːoʊˈdʒɛbrə/，是几何（geometry）与代数（algebra)的结合。&lt;/p&gt;
&lt;p&gt;是一个交互式的几何、代数、统计、计算程序，适合做一些简单的2D或3D绘图或运算。&lt;/p&gt;
&lt;h2 id="_2"&gt;离线软件&lt;/h2&gt;
&lt;h3 id="_3"&gt;开源，免费&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Maxima：&lt;a href="https://maxima.sourceforge.io/"&gt;https://maxima.sourceforge.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GNU Octave ：&lt;a href="https://octave.org/"&gt;https://octave.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;gnuplot：&lt;a href="http://www.gnuplot.info/"&gt;http://www.gnuplot.info/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;SciDAVis：&lt;a href="https://scidavis.sourceforge.net/"&gt;https://scidavis.sourceforge.net/&lt;/a&gt;，基于QtiPlot&lt;/li&gt;
&lt;li&gt;labplot：&lt;a href="https://labplot.kde.org/"&gt;https://labplot.kde.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;dia：&lt;a href="http://dia-installer.de/"&gt;http://dia-installer.de/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Veusz：&lt;a href="https://veusz.github.io/"&gt;https://veusz.github.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Avogadro：&lt;a href="https://avogadro.cc"&gt;https://avogadro.cc&lt;/a&gt; 分子结构编辑于可视化&lt;/li&gt;
&lt;li&gt;jmol：&lt;a href="https://jmol.sourceforge.net/"&gt;https://jmol.sourceforge.net/&lt;/a&gt; viewer for chemical structures in 3D&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_4"&gt;不开源，（非商业用途）免费&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;VESTA：&lt;a href="https://jp-minerals.org/vesta/en/"&gt;https://jp-minerals.org/vesta/en/&lt;/a&gt;，&lt;strong&gt;V&lt;/strong&gt;isualization for &lt;strong&gt;E&lt;/strong&gt;lectronic and &lt;strong&gt;ST&lt;/strong&gt;ructural &lt;strong&gt;A&lt;/strong&gt;nalysis&lt;/li&gt;
&lt;li&gt;vmd：&lt;a href="https://www.ks.uiuc.edu/Research/vmd/"&gt;https://www.ks.uiuc.edu/Research/vmd/&lt;/a&gt;，&lt;strong&gt;V&lt;/strong&gt;isual &lt;strong&gt;M&lt;/strong&gt;olecular &lt;strong&gt;D&lt;/strong&gt;ynamics&lt;/li&gt;
&lt;li&gt;Free Mercury：&lt;a href="https://www.ccdc.cam.ac.uk/solutions/software/free-mercury/"&gt;https://www.ccdc.cam.ac.uk/solutions/software/free-mercury/&lt;/a&gt;，Crystal Structure Visualization&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>Pandoc与LaTeX小记</title><link href="https://blog.debao.me/2024/10/notes-on-pandoc-and-latex/" rel="alternate"></link><published>2024-10-29T22:25:00+08:00</published><updated>2024-10-29T22:25:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-10-29:/2024/10/notes-on-pandoc-and-latex/</id><summary type="html">&lt;p&gt;Markdown和LaTeX都是老朋友了。本文试图通过简单例子，将markdown文件通过latex输出一本书，以此来熟悉一下pandoc&lt;/p&gt;
&lt;p&gt;&lt;img alt="pandoc book" src="https://blog.debao.me/images/pandoc-examples-book.png"&gt;&lt;/p&gt;
&lt;h2 id="pandoc"&gt;关于Pandoc&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;功能太多，本文只关心其从 Markdown 到 LaTeX 的转换功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Pandoc 是一个广泛使 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;Markdown和LaTeX都是老朋友了。本文试图通过简单例子，将markdown文件通过latex输出一本书，以此来熟悉一下pandoc&lt;/p&gt;
&lt;p&gt;&lt;img alt="pandoc book" src="https://blog.debao.me/images/pandoc-examples-book.png"&gt;&lt;/p&gt;
&lt;h2 id="pandoc"&gt;关于Pandoc&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;功能太多，本文只关心其从 Markdown 到 LaTeX 的转换功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Pandoc 是一个广泛使用的&lt;strong&gt;文档转换工具&lt;/strong&gt;，它可以在不同的标记语言和文档格式之间进行转换。Pandoc 由加州大学伯克利分校的哲学教授 John MacFarlane 开发。&lt;/li&gt;
&lt;li&gt;Pandoc 的第一个版本发布于 2006 年，最初的重点是从 Markdown 转换为 LaTeX、HTML 和 DocBook。&lt;/li&gt;
&lt;li&gt;Pandoc 的设计理念是为每种输入格式解析器构建一个抽象语法树（AST），然后通过这个 AST 生成目标格式。通过这种方式，Pandoc 可以支持任意多的输入和输出格式。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;命令行&lt;/h2&gt;
&lt;p&gt;通过例子来走马观花看一看，如何从一个包含中文的markdown文件，转换成latex，进而到pdf。&lt;/p&gt;
&lt;h3 id="1"&gt;例子1&lt;/h3&gt;
&lt;p&gt;将 hello.md 转换成 hello.tex，可执行如下命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;-f&lt;span class="w"&gt; &lt;/span&gt;markdown&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;latex&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-f&lt;/code&gt;，&lt;code&gt;--from&lt;/code&gt;：输入文件格式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;，&lt;code&gt;--to&lt;/code&gt;：输出文件格式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o&lt;/code&gt;，&lt;code&gt;--output&lt;/code&gt;：输出文件名&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其实pandoc可以根据后缀直接猜测格式，所以，上面命令可以写作：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：pandoc支持令人头大的 &lt;strong&gt;各种风格&lt;/strong&gt; 的 markdown 格式！！！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;markdown&lt;/strong&gt;：Pandoc风格的Markdown&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;markdown_mmd&lt;/strong&gt;：MultiMarkdown&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;markdown_phpextra&lt;/strong&gt;：PHP Markdown Extra&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;markdown_strict&lt;/strong&gt;：原始的Markdown&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gfm&lt;/strong&gt;：Github风格的Markdown&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;输入文件hello.md内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;# Hello 1+1=2&lt;/span&gt;

我是测试文本。

我是公式：

$$
E=mc^2
$$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;输出文件hello.tex内容如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;\section{Hello 1+1=2}\label{hello-112}

我是测试文本。

我是公式：

\[
E=mc^2
\]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;操作成功了，尽管输出只是tex片段。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="2"&gt;例子2&lt;/h3&gt;
&lt;p&gt;如果要生成完整的tex文件，我们需要命令行参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-s&lt;/code&gt;，&lt;code&gt;--standalone&lt;/code&gt;：生成文件头和尾（完整的tex或html等文件）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样一来，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;此时 tex文件就完整了。可以调用latex来生成pdf文件了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;尽管可以生成pdf，但是因为中文的问题，如上命令生成的pdf和我们期望的并不一样，丢失了中文字体。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;编译之前，我们需要手动将.tex的文档类从&lt;code&gt;article&lt;/code&gt;改为&lt;code&gt;ctexart&lt;/code&gt;才行。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;%\documentclass[]{article}&lt;/span&gt;
&lt;span class="k"&gt;\documentclass&lt;/span&gt;&lt;span class="na"&gt;[]&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;ctexart&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="3"&gt;例子3&lt;/h3&gt;
&lt;p&gt;前面我们启用&lt;code&gt;-s&lt;/code&gt;选项，它就添加了tex文件的头和尾。很神奇，它怎么做的？？&lt;/p&gt;
&lt;p&gt;实际上，它有一个模板，对于latex，它的默认模板长下面这样：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;passoptions.latex&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="k"&gt;\documentclass&lt;/span&gt;[
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
  &lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;fontsize&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;,
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;papersize&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
  &lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;papersize&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;paper,
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;classoption&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
  &lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;classoption&lt;/span&gt;&lt;span class="s"&gt;$$&lt;/span&gt;&lt;span class="nb"&gt;sep&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;,
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endfor&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
]&lt;span class="nb"&gt;{&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;documentclass&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;beamerarticle&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="k"&gt;\usepackage&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;beamerarticle&lt;span class="nb"&gt;}&lt;/span&gt; &lt;span class="c"&gt;% needs to be loaded first&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="k"&gt;\usepackage&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;xcolor&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;.......&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过如下命令，我们可以输出这个模板：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;-D&lt;span class="w"&gt; &lt;/span&gt;latex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;其中命令行参数&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-D&lt;/code&gt;，&lt;code&gt;----print-default-template&lt;/code&gt; 用于输出指定格式的 默认模板。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意看上面的模板，明显有一个我们感兴趣的变量&lt;code&gt;$documentclass$&lt;/code&gt;。上面例子中，我们已经发现它不符合我们胃口。但，如何修改它？！！&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;-V&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;documentclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ctexart&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
xelatex&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样就可以，直接生成我们可用的latex文件。&lt;/p&gt;
&lt;p&gt;通过命令行选项（大写）&lt;code&gt;V&lt;/code&gt;可以定义模板变量：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-V&lt;/code&gt;，&lt;code&gt;--variable&lt;/code&gt;：用于定义模板变量&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4"&gt;例子4&lt;/h3&gt;
&lt;p&gt;文档类是文档的一部分啊，除了命令行之外，有没有其他写法？？&lt;/p&gt;
&lt;p&gt;好在
Pandoc的Markdown支持yaml格式的front matter（一种元数据）。
通过它，我们可以将前面的markdown文件，写为&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;---
&lt;span class="gu"&gt;documentclass: ctexart&lt;/span&gt;
&lt;span class="gu"&gt;---&lt;/span&gt;

&lt;span class="gh"&gt;# Hello 1+1=2&lt;/span&gt;

我是测试文本。

我是公式：

$$
E=mc^2
$$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样一来，通过front matter我们定义了模板变量，下面命令也就没问题了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
xelatex&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="5"&gt;例子5&lt;/h3&gt;
&lt;p&gt;例子跑通了，不过这么牛的pandoc，既然能各种格式直接转。是不是可以直接生成pdf呢？&lt;/p&gt;
&lt;p&gt;试一下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对我们这个例子没问题。不过因为markdown中我们有中文。pandoc默认使用pdflatex引擎对中文支持不好，万一不能正常工作。怎么办，如何切换成我们前面用的xelatex。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="w"&gt; &lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过命令行 &lt;code&gt;--pdf-engine&lt;/code&gt; 我们可以指定一个特定的latex编译器。问题解决！&lt;/p&gt;
&lt;h3 id="6"&gt;例子6&lt;/h3&gt;
&lt;p&gt;如果我们不想再头部添加yaml，可以独立成一个单独文件，比如hello.yaml:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;documentclass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ctexart&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样，只需要&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;--metadata-file&lt;span class="o"&gt;=&lt;/span&gt;hello.yaml&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="w"&gt; &lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;hello.yaml&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="w"&gt; &lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;这个文件应该挺有用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_2"&gt;模板&lt;/h2&gt;
&lt;p&gt;要取代默认模板很简单，只需要我们定义一个&lt;/p&gt;
&lt;h3 id="8"&gt;例子8&lt;/h3&gt;
&lt;p&gt;一个简单的模板，不需要多高大上：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;\documentclass&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;ctexart&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\begin&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;body&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="k"&gt;\end&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过命令行指定模板&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;--template&lt;span class="o"&gt;=&lt;/span&gt;debao_template.tex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.tex
xelatex&lt;span class="w"&gt; &lt;/span&gt;hello.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者一步到位，生成pdf&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;hello.md&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;--template&lt;span class="o"&gt;=&lt;/span&gt;debao_template.tex&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="w"&gt; &lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;hello.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_3"&gt;变量&lt;/h2&gt;
&lt;p&gt;模板变量，直接和模板相关，比如yaml中定义如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;The document title&lt;/span&gt;
&lt;span class="nt"&gt;author&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Author One&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;affiliation&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;University of Somewhere&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Author Two&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;affiliation&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;University of Nowhere&lt;/span&gt;
&lt;span class="nn"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在模板文件中，可以&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;author&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;author.name&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;author.name&lt;/span&gt;&lt;span class="s"&gt;$$&lt;/span&gt;&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;author.affiliation&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt; (&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;author.affiliation&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;)&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;else&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;author&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;span class="s"&gt;$&lt;/span&gt;&lt;span class="nb"&gt;endfor&lt;/span&gt;&lt;span class="s"&gt;$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;模板中，条件语句、循环语句，以及默认哪些变量，需要查&lt;a href="https://pandoc.org/MANUAL.html#templates"&gt;手册&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="_4"&gt;开始写本书&lt;/h2&gt;
&lt;p&gt;假定一本书有10章，每章对应一个markdown文件。&lt;/p&gt;
&lt;h3 id="1_1"&gt;例子1&lt;/h3&gt;
&lt;p&gt;作为模拟，可以写个python脚本，生成这10个markdown文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="c1"&gt;# 定义章节的数量&lt;/span&gt;
&lt;span class="n"&gt;num_chapters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;

&lt;span class="n"&gt;output_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;chapters&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makedirs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# 循环生成每个章节文件&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;num_chapters&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;filename&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/chapter&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;02&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.md&amp;quot;&lt;/span&gt;

    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;# 第&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;章: 章节标题&lt;/span&gt;&lt;span class="se"&gt;\n\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;这是第 &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; 章的内容。&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;## 小节 1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;这是第 &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; 章的小节 1 的内容。&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;## 小节 2&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;这是第 &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; 章的小节 2 的内容。&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;生成 &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;成功生成 &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;num_chapters&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; 个章节的 Markdown 文件！&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后，直接使用pandoc命令，来生成pdf文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter01.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter02.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter03.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter04.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter05.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter06.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter07.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter08.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter09.md&lt;span class="w"&gt; &lt;/span&gt;chapters/chapter10.md&lt;span class="w"&gt; &lt;/span&gt;-V&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;documentclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ctexbook&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="w"&gt; &lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;book.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样就可以。就是一堆文件名太闹心&lt;/p&gt;
&lt;h3 id="2_1"&gt;例子2&lt;/h3&gt;
&lt;p&gt;写个文本文件，比如 booklist.txt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;chapters/chapter01.md
chapters/chapter02.md
chapters/chapter03.md
chapters/chapter04.md
chapters/chapter05.md
chapters/chapter06.md
chapters/chapter07.md
chapters/chapter08.md
chapters/chapter09.md
chapters/chapter10.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后，就清爽多了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;booklist.txt&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;book.pdf&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="o"&gt;=&lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-V&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;documentclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ctexbook
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="3_1"&gt;例子3&lt;/h3&gt;
&lt;p&gt;还可以编写一个yaml文件，来存在模板变量信息：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;documentclass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ctexbook&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;我的书籍&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;author&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1+1=10&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;date&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2024-10-29&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;fontsize&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;12pt&lt;/span&gt;
&lt;span class="nt"&gt;geometry&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;margin=1in&lt;/span&gt;
&lt;span class="nt"&gt;toc&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="nt"&gt;numbersections&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样一来&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--metadata-file&lt;span class="o"&gt;=&lt;/span&gt;metadata.yaml&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;booklist.txt&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;book.pdf&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="o"&gt;=&lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-V&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;documentclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ctexbook
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_5"&gt;扩展&lt;/h2&gt;
&lt;h3 id="extension"&gt;Extension&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://pandoc.org/chunkedhtml-demo/8.21-non-default-extensions.html&lt;/li&gt;
&lt;li&gt;https://pandoc.org/chunkedhtml-demo/7.3-math-input.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;扩展可以通过在格式名称后添加 &lt;code&gt;+EXTENSION&lt;/code&gt; 来启用，通过添加 &lt;code&gt;-EXTENSION&lt;/code&gt; 来禁用。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--from markdown_strict+footnotes&lt;/code&gt; 是启用脚注的严格 Markdown，而&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--from markdown-footnotes-pipe_tables&lt;/code&gt; 是不包含脚注或管道表的 Pandoc Markdown。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可用扩展列表，可通过如下命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--list-extensions&lt;span class="o"&gt;=&lt;/span&gt;markdown
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--list-extensions&lt;span class="o"&gt;=&lt;/span&gt;gfm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;来获取&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;-abbreviations
+all_symbols_escapable
-angle_brackets_escapable
-ascii_identifiers
+auto_identifiers
-autolink_bare_uris
+backtick_code_blocks
+blank_before_blockquote
+blank_before_header
+bracketed_spans
+citations
-compact_definition_lists
+definition_lists
-east_asian_line_breaks
-emoji
+escaped_line_breaks
+example_lists
+fancy_lists
+fenced_code_attributes
+fenced_code_blocks
+fenced_divs
+footnotes
-four_space_rule
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="filter"&gt;Filter&lt;/h3&gt;
&lt;p&gt;Pandoc 过滤器在文档转换过程中对 Pandoc 的抽象语法树（AST）进行操作。这意味着我们可以对文档的结构、内容和格式进行修改，添加、删除或重排元素。&lt;/p&gt;
&lt;p&gt;可以使用各种脚本语言（默认对应解释器）：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;文件后缀&lt;/th&gt;
&lt;th&gt;解释器&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;.py&lt;/td&gt;
&lt;td&gt;python&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.hs&lt;/td&gt;
&lt;td&gt;runhaskell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.pl&lt;/td&gt;
&lt;td&gt;perl&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.rb&lt;/td&gt;
&lt;td&gt;ruby&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.php&lt;/td&gt;
&lt;td&gt;php&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.js&lt;/td&gt;
&lt;td&gt;node&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.r&lt;/td&gt;
&lt;td&gt;Rscript&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;使用python编写时，使用 pandocfilters，见：&lt;/p&gt;
&lt;p&gt;https://pypi.org/project/pandocfilters/&lt;/p&gt;
&lt;h2 id="_6"&gt;继续&lt;/h2&gt;
&lt;p&gt;如果写点像书的正经东西，还要多学习一些。&lt;/p&gt;
&lt;h3 id="_7"&gt;文件、代码结构&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;my-book/                  # 项目根目录
├── chapters/             # 存放各个章节的 Markdown 文件
│   ├── 01-introduction.md
│   ├── 02-chapter1.md
│   ├── 03-chapter2.md
│   └── ...               # 其他章节
├── images/               # 存放图片资源
│   └── cover.png         # 书籍封面图片
├── templates/            # 存放自定义的模板和样式文件
│   ├── custom-template.tex   # 自定义的 LaTeX 模板
│   └── custom-style.css      # 自定义的 CSS 样式表
├── metadata.yaml         # 元数据文件，存放书籍的全局信息，如标题、作者等
├── booklist.txt          # 列出所有章节的文件列表
├── Makefile              # Makefile 文件，用于生成书籍（可选）
└── README.md             # 项目说明文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这些文件前面基本都见到了，Makefile文件用于简化pandoc的调用&lt;/p&gt;
&lt;h3 id="makefile"&gt;Makefile&lt;/h3&gt;
&lt;p&gt;Makefile真要好好写，挺不容易。&lt;/p&gt;
&lt;p&gt;不过我们可以只用最简单和傻瓜的规则（不考虑构建依赖以及清理等操作）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;# 生成多个格式&lt;/span&gt;
&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="n"&gt;epub&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;

&lt;span class="c"&gt;# 生成 PDF 文件&lt;/span&gt;
&lt;span class="nf"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--metadata-file&lt;span class="o"&gt;=&lt;/span&gt;metadata.yaml&lt;span class="w"&gt; &lt;/span&gt;--toc&lt;span class="w"&gt; &lt;/span&gt;--number-sections&lt;span class="w"&gt; &lt;/span&gt;--template&lt;span class="o"&gt;=&lt;/span&gt;templates/custom-template.tex&lt;span class="w"&gt; &lt;/span&gt;--pdf-engine&lt;span class="o"&gt;=&lt;/span&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;mybook.pdf&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;booklist.txt&lt;span class="k"&gt;)&lt;/span&gt;

&lt;span class="c"&gt;# 生成 EPUB 文件&lt;/span&gt;
&lt;span class="nf"&gt;epub&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--metadata-file&lt;span class="o"&gt;=&lt;/span&gt;metadata.yaml&lt;span class="w"&gt; &lt;/span&gt;--toc&lt;span class="w"&gt; &lt;/span&gt;--number-sections&lt;span class="w"&gt; &lt;/span&gt;--css&lt;span class="o"&gt;=&lt;/span&gt;templates/custom-style.css&lt;span class="w"&gt; &lt;/span&gt;--epub-cover-image&lt;span class="o"&gt;=&lt;/span&gt;images/cover.png&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;mybook.epub&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;booklist.txt&lt;span class="k"&gt;)&lt;/span&gt;

&lt;span class="c"&gt;# 生成 HTML 文件&lt;/span&gt;
&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;pandoc&lt;span class="w"&gt; &lt;/span&gt;--metadata-file&lt;span class="o"&gt;=&lt;/span&gt;metadata.yaml&lt;span class="w"&gt; &lt;/span&gt;--toc&lt;span class="w"&gt; &lt;/span&gt;--number-sections&lt;span class="w"&gt; &lt;/span&gt;--css&lt;span class="o"&gt;=&lt;/span&gt;templates/custom-style.css&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;mybook.html&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;booklist.txt&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者直接用python吧&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;
&lt;span class="normal"&gt;52&lt;/span&gt;
&lt;span class="normal"&gt;53&lt;/span&gt;
&lt;span class="normal"&gt;54&lt;/span&gt;
&lt;span class="normal"&gt;55&lt;/span&gt;
&lt;span class="normal"&gt;56&lt;/span&gt;
&lt;span class="normal"&gt;57&lt;/span&gt;
&lt;span class="normal"&gt;58&lt;/span&gt;
&lt;span class="normal"&gt;59&lt;/span&gt;
&lt;span class="normal"&gt;60&lt;/span&gt;
&lt;span class="normal"&gt;61&lt;/span&gt;
&lt;span class="normal"&gt;62&lt;/span&gt;
&lt;span class="normal"&gt;63&lt;/span&gt;
&lt;span class="normal"&gt;64&lt;/span&gt;
&lt;span class="normal"&gt;65&lt;/span&gt;
&lt;span class="normal"&gt;66&lt;/span&gt;
&lt;span class="normal"&gt;67&lt;/span&gt;
&lt;span class="normal"&gt;68&lt;/span&gt;
&lt;span class="normal"&gt;69&lt;/span&gt;
&lt;span class="normal"&gt;70&lt;/span&gt;
&lt;span class="normal"&gt;71&lt;/span&gt;
&lt;span class="normal"&gt;72&lt;/span&gt;
&lt;span class="normal"&gt;73&lt;/span&gt;
&lt;span class="normal"&gt;74&lt;/span&gt;
&lt;span class="normal"&gt;75&lt;/span&gt;
&lt;span class="normal"&gt;76&lt;/span&gt;
&lt;span class="normal"&gt;77&lt;/span&gt;
&lt;span class="normal"&gt;78&lt;/span&gt;
&lt;span class="normal"&gt;79&lt;/span&gt;
&lt;span class="normal"&gt;80&lt;/span&gt;
&lt;span class="normal"&gt;81&lt;/span&gt;
&lt;span class="normal"&gt;82&lt;/span&gt;
&lt;span class="normal"&gt;83&lt;/span&gt;
&lt;span class="normal"&gt;84&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;

&lt;span class="n"&gt;metadata_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;metadata.yaml&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;booklist_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;booklist.txt&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;output_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;build&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;output_pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mybook.pdf&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;output_epub&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mybook.epub&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;output_html&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mybook.html&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cover_image&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;images/cover.png&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;latex_template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;templates/pdf.latex&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;css_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;templates/style.css&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;pdf_engine&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;md_format&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;markdown+tex_math_single_backslash&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;booklist_file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;booklist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;splitlines&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;command_comm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;pandoc&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--metadata-file&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;metadata_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--from&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;md_format&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--toc&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--number-sections&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;booklist&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_file_exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Error: Cannot found &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;create_output_directory&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makedirs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Build directory: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;output_dir&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;generate_pdf&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;check_file_exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;latex_template&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt;
    &lt;span class="n"&gt;pdf_command&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;command_comm&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--template&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;latex_template&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--pdf-engine&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pdf_engine&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;-o&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_pdf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Generate PDF: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;output_pdf&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf_command&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CalledProcessError&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Error generate PDF: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;generate_epub&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;epub_command&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;command_comm&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--css&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;css_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--epub-cover-image&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cover_image&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;-o&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_epub&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Generate EPUB: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;output_epub&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;epub_command&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CalledProcessError&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Error generating EPUB: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;generate_html&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;html_command&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;command_comm&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;--css&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;css_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;-o&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_html&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Generate HTML: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;output_html&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html_command&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CalledProcessError&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Error generating HTML: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;..start...&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;create_output_directory&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;generate_pdf&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;generate_epub&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;generate_html&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;..finished...&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或许找个现成模板，起步会更好...&lt;/p&gt;
&lt;h2 id="_8"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pandoc.org/MANUAL.html"&gt;https://pandoc.org/MANUAL.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://learnbyexample.github.io/customizing-pandoc/"&gt;https://learnbyexample.github.io/customizing-pandoc/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://keleshev.com/my-book-writing-setup/"&gt;https://keleshev.com/my-book-writing-setup/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Wandmalfarbe/pandoc-latex-template"&gt;https://github.com/Wandmalfarbe/pandoc-latex-template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://ge-chunyu.github.io/posts/2019-11-pandoc-large-document/"&gt;https://ge-chunyu.github.io/posts/2019-11-pandoc-large-document/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sspai.com/post/77206"&gt;Pandoc 从入门到精通，你也可以学会这一个文本转换利器&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://zhuanlan.zhihu.com/p/564587260"&gt;利用pandoc模板eisvogel实现Markdown转pdf（latex）中文排版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/wikiti/pandoc-book-template"&gt;https://github.com/wikiti/pandoc-book-template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://medium.com/@sydasif78/book-creation-with-pandoc-and-markdown-893c7d72cb35"&gt;https://medium.com/@sydasif78/book-creation-with-pandoc-and-markdown-893c7d72cb35&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="latex"></category><category term="markdown"></category><category term="pandoc"></category></entry><entry><title>Pelican继续了解</title><link href="https://blog.debao.me/2024/10/a-deeper-dive-into-pelican/" rel="alternate"></link><published>2024-10-21T13:16:00+08:00</published><updated>2024-10-21T13:16:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-10-21:/2024/10/a-deeper-dive-into-pelican/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;重新捡起来 Pelican 写博客已经将近一年，见 &lt;a href="https://blog.debao.me/2023/11/hello-pelican-again/"&gt;Hello Pelican Again&lt;/a&gt;。由于开始用到大量公式，重新梳理一下Markdown的一些概念，并使用了katex和mermaid扩展，但是体验并不好，见&lt;a href="https://blog.debao.me/2024/05/notes-on-markdown/"&gt;Markdown小记 …&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;重新捡起来 Pelican 写博客已经将近一年，见 &lt;a href="https://blog.debao.me/2023/11/hello-pelican-again/"&gt;Hello Pelican Again&lt;/a&gt;。由于开始用到大量公式，重新梳理一下Markdown的一些概念，并使用了katex和mermaid扩展，但是体验并不好，见&lt;a href="https://blog.debao.me/2024/05/notes-on-markdown/"&gt;Markdown小记&lt;/a&gt;与&lt;a href="https://blog.debao.me/2024/09/notes-on-python-markdown-usage/"&gt;Python Markdown使用小记&lt;/a&gt;。另外，想看看&lt;a href="https://blog.debao.me/2023/11/notes-for-sass/"&gt;Sass相关&lt;/a&gt;以及&lt;a href="https://blog.debao.me/2023/12/python-flask-beginner-notes-2/"&gt;Jinja2相关内容&lt;/a&gt;以便于调整一下模板，也没看懂。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pelican 是一个基于 Python 的静态网站生成器，广泛用于创建博客、个人网站、文档网站和项目展示页面。它支持 Markdown 和 reStructuredText 格式，允许用户通过模板引擎（如 Jinja2）定制页面布局&lt;/p&gt;
&lt;h2 id="pelican"&gt;Pelican源码结构&lt;/h2&gt;
&lt;p&gt;既然不准备换掉它，那就走马观花看看，顺便温习python知识点&lt;/p&gt;
&lt;h3 id="pyprojecttoml"&gt;pyproject.toml&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;pelican 从多年以前就开始使用 pyproject.toml 文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;pyproject.toml 是PEP 518 提出的标准配置文件，用于定义 Python 项目的构建工具和元数据。旨在为 Python 项目提供一种统一的、简洁的方式来配置构建工具链。&lt;/p&gt;
&lt;p&gt;在它之前，经常可见的文件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;setup.py&lt;/li&gt;
&lt;li&gt;setup.cfg&lt;/li&gt;
&lt;li&gt;requirements.txt (不是完全取代)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;文件由各个部分，主要的：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;部分&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[project]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;定义项目的元数据，如名称、版本、描述、作者等。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[project.dependencies]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;声明项目的运行时依赖项，类似于 &lt;code&gt;requirements.txt&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[project.scripts]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;定义可以暴露为命令行的脚本，类似于 &lt;code&gt;entry_points&lt;/code&gt; 中的 &lt;code&gt;console_scripts&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[build-system]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;定义项目的构建工具和构建依赖（如 &lt;code&gt;setuptools&lt;/code&gt; 或 &lt;code&gt;poetry&lt;/code&gt;）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[tool]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;各种工具（如 &lt;code&gt;black&lt;/code&gt;, &lt;code&gt;pytest&lt;/code&gt; 等）的配置区域。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;pyproject.toml 参考链接：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://packaging.python.org/en/latest/specifications/pyproject-toml/#pyproject-toml-spec&lt;/li&gt;
&lt;li&gt;https://peps.python.org/pep-0518/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于当前penlican项目，它的scripts部分如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[project.scripts]&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican.__main__:main&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;pelican-import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican.tools.pelican_import:main&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;pelican-plugins&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican.plugins._utils:list_plugins&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;pelican-quickstart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican.tools.pelican_quickstart:main&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;pelican-themes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican.tools.pelican_themes:main&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对应我们在命令行下可用的命令，特别是第一个。对应主命令 pelican。&lt;/p&gt;
&lt;p&gt;另外，我们执行如下命令时，调用的也是它：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;pelican&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;python -m&lt;/code&gt; 的模块搜索路径遵循 sys.path，顺序为当前工作目录、PYTHONPATH 环境变量、标准库路径和第三方库路径。它运行模块和包中的代码，包的入口文件为 &lt;code&gt;__main__.py&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="mainpy"&gt;&lt;strong&gt;main&lt;/strong&gt;.py 文件&lt;/h3&gt;
&lt;p&gt;脚本入口文件，真正代码位于别处：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="__init__py"&gt;__init__py 文件&lt;/h3&gt;
&lt;p&gt;真正的入口文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Pelican&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;init_plugins&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="o"&gt;...&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;main() 是命令行入口，解析命令行并决定执行转换操作还是listen操作。&lt;/li&gt;
&lt;li&gt;Pelican.run() 函数，函数内生成各个Generator，并按特定顺序执行。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="generatorspy"&gt;generators.py文件&lt;/h3&gt;
&lt;p&gt;生成Generator后，创建一个上下文（context）。该上下文包含来自命令行的设置，以及如果提供了设置文件，则也包含其内容。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调用每个生成器的 &lt;code&gt;generate_context()&lt;/code&gt; 方法，更新上下文。&lt;/li&gt;
&lt;li&gt;创建一个写入器（writer）对象，并将其传递给每个生成器的&lt;code&gt;generate_output()&lt;/code&gt; 方法。&lt;/li&gt;
&lt;li&gt;注意：Generator的&lt;code&gt;get_template()&lt;/code&gt;方法&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="mermaid"&gt;
classDiagram
    class Generator {
        +get_template(self, name)
    }

    class CachingGenerator {
    }

    class TemplatePagesGenerator {
        +generate_output(writer)
    }

    class StaticGenerator {
        +generate_context()
        +generate_output(writer)
    }

    class SourceFileGenerator {
        +generate_context()
        +generate_output(writer)
    }

    class ArticleGenerator {
        +generate_context()
        +generate_output(writer)
        +generate_feeds(writer)
        +generate_pages(writer)
    }

    class PagesGenerator {
        +generate_context()
        +generate_output(writer)
    }

    Generator &lt;|-- CachingGenerator
    Generator &lt;|-- TemplatePagesGenerator
    Generator &lt;|-- StaticGenerator
    Generator &lt;|-- SourceFileGenerator

    CachingGenerator &lt;|-- ArticleGenerator
    CachingGenerator &lt;|-- PagesGenerator
&lt;/div&gt;

&lt;p&gt;以简单的PagesGenerator为例：&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;generate_context&lt;/code&gt;阶段：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;读取指定路径，搜索其中特定的文件（比如 .markdown文件等）&lt;/li&gt;
&lt;li&gt;使用Reader，将文件加载到特定对象中&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在 &lt;code&gt;generate_output&lt;/code&gt;阶段：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用上面的context 和 Writer，写入生成的内容。&lt;/li&gt;
&lt;li&gt;对于ArticleGenerator、PagesGenerator以及TemplatePageGenerator，都会调用Writer的&lt;code&gt;write_file()&lt;/code&gt;函数。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="jinja2"&gt;jinja2模板加载&lt;/h4&gt;
&lt;p&gt;模板加载也在这个文件内，通过这个文件，对接jinja2知识&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;
&lt;span class="normal"&gt;52&lt;/span&gt;
&lt;span class="normal"&gt;53&lt;/span&gt;
&lt;span class="normal"&gt;54&lt;/span&gt;
&lt;span class="normal"&gt;55&lt;/span&gt;
&lt;span class="normal"&gt;56&lt;/span&gt;
&lt;span class="normal"&gt;57&lt;/span&gt;
&lt;span class="normal"&gt;58&lt;/span&gt;
&lt;span class="normal"&gt;59&lt;/span&gt;
&lt;span class="normal"&gt;60&lt;/span&gt;
&lt;span class="normal"&gt;61&lt;/span&gt;
&lt;span class="normal"&gt;62&lt;/span&gt;
&lt;span class="normal"&gt;63&lt;/span&gt;
&lt;span class="normal"&gt;64&lt;/span&gt;
&lt;span class="normal"&gt;65&lt;/span&gt;
&lt;span class="normal"&gt;66&lt;/span&gt;
&lt;span class="normal"&gt;67&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;jinja2&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;BaseLoader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;ChoiceLoader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;Environment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;FileSystemLoader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;PrefixLoader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;TemplateNotFound&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Generator&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
     &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;settigns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Environment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;loader&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ChoiceLoader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="p"&gt;[&lt;/span&gt;
                    &lt;span class="n"&gt;FileSystemLoader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates_path&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                    &lt;span class="n"&gt;simple_loader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# implicit inheritance&lt;/span&gt;
                    &lt;span class="n"&gt;PrefixLoader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;!simple&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;simple_loader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;!theme&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;theme_loader&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
                    &lt;span class="p"&gt;),&lt;/span&gt;  &lt;span class="c1"&gt;# explicit ones&lt;/span&gt;
                &lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="p"&gt;),&lt;/span&gt;
            &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;JINJA_ENVIRONMENT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;

                &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Template list: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list_templates&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

        &lt;span class="c1"&gt;# provide utils.strftime as a jinja filter&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;strftime&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;DateFormatter&lt;/span&gt;&lt;span class="p"&gt;()})&lt;/span&gt;

        &lt;span class="c1"&gt;# get custom Jinja filters from user settings&lt;/span&gt;
        &lt;span class="n"&gt;custom_filters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;JINJA_FILTERS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;custom_filters&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c1"&gt;# get custom Jinja globals from user settings&lt;/span&gt;
        &lt;span class="n"&gt;custom_globals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;JINJA_GLOBALS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;globals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;custom_globals&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c1"&gt;# get custom Jinja tests from user settings&lt;/span&gt;
        &lt;span class="n"&gt;custom_tests&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;JINJA_TESTS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tests&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;plugin_enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;partial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;plugin_enabled&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;plugin_list&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;PLUGINS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;custom_tests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Return the template by name.&lt;/span&gt;
&lt;span class="sd"&gt;        Use self.theme to get the templates to use, and return a list of&lt;/span&gt;
&lt;span class="sd"&gt;        templates ready to use with Jinja2.&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;ext&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;TEMPLATE_EXTENSIONS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="k"&gt;break&lt;/span&gt;
                &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;TemplateNotFound&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;continue&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;PelicanTemplateNotFound&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;[templates] unable to load &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;[&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;] from &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                        &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;TEMPLATE_EXTENSIONS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
                        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_templates&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="readerspy"&gt;readers.py文件&lt;/h3&gt;
&lt;p&gt;这是用于解析各种源文件的地方。主要关注MarkdownReader。&lt;/p&gt;
&lt;div class="mermaid"&gt;
classDiagram
    class BaseReader {
        +process_metadata(name, value)
        +read(source_path)
    }

    class RstReader {
        +_parse_metadata(document, source_path) dict
        +read(source_path) :(content, metadata)
    }

    class MarkdownReader {
        -_parse_metadata(meta) dict
        +read(source_path) :(content, metadata)
    }

    class HTMLReader {
        +read(filename) :(content, metadata)
    }

    BaseReader &lt;|-- RstReader
    BaseReader &lt;|-- MarkdownReader
    BaseReader &lt;|-- HTMLReader
&lt;/div&gt;

&lt;p&gt;对MarkdownReader，可以看到基本上没有特殊处理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;处理配置文件中的参数，使用参数直接创建python的Markdown对象&lt;/li&gt;
&lt;li&gt;使用Makrdown对象的&lt;code&gt;convert()&lt;/code&gt;方法执行转换操作&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MarkdownReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseReader&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Reader for Markdown files&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;file_extensions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;md&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;markdown&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mkd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mdown&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;MARKDOWN&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extension_configs&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;
        &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extensions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[])&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;extension&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extension_configs&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;extension&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extensions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extensions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;markdown.extensions.meta&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extensions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;extensions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;markdown.extensions.meta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_source_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;source_path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Parse content and metadata of markdown files&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_source_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;source_path&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_md&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;MARKDOWN&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
        &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;pelican_open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;source_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_md&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;convert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hasattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_md&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Meta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;metadata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_parse_metadata&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_md&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;metadata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;metadata&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="writerspy"&gt;writers.py文件&lt;/h3&gt;
&lt;p&gt;Wrriter类主要两个函数：&lt;/p&gt;
&lt;div class="mermaid"&gt;
classDiagram
    class Writer {
        +write_feed(elements, context, path=None, url=None, feed_type="atom", ...)
        +write_file(name, template, context, relative_urls=False, paginated=None, template_name=None, ...)
    }

    Writer --&gt; Paginator
&lt;/div&gt;

&lt;p&gt;主要的函数 &lt;code&gt;write_file()&lt;/code&gt;中有一个辅助函数&lt;code&gt;_write_file()&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_write_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;localcontext&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;override&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Render the template write the file.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
            &lt;span class="c1"&gt;# set localsiteurl for context so that Contents can adjust links&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;localcontext&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;localsiteurl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;localsiteurl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;localcontext&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;localsiteurl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;localcontext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sanitised_join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makedirs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;pass&lt;/span&gt;

            &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_open_w&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;override&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;override&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;从这儿可以看到，模板的 render() 方法被调用。&lt;/p&gt;
&lt;h2 id="plugins"&gt;插件（plugins）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;插件接口？&lt;/li&gt;
&lt;li&gt;插件的组织结构怎么样？&lt;/li&gt;
&lt;li&gt;Pelican如何搜索插件？&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_1"&gt;插件接口&lt;/h3&gt;
&lt;p&gt;Pelican的插件文件的定义很简单，只需要提供 &lt;code&gt;register()&lt;/code&gt;文件作为插件入口！&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pelican&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;signals&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;register&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;signals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;initialized&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;所有的插件是通过订阅-监听机制来工作的，Pelican中称之为signals。所以register()中主要为需要监听的信号注册响应函数。&lt;/p&gt;
&lt;h3 id="_2"&gt;插件结构&lt;/h3&gt;
&lt;p&gt;对于一个名为myplugin插件，其文件组织结构大致如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;├── pelican
│   └── plugins
│       └── myplugin
│           ├── __init__.py
│           └── ...
├── ...
└── pyproject.toml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：pelican，pelican/plugins 文件夹下不包含其他文件。&lt;/p&gt;
&lt;p&gt;核心文件就一个 &lt;code&gt;__init__.py&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="_3"&gt;用途？&lt;/h3&gt;
&lt;p&gt;Python写的这东西，尽管简陋，确实灵活&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/latest/plugins.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如：添加一个新的Reader，以支持新的格式&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从 BaseReader 派生，声明支持的文件后缀并实现特定的read()函数&lt;/li&gt;
&lt;li&gt;对&lt;code&gt;readers_init&lt;/code&gt;信号进行注册相应，以便于添加新的reader&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pelican&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;signals&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pelican.readers&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;BaseReader&lt;/span&gt;

&lt;span class="c1"&gt;# Create a new reader class, inheriting from the pelican.reader.BaseReader&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NewReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseReader&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;  &lt;span class="c1"&gt;# Yeah, you probably want that :-)&lt;/span&gt;

    &lt;span class="c1"&gt;# The list of file extensions you want this reader to match with.&lt;/span&gt;
    &lt;span class="c1"&gt;# If multiple readers were to use the same extension, the latest will&lt;/span&gt;
    &lt;span class="c1"&gt;# win (so the one you&amp;#39;re defining here, most probably).&lt;/span&gt;
    &lt;span class="n"&gt;file_extensions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yeah&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# You need to have a read method, which takes a filename and returns&lt;/span&gt;
    &lt;span class="c1"&gt;# some content and the associated metadata.&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;metadata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Oh yeah&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;category&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Foo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2012-12-01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="n"&gt;parsed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;metadata&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="n"&gt;parsed&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;process_metadata&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Some content&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;parsed&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add_reader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readers&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;readers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reader_classes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yeah&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NewReader&lt;/span&gt;

&lt;span class="c1"&gt;# This is how pelican works.&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;register&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;signals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readers_init&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;add_reader&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="theme"&gt;主题（theme）&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;这玩意主要是前端的工作了，Jinja2模板，样式表，sass 等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;penlican提供一些第三方的主题可用，但一般用户都定制一下。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/latest/themes.html&lt;/li&gt;
&lt;li&gt;https://github.com/getpelican/pelican-themes&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_4"&gt;模板结构&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;static部分用于存放主题的静态资源文件，包括 CSS、图片、JavaScript 等。Pelican 会将此目录中的文件复制到输出目录中，与生成的 HTML 文件一起发布。&lt;/li&gt;
&lt;li&gt;templates目录下的Jinja2模板文件用于定义每个页面的布局和内容显示方式。Pelican 会根据内容类型（文章、标签、分类等）选择相应的模板文件来生成 HTML 页面。下面列出的这些模板必须都存在。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mytheme/
├── static
│   ├── css
│   ├── js
│   └── images
└── templates
    ├── archives.html         // 显示归档页面
    ├── article.html          // 为每篇文章生成页面
    ├── author.html           // 为每个作者生成页面
    ├── authors.html          // 列出所有作者
    ├── categories.html       // 列出所有分类
    ├── category.html         // 为每个分类生成页面
    ├── index.html            // 网站首页，列出所有文章
    ├── page.html             // 为每个页面生成内容（例如“关于我们”页面）
    ├── period_archives.html  // 按时间段显示归档
    ├── tag.html              // 为每个标签生成页面
    └── tags.html             // 列出所有标签（可以是标签云）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_5"&gt;变量&lt;/h3&gt;
&lt;p&gt;Pelican为模板提供的一些常规变量&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;变量&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;output_file&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前正在生成的文件名。例如，当 Pelican 正在渲染首页时，&lt;code&gt;output_file&lt;/code&gt; 的值为 &lt;code&gt;"index.html"&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;articles&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;文章列表，按日期降序排列。所有元素都是 &lt;code&gt;Article&lt;/code&gt; 对象，可访问其属性（如标题、摘要、作者等）。有时会被覆盖（例如在标签页面中）。在这种情况下，可以在 &lt;code&gt;all_articles&lt;/code&gt; 变量中找到信息。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;dates&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;相同的文章列表，但按日期升序排列。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hidden_articles&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;隐藏的文章列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;drafts&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;草稿文章列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;period_archives&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;一个字典，包含与时间段归档相关的元素（如果启用）。详见“Listing and Linking to Period Archives”部分的细节。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;authors&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(作者, 文章) 元组的列表，包含所有作者及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;categories&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(分类, 文章) 元组的列表，包含所有分类及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;(标签, 文章) 元组的列表，包含所有标签及其对应的文章。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hidden_pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;隐藏的页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;draft_pages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;草稿页面列表。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;另外，在配置文件 pelicanconf.py 中，可以自由定义变量（注意不要和pelian内置变量冲突），这些自定义变量，在jinja2模板中也可以直接用。&lt;/p&gt;
&lt;h3 id="sass"&gt;sass&lt;/h3&gt;
&lt;p&gt;兜兜转转，还是回来折腾折腾这个 octopress 这个久久没人维护的主题。克隆一下进行折腾&lt;a href="https://github.com/dbzhang800/pelican-octopress-theme"&gt;pelican-octopress-theme&lt;/a&gt;：&lt;/p&gt;
&lt;p&gt;它的样式表是通过sass来生成的，更改样式表要手动修改这些scss文件，而后使用sass工具来生成目标.css。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个东西变化太多，先勉强从老的ruby版本一直到dart版本。还有一堆警告存在。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;首先，安装nodejs及其下的sass包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;npm install -g sass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sass&lt;span class="w"&gt; &lt;/span&gt;main.scss&lt;span class="w"&gt; &lt;/span&gt;../static/css/main.css&lt;span class="w"&gt; &lt;/span&gt;--style&lt;span class="w"&gt; &lt;/span&gt;compressed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="katex"&gt;katex&lt;/h3&gt;
&lt;p&gt;Pelican的katex支持有两个方案。但都是离线转换方案，在Windows下奇慢无比（数十分钟），即使在github的actions，也是分钟级别的。&lt;/p&gt;
&lt;p&gt;实在无法接受，故而当前blog 自己编写Markdown插件，不进行离线转换。速度只需数秒。&lt;/p&gt;
&lt;h4 id="markdown-katex"&gt;markdown-katex&lt;/h4&gt;
&lt;p&gt;网站：https://github.com/mbarkhau/markdown-katex&lt;/p&gt;
&lt;p&gt;&lt;code&gt;markdown-katex&lt;/code&gt; 插件通过调用 KaTeX 进行 &lt;strong&gt;离线转换&lt;/strong&gt;，从而生成不需要浏览器加载 JavaScript 的公式。然而：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在我的个人电脑（Windows 10）上，性能表现非常差，尽管在 GitHub Actions 环境中速度尚可。&lt;/li&gt;
&lt;li&gt;该插件只支持 &lt;strong&gt;GitLab&lt;/strong&gt; 风格的公式分割符。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="pelican-katex"&gt;pelican-katex&lt;/h4&gt;
&lt;p&gt;网站：https://github.com/martenlienen/pelican-katex&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pelican-katex&lt;/code&gt; 也是一个基于 KaTeX 的 &lt;strong&gt;离线转换&lt;/strong&gt; 插件，且封装为 Pelican 插件，适合使用 Pelican 的用户。在实现上，它是一个 Markdown 插件，被 Pelican 通过传递对象的方式调用。&lt;/p&gt;
&lt;h2 id="getpelican"&gt;getpelican使用问题&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;它使用 python-markdown 不支持 commmark，与主流的Markdown编辑器由一定的兼容性问题。&lt;/li&gt;
&lt;li&gt;内部链接使用自定义变量&lt;code&gt;{filenme}&lt;/code&gt;、&lt;code&gt;{static}&lt;/code&gt;等，主流的Markdown编辑器不支持。&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="front-matter"&gt;front matter&lt;/h3&gt;
&lt;p&gt;现在其他软件YAML Front Matter用的比较多，可以使用扩展&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/pelican-yaml-metadata/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/markdown-full-yaml-metadata/&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;I am the title of the article&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意，pelican源码中默认会启动python-markdown的自己的Mate扩展。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其他编辑器比如vscode等可以识别并隐藏这部分。&lt;/p&gt;
&lt;h3 id="nest-list"&gt;nest list&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;嵌套用4个空格，这是Python Markdown非常坚持的一点。见Issue：https://github.com/Python-Markdown/markdown/issues/3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;针对python markdown和其他软件缩进空格不一致问题，可以&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/mdx-truly-sane-lists/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_6"&gt;其他扩展&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;方案！ 手动写Python Markdown扩展，书写makrdown时使用编辑器常规使用的格式，送入pelican时在内存中自动转换一下。这个终极灵活&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;比如如果没有可心的katex扩展，那就直接写一下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/md-katex/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="commonmark"&gt;commonmark兼容？&lt;/h3&gt;
&lt;p&gt;另外，pelican也有三方的pelican-markdown-it-reader插件，它使用更符合markdown-it 生态的 markdown-it-py。先观望，后面考虑是否切换。&lt;/p&gt;
&lt;h2 id="_7"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/latest/internals.html&lt;/li&gt;
&lt;li&gt;https://github.com/getpelican/pelican&lt;/li&gt;
&lt;li&gt;https://peps.python.org/pep-0518/&lt;/li&gt;
&lt;li&gt;https://pypi.org/project/pelican-markdown-it-reader/&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="module"&gt;
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
&lt;/script&gt;</content><category term="Tools"></category><category term="pelican"></category><category term="katex"></category><category term="markdown"></category></entry><entry><title>LaTeX在VSCode下使用小记</title><link href="https://blog.debao.me/2024/10/notes-on-latex-usage-in-vscode/" rel="alternate"></link><published>2024-10-16T00:03:00+08:00</published><updated>2024-10-16T00:03:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-10-16:/2024/10/notes-on-latex-usage-in-vscode/</id><summary type="html">&lt;p&gt;LaTeX应该无需多少介绍。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LaTeX 是一种基于 TeX 的排版系统，由 Leslie Lamport 在 1980 年代开发的，广泛用于学术和技术文档的撰写，尤其是在需要复杂公式排版和 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;LaTeX应该无需多少介绍。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LaTeX 是一种基于 TeX 的排版系统，由 Leslie Lamport 在 1980 年代开发的，广泛用于学术和技术文档的撰写，尤其是在需要复杂公式排版和精密排版的领域，如数学、物理、计算机科学等。&lt;/li&gt;
&lt;li&gt;TeX 是一种用于高质量排版的计算机语言，由美国计算机科学家 Donald Knuth 于 1978 年开发。它的设计初衷是为了提供一种能够生成精美排版的工具。&lt;/li&gt;
&lt;li&gt;有不同的发行版可用，Tex Live、MiKTex、MacTex、proTeXt以及TinyTex等。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tex"&gt;简单的Tex文档&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;这个东西不能去类比Word等软件，可以类比C++等语言。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;创建一个简单的文本文档，比如 debao.tex：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;\documentclass&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;article&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\usepackage&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;amsmath&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\title&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;Hello LaTex and VSCode&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\author&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;1+1=10&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\date&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;&lt;span class="k"&gt;\today&lt;/span&gt;&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\begin&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\maketitle&lt;/span&gt;

&lt;span class="k"&gt;\section&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;Introduction&lt;span class="nb"&gt;}&lt;/span&gt;
Here is an equation:

&lt;span class="sb"&gt;\[&lt;/span&gt;
&lt;span class="nb"&gt;e^{i&lt;/span&gt;&lt;span class="nv"&gt;\pi&lt;/span&gt;&lt;span class="nb"&gt;} &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nb"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="nb"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="s"&gt;\]&lt;/span&gt;

&lt;span class="k"&gt;\end&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;要将.tex转成pdf文件，需要执行一条编译指令，比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pdflatex&lt;span class="w"&gt; &lt;/span&gt;debao.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;早期的做法是（20年前刚接触latex时）先转成.dvi，而后再转.pdf或.ps格式：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;latex&lt;span class="w"&gt; &lt;/span&gt;debao.tex
dvipdf&lt;span class="w"&gt; &lt;/span&gt;debao.dvi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;除了pdflatex，还有xelatex、lualatex等工具。如果我们要使用中文的话，最简单就是使用xelatex&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;\documentclass&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;ctexart&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\usepackage&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;amsmath&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\title&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;你好LaTex与VSCode&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\author&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;1+1=10&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\date&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;&lt;span class="k"&gt;\today&lt;/span&gt;&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\begin&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;\maketitle&lt;/span&gt;

&lt;span class="k"&gt;\section&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;简介&lt;span class="nb"&gt;}&lt;/span&gt;
一个简单的方程:

&lt;span class="sb"&gt;\[&lt;/span&gt;
&lt;span class="nb"&gt;e^{i&lt;/span&gt;&lt;span class="nv"&gt;\pi&lt;/span&gt;&lt;span class="nb"&gt;} &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nb"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="nb"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="s"&gt;\]&lt;/span&gt;

&lt;span class="k"&gt;\end&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意文档类使用ctexart、ctexrep、ctexbook取代article、report、book。&lt;/p&gt;
&lt;p&gt;编译：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;xelatex&lt;span class="w"&gt; &lt;/span&gt;debao_cn.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;当有目录或交叉引用时，命令需要执行两次或以上。可以用脚本（比如latexmk)、预置菜谱(recipe)或其他方式进行自动化。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="tex_1"&gt;相关Tex工具：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;pdflatex: 将 .tex 文件直接编译为 PDF 文件。最常用的编译器，适合国外大多数场景【因没有Unicode，对中国用户不太友好】。&lt;/li&gt;
&lt;li&gt;xelatex: 支持 Unicode 编码和 OpenType 字体，适合编写多语言文档或需要使用系统字体的场景。【中文简单】&lt;/li&gt;
&lt;li&gt;lualatex: 与 xelatex 类似，支持更复杂的字体和图形处理，基于 LuaTeX 引擎。&lt;/li&gt;
&lt;li&gt;latex + dvipdf: 先将 .tex 文件编译为 DVI（Device Independent File Format）文件，再将 DVI 转换为 PDF 或 PS 格式。【老旧的工作流】&lt;/li&gt;
&lt;li&gt;bibtex： 一个用于管理文献引用的工具。它通过一个 .bib 文件来存储文献信息，并且可以在 LaTeX 文档中自动生成参考文献列表。&lt;/li&gt;
&lt;li&gt;latexmk：一个perl脚本，会自动运行多次 LaTeX 编译，直到所有引用、索引和参考文献等问题都得到解决。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_1"&gt;在线公式编辑器&lt;/h3&gt;
&lt;p&gt;有很多在线公式编辑器：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://latexeditor.lagrida.com/"&gt;https://latexeditor.lagrida.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://editor.codecogs.com/"&gt;https://editor.codecogs.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有一个平台：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/"&gt;https://www.overleaf.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="latex-workshop"&gt;LaTeX Workshop 扩展&lt;/h2&gt;
&lt;p&gt;LaTeX Workshop 是 VS Code 中最流行的 LaTeX 插件，它可以帮助编写、编译 LaTeX 文档，并提供实时预览、语法高亮、自动补全等功能。&lt;/p&gt;
&lt;p&gt;只要保证Latex在系统环境变量PATH内，在VS Code中安装LaTex Workshop，就直接可以用了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文件：新建.tex，并编写内容。确保在编译之前 .tex 文件已保存 (Ctrl+S 或 Cmd+S)。&lt;/li&gt;
&lt;li&gt;编译：按下 Ctrl+Alt+B（Windows/Linux）或 Cmd+Alt+B（macOS），触发 LaTeX Workshop 的编译命令。默认情况下，它会使用 pdflatex 进行编译，并生成一个 PDF 文件。&lt;/li&gt;
&lt;li&gt;预览 PDF：编译完成后，LaTeX Workshop 会自动在 VS Code 中显示生成的 PDF 文件。如果没有自动显示，可以点击右上角的 LaTeX Workshop 面板图标 来手动打开 PDF 预览窗口。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;自定义配置&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;用于熟悉vscode，记录一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;LaTeX Workshop 支持多种编译器，如 pdflatex、xelatex、lualatex 等。通过修改 VS Code 的设置文件 (settings.json)，我们可以根据需要自定义编译命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 VS Code 中，打开命令面板（Ctrl+Shift+P 或 Cmd+Shift+P），在搜索框中输入 Preferences: Open Settings (JSON) 来选择它。&lt;/li&gt;
&lt;li&gt;在打开的 settings.json 中，添加或修改如下配置（注意加在顶层的对象/大括号内）：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;
&lt;span class="normal"&gt;52&lt;/span&gt;
&lt;span class="normal"&gt;53&lt;/span&gt;
&lt;span class="normal"&gt;54&lt;/span&gt;
&lt;span class="normal"&gt;55&lt;/span&gt;
&lt;span class="normal"&gt;56&lt;/span&gt;
&lt;span class="normal"&gt;57&lt;/span&gt;
&lt;span class="normal"&gt;58&lt;/span&gt;
&lt;span class="normal"&gt;59&lt;/span&gt;
&lt;span class="normal"&gt;60&lt;/span&gt;
&lt;span class="normal"&gt;61&lt;/span&gt;
&lt;span class="normal"&gt;62&lt;/span&gt;
&lt;span class="normal"&gt;63&lt;/span&gt;
&lt;span class="normal"&gt;64&lt;/span&gt;
&lt;span class="normal"&gt;65&lt;/span&gt;
&lt;span class="normal"&gt;66&lt;/span&gt;
&lt;span class="normal"&gt;67&lt;/span&gt;
&lt;span class="normal"&gt;68&lt;/span&gt;
&lt;span class="normal"&gt;69&lt;/span&gt;
&lt;span class="normal"&gt;70&lt;/span&gt;
&lt;span class="normal"&gt;71&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// 定义工具链（编译器）&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;latex-workshop.latex.tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;args&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-synctex=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-interaction=nonstopmode&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-file-line-error&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%DOC%&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;args&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-synctex=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-interaction=nonstopmode&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-file-line-error&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%DOC%&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lualatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lualatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;args&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-synctex=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-interaction=nonstopmode&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-file-line-error&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%DOC%&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bibtex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bibtex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;args&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%DOCFILE%&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;env&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// 定义编译配方（recipes）&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;latex-workshop.latex.recipes&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lualatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lualatex&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex ➞ bibtex ➞ pdflatex`×2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bibtex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pdflatex&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;latex-workshop.latex.tools：这个配置项定义了可用的工具（即编译器），例如 pdflatex、xelatex、lualatex。每个工具都有一个名称（name）和对应的命令（command），以及传递给命令的参数（args）。&lt;/p&gt;
&lt;p&gt;latex-workshop.latex.recipes：这个配置项定义了编译的 "食谱"（recipes），即在编译时要调用哪些工具。每个 recipe 都会指定一个或&lt;strong&gt;多个工具&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;要使用自定义工具：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;按 Ctrl+Shift+P（Windows/Linux）或 Cmd+Shift+P（macOS）打开命令面板。&lt;/li&gt;
&lt;li&gt;输入并选择 LaTeX Workshop: Build with recipe。&lt;/li&gt;
&lt;li&gt;弹出的菜单，会列出前面在 latex-workshop.latex.recipes 中定义的编译器选项（pdflatex、xelatex、lualatex）。&lt;/li&gt;
&lt;li&gt;直接选择需要的编译器，而后VS Code 使用选择的编译器进行编译。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果要固定使用一个，可以在配置文件内配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;quot;latex-workshop.latex.recipe.default&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xelatex&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;quot;latex-workshop.latex.recipe.default&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lastUsed&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="vscodetexxworkstexstudio"&gt;VSCode、TexXworks、TeXstudio&lt;/h2&gt;
&lt;p&gt;这三个可以简单对比一下：VS Code 在灵活性和多语言支持上强于 TeXworks，但在 LaTeX 专用功能和集成方面略逊于 TeXstudio。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性/方面&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;VS Code + LaTeX Workshop&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;TeXworks&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;TeXstudio&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;平台支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Windows, macOS, Linux&lt;/td&gt;
&lt;td&gt;Windows, macOS, Linux&lt;/td&gt;
&lt;td&gt;Windows, macOS, Linux&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;安装与配置难度&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;中等，需安装 LaTeX Workshop 插件并进行配置&lt;/td&gt;
&lt;td&gt;低，开箱即用&lt;/td&gt;
&lt;td&gt;低，开箱即用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;界面现代化程度&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;现代化，支持自定义主题和 UI&lt;/td&gt;
&lt;td&gt;简单且基础&lt;/td&gt;
&lt;td&gt;相对传统，功能丰富但界面较老旧&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LaTeX 功能集成&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;通过插件支持，功能较强但需配置&lt;/td&gt;
&lt;td&gt;基础功能集成，适合初学者&lt;/td&gt;
&lt;td&gt;专为 LaTeX 设计，功能全面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PDF 预览&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;内置 PDF 预览，支持 SyncTeX&lt;/td&gt;
&lt;td&gt;内置 PDF 预览，支持 SyncTeX&lt;/td&gt;
&lt;td&gt;内置 PDF 预览，支持 SyncTeX&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;语法高亮与自动补全&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;支持语法高亮和自动补全，需插件&lt;/td&gt;
&lt;td&gt;支持基础的 LaTeX 语法高亮&lt;/td&gt;
&lt;td&gt;支持语法高亮、自动补全以及命令建议&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;项目管理支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;强，支持多文件、多项目工作流&lt;/td&gt;
&lt;td&gt;无项目管理功能&lt;/td&gt;
&lt;td&gt;支持基本的 LaTeX 文档结构和多文件管理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;自动编译&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;通过插件支持（可配置）&lt;/td&gt;
&lt;td&gt;需要手动编译&lt;/td&gt;
&lt;td&gt;支持自动编译功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;错误提示与调试&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;提供详细的编译错误提示，需插件&lt;/td&gt;
&lt;td&gt;提供基础的错误提示&lt;/td&gt;
&lt;td&gt;提供详细的错误提示和定位功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;模板支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;通过插件或手动配置&lt;/td&gt;
&lt;td&gt;无内置模板支持&lt;/td&gt;
&lt;td&gt;内置丰富的模板库&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;扩展性与插件支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;高度可扩展，拥有丰富的插件生态系统&lt;/td&gt;
&lt;td&gt;扩展性有限，无法安装插件&lt;/td&gt;
&lt;td&gt;扩展性有限，但自带大量 LaTeX 功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;版本控制&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;支持 Git 集成，强大的版本控制功能&lt;/td&gt;
&lt;td&gt;不支持 Git 集成&lt;/td&gt;
&lt;td&gt;不支持 Git 集成&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;适用人群&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;需要多语言支持和自定义工作流的用户&lt;/td&gt;
&lt;td&gt;LaTeX 初学者，简单文档需求&lt;/td&gt;
&lt;td&gt;LaTeX 进阶用户，复杂文档管理&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/James-Yu/LaTeX-Workshop&lt;/li&gt;
&lt;li&gt;https://www.tug.org/texlive/&lt;/li&gt;
&lt;li&gt;https://miktex.org/&lt;/li&gt;
&lt;li&gt;https://mathjiajia.github.io/vscode-and-latex/&lt;/li&gt;
&lt;li&gt;https://jdhao.github.io/2018/03/29/latex-chinese.zh/&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="latex"></category><category term="vscode"></category></entry><entry><title>矩阵的计算程序与库小记</title><link href="https://blog.debao.me/2024/10/notes-on-matrix-computation-programs-and-libraries/" rel="alternate"></link><published>2024-10-15T13:24:00+08:00</published><updated>2024-10-15T13:24:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-10-15:/2024/10/notes-on-matrix-computation-programs-and-libraries/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;接前面的&lt;a href="https://blog.debao.me/2024/10/notes-on-matrix/"&gt;矩阵知识小记&lt;/a&gt;，稍微整理一下相关的计算程序或库（不考虑商业版）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;对比&lt;/h2&gt;
&lt;p&gt;涉及矩阵的各种程序和库有很多，暂时关 …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;接前面的&lt;a href="https://blog.debao.me/2024/10/notes-on-matrix/"&gt;矩阵知识小记&lt;/a&gt;，稍微整理一下相关的计算程序或库（不考虑商业版）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;对比&lt;/h2&gt;
&lt;p&gt;涉及矩阵的各种程序和库有很多，暂时关注一下如下4个：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Maxima&lt;/strong&gt; 是一个计算机代数系统，主要用于符号计算。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 是 Python 中的科学计算库，广泛用于数值计算。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OpenCV&lt;/strong&gt; 是 C++ 用于计算机视觉的库，支持一些矩阵操作，但主要用于图像处理。他有python绑定，但python绑定的矩阵操作主要使用NumPy。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Eigen&lt;/strong&gt; 是 C++ 的矩阵和线性代数库，广泛用于数值计算。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;矩阵常规操作&lt;/h3&gt;
&lt;p&gt;矩阵的创建，矩阵的运算，矩阵的分解...&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;操作&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Maxima&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;NumPy&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;OpenCV (C++)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Eigen&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵创建&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;matrix([a,b], [c,d])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.array([[a, b], [c, d]])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::Mat A = (cv::Mat_&amp;lt;double&amp;gt;(2,2) &amp;lt;&amp;lt; a, b, c, d);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::MatrixXd A(2, 2); A &amp;lt;&amp;lt; a, b, c, d;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵加法&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A + B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A + B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::add(A, B, C);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A + B&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵乘法&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A . B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.dot(A, B)&lt;/code&gt; 或 &lt;code&gt;A @ B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;C = A * B;&lt;/code&gt;  或 &lt;code&gt;cv::gemm(A, B, 1.0, cv::Mat(), 0.0, C);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A * B&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵转置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;transpose(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.T&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::transpose(A, B);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.transpose()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵行列式&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;determinant(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.det(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::determinant(A);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.determinant()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵求逆&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;invert(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.inv(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::invert(A, B);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.inverse()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵求迹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;trace(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.trace(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::trace(A);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.trace()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵的LU分解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;lu_factor(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;scipy.linalg.lu(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::LU(A, B);&lt;/code&gt; (部分功能)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::FullPivLU&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵的QR分解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.qr(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::HouseholderQR&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵的特征值分解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;eigenvalues(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.eig(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::eigenNonSymmetric()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::EigenSolver&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵的SVD分解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.svd(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::SVDecomp(A, W, U, Vt);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::JacobiSVD&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵与标量相乘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;k * A&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;k * A&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A = A * k;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;k * A&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵拼接&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;augment(A, B)&lt;/code&gt;（水平），&lt;code&gt;stackmatrix(A, B)&lt;/code&gt;（竖直）&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.hstack((A, B))&lt;/code&gt; (水平)，&lt;code&gt;np.vstack((A, B))&lt;/code&gt; （竖直）&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::hconcat(A, B, C);&lt;/code&gt; (水平)，&lt;code&gt;cv::vconcat(A, B, C);&lt;/code&gt; （竖直）&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::MatrixXd::hstack(A, B)&lt;/code&gt; ，&lt;code&gt;Eigen::MatrixXd::vstack(A, B)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵求范数&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.linalg.norm(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::norm(A);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.norm()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;单位矩阵&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ident(n)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.eye(n)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::Mat::eye(n, n, CV_64F);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::MatrixXd::Identity(n, n)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;零矩阵&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;zeromatrix(m, n)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.zeros((m, n))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::Mat::zeros(m, n, CV_64F);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Eigen::MatrixXd::Zero(m, n)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵元素逐项相乘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A .* B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A * B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::multiply(A, B, C);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.cwiseProduct(B)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵元素逐项取平方&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.square(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::pow(A, 2, B);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.array().square()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵对角线元素&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;diagmatrix(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;np.diag(A)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cv::Mat diag = cv::Mat::diag(A);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A.diagonal()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_3"&gt;存储结构&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;计算机内存是线性的，即内存地址是一个连续的线性空间，但矩阵是二维（或多维）的数据结构。为了将这些多维数据存储在线性内存中，就需要决定如何对数据进行线性化存储，即按行还是按列的顺序存储。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;行主序（Row-major order） 是大多数编程语言（如 C、C++、Python（NumPy 默认））的默认存储方式。这种存储方式更符合线性代数中常见的运算模式，例如矩阵乘法中的行向量和列向量操作。&lt;/li&gt;
&lt;li&gt;列主序（Column-major order） 是 Fortran 和一些数学工具（如 MATLAB 和 Eigen（默认））的选择。这是因为 Fortran 早期广泛用于科学计算，使用列主序可以更好地优化向量化操作和循环性能。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如：对于 2x2 矩阵：&lt;/p&gt;
&lt;div class="math display"&gt;
A = \begin{pmatrix} 1 &amp; 2 \\ 3 &amp; 4 \end{pmatrix}
&lt;/div&gt;

&lt;p&gt;按 &lt;strong&gt;行主序&lt;/strong&gt; 存储的内存排列为：&lt;code&gt;[1, 2, 3, 4]&lt;/code&gt;；按 &lt;strong&gt;列主序&lt;/strong&gt; 存储的内存排列则为：&lt;code&gt;[1, 3, 2, 4]&lt;/code&gt;。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;库/工具&lt;/th&gt;
&lt;th&gt;默认存储顺序&lt;/th&gt;
&lt;th&gt;如何选择行/列主序&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Maxima&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;无特别存储顺序&lt;/td&gt;
&lt;td&gt;无法选择，列表的列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;行主序（可选列主序）&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;order='C'&lt;/code&gt; 选择行主序，&lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;使用 &lt;code&gt;order='F'&lt;/code&gt; 选择列主序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;OpenCV&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;行主序&lt;/td&gt;
&lt;td&gt;无法选择，默认使用行主序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Eigen&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;列主序（可选行主序）&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;Eigen::RowMajor&lt;/code&gt; 选择行主序，&lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;默认列主序&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-"&gt;例子-特征值计算&lt;/h2&gt;
&lt;p&gt;以如下矩阵为例，计算其特征值&lt;/p&gt;
&lt;div class="math display"&gt;
A = \begin{pmatrix}
  4 &amp; 0 &amp; 1 \\
  2 &amp; 3 &amp; 2 \\
  1 &amp; 0 &amp; 4
  \end{pmatrix}
&lt;/div&gt;

&lt;p&gt;maxima执行的是符号运算，我们可以使用它模拟手动计算过程：&lt;/p&gt;
&lt;h3 id="_4"&gt;“手动”计算&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;使用charpoly获取特征多项式，也就是&lt;span class="math inline"&gt;\mathbf{A}-t\mathbf{I}&lt;/span&gt;的行列式值&lt;/li&gt;
&lt;li&gt;使用factor对特征多项进行分解，得出 &lt;span class="math inline"&gt;-(t-5)*(t-3)^2&lt;/span&gt;，可以肉眼看出特征值的结果&lt;/li&gt;
&lt;li&gt;使用solve解方程，得出特征值&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;matrix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                             &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;charpoly&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                                              &lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                      &lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;factor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;f&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                                               &lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                         &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;5&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;solve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                           &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如何求解特征向量呢？？&lt;/p&gt;
&lt;p&gt;比如，接上面，我们要继续求解特征值 3 的特征向量，需要解如下方程 &lt;span class="math inline"&gt;(A - 3I) \mathbf{v} = 0&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(%i12) linsolve([v3+v1=0, 2*v3+2*v1=0, v3+v1=0], [v1,v2,v3]);
(%o12)                 [v1 = - %r1, v2 = %r2, v3 = %r1]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;解出来的解是参数形式。据此，将参数用（1,0）和（0,1）带入，可以构造出两个特征向量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[1, 0, −1], [0, 1, 0]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;同样，对于特征值5，需要解 &lt;span class="math inline"&gt;(A - 5I) \mathbf{v} = 0&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(%i15) linsolve([v3-v1=0, 2*v3-2*v2+2*v1=0, v1-v3=0], [v1,v2,v3]);
(%o15) [v1 = %r3, v2 = 2 %r3, v3 = %r3]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;接出来的解依然是参数形式，将参数用1带入，可以构造出特征向量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[1,2,1]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="maxima"&gt;maxima自动计算&lt;/h3&gt;
&lt;p&gt;让 maxima 直接计算特征值也很简单：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;matrix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                             &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;                                  &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;i2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;eigenvalues&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;(%&lt;/span&gt;&lt;span class="nt"&gt;o2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                          &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;真正的特征值是放在结果的第一个list 当中，也就是5 和3。那第二个list 代表什么呢？代表的就是每个特征值的几何重数, 也就是每个特征值对应的特征向量空间之维度。&lt;/p&gt;
&lt;p&gt;如果同时要求出特征向量，可以直接用eigenvectors函数：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(%i3) eigenvectors(A);
(%o3) [[[5, 3], [1, 2]], [1, 2, 1], [1, 0, −1], [0, 1, 0]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="numpy"&gt;numpy&lt;/h3&gt;
&lt;p&gt;Python下功能都是现成的：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;

&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;

&lt;span class="n"&gt;eigenvalues&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linalg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eigvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# A 的特征值： [3. 5. 3.]&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;A 的特征值：&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如果要同时求出特征向量，可以直接用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;eigenvectors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linalg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;A 的特征值：&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;A 的特征向量：&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;eigenvectors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;#A 的特征值： [3. 5. 3.]&lt;/span&gt;
&lt;span class="c1"&gt;#A 的特征向量：&lt;/span&gt;
&lt;span class="c1"&gt;# [[ 0.          0.40824829 -0.70710678]&lt;/span&gt;
&lt;span class="c1"&gt;# [ 1.          0.81649658  0.        ]&lt;/span&gt;
&lt;span class="c1"&gt;# [ 0.          0.40824829  0.70710678]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;特征向量要竖着看（列向量）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="eigen"&gt;Eigen&lt;/h3&gt;
&lt;p&gt;Eigen下使用 EigenSolver 计算矩阵 A 的特征值和特征向量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;Eigen/Dense&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Eigen&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Matrix3d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Eigen&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;EigenSolver&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Eigen&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Matrix3d&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eigenvectors&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;输出结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(5,0)
(3,0)
(3,0)
 (0.408248,0)  (0.408248,0) (-0.268517,0)
 (0.816497,0) (-0.816497,0) (-0.925093,0)
 (0.408248,0) (-0.408248,0)  (0.268517,0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;特征向量要竖着看（列向量）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="opencv"&gt;OpenCV&lt;/h3&gt;
&lt;p&gt;在OpenCV中，使用 cv::eigen 或 cv::eigenNonSymmetric 计算特征值和特征向量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;opencv2/opencv.hpp&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Mat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Mat_&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Mat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvectors&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;eigenNonSymmetric&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvectors&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvalues&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eigenvectors&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;输出结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[5;
 3;
 3]
[0.547722557505166, 1.095445115010332, 0.5477225575051659;
 -0.4082482904638631, 0.8164965809277259, 0.4082482904638629;
 -0.5412318472679982, -1.153604282963793, 0.5412318472679984]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;特征向量要竖着看（列向量）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意，上面用的cv::eigenNonSymmetric函数，尽管cv::eigen也能用于特征值求解，但是它只适用于对称矩阵。
如果不小心用错了函数，大致会得到下面这种错误的结果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[5.903211925911553;
 3.80606343352537;
 1.290724640563077]
[0.3971125497870069, 0.5206573684395941, 0.7557893406837773;
 0.8876503388204475, -0.4271322870657471, -0.1721478589408799;
 0.233191978407506, 0.7392387395392244, -0.6317812811178029]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="octave"&gt;Octave&lt;/h2&gt;
&lt;p&gt;Octave：Octave 是一个开源的高级编程语言，主要用于数值计算，语法和功能与 MATLAB 高度兼容。有不少在线网站可以用于练习。&lt;/p&gt;
&lt;p&gt;在一定程度上，Octave和Python的Numpy可以类比：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;特性&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Octave&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Python (NumPy + SciPy)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;原生支持矩阵类型&lt;/strong&gt;，默认情况下一切操作都是基于矩阵&lt;/td&gt;
&lt;td&gt;通过 &lt;strong&gt;NumPy&lt;/strong&gt; 提供矩阵和数组支持，默认是数组（ndarray）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵操作的简洁性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;矩阵运算非常简洁&lt;/strong&gt;，默认处理为二维矩阵，类似 MATLAB&lt;/td&gt;
&lt;td&gt;NumPy 的数组操作非常灵活，但 Python 本身没有内置矩阵支持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵索引&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 基索引（从 1 开始）&lt;/td&gt;
&lt;td&gt;0 基索引（从 0 开始），符合大多数编程语言的习惯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;线性代数库&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;内置矩阵运算与线性代数函数，如 &lt;code&gt;inv&lt;/code&gt;、&lt;code&gt;eig&lt;/code&gt;、&lt;code&gt;det&lt;/code&gt; 等&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 和 &lt;strong&gt;SciPy&lt;/strong&gt; 提供了丰富的线性代数函数，如 &lt;code&gt;inv&lt;/code&gt;、&lt;code&gt;eig&lt;/code&gt;、&lt;code&gt;det&lt;/code&gt; 等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;稀疏矩阵支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;支持稀疏矩阵，通过 &lt;code&gt;sparse&lt;/code&gt; 函数进行稀疏矩阵运算&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;SciPy&lt;/strong&gt; 提供了强大的稀疏矩阵支持，适合处理大规模稀疏矩阵&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;广播机制&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;无自动广播机制，矩阵的维度必须匹配&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 支持广播机制，可在不同维度的数组之间进行操作&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵乘法&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;*&lt;/code&gt; 表示矩阵乘法，&lt;code&gt;.*&lt;/code&gt; 表示元素逐个相乘&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@&lt;/code&gt; 表示矩阵乘法，&lt;code&gt;*&lt;/code&gt; 表示元素逐个相乘（从 Python 3.5+ 开始）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;向量化计算&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;默认支持向量化计算，所有操作都是矩阵或向量的&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 默认支持向量化计算，避免显式的循环&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;性能&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;针对矩阵运算进行了优化，矩阵操作性能较好&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 和 &lt;strong&gt;SciPy&lt;/strong&gt; 的矩阵运算经过高度优化，性能非常好，部分操作可以与 Octave 相媲美&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵转置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;'&lt;/code&gt; 符号进行矩阵转置&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;T&lt;/code&gt; 属性进行矩阵转置（如 &lt;code&gt;A.T&lt;/code&gt;）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;高级矩阵分解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;内置支持常见的矩阵分解如 QR、LU、SVD&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;SciPy&lt;/strong&gt; 提供了丰富的矩阵分解功能，如 QR、LU、SVD、Cholesky 等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;矩阵求解&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;A\b&lt;/code&gt; 语法求解线性方程组&lt;/td&gt;
&lt;td&gt;使用 &lt;code&gt;np.linalg.solve(A, b)&lt;/code&gt; 进行线性方程组求解&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;性能优化&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;支持与 &lt;strong&gt;BLAS/LAPACK&lt;/strong&gt; 库集成，提升大规模矩阵运算性能&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;NumPy&lt;/strong&gt; 和 &lt;strong&gt;SciPy&lt;/strong&gt; 也可以与 &lt;strong&gt;BLAS/LAPACK&lt;/strong&gt; 集成，提供类似的性能优化&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GPU 支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;无原生支持，需要额外配置（如借助 OpenCL）&lt;/td&gt;
&lt;td&gt;可通过 &lt;strong&gt;CuPy&lt;/strong&gt; 等库轻松扩展到 GPU 支持&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_5"&gt;其他&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Armadillo：Armadillo 是一个 C++ 线性代数库，提供类似 MATLAB 的简洁语法，适合科学计算和与 BLAS/LAPACK 集成的高效运算。&lt;/li&gt;
&lt;li&gt;Blaze：Blaze 是一个高度优化的 C++ 线性代数库，专注于性能，通过自动向量化和并行化提供极致的矩阵运算效率。&lt;/li&gt;
&lt;li&gt;CuPy 提供了与 NumPy 类似的接口，适合 Python 用户进行 GPU 加速。&lt;/li&gt;
&lt;li&gt;MAGMA 支持混合 CPU 和 GPU 的矩阵运算，适合需要在多核 CPU 和 GPU 上并行执行的高性能任务。&lt;/li&gt;
&lt;li&gt;TensorFlow 和 PyTorch 虽然是机器学习框架，但也可以用于 GPU 上的高效矩阵运算。&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_6"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://maxima.sourceforge.io&lt;/li&gt;
&lt;li&gt;https://numpy.org/&lt;/li&gt;
&lt;li&gt;https://eigen.tuxfamily.org&lt;/li&gt;
&lt;li&gt;https://docs.opencv.org&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors&lt;/li&gt;
&lt;li&gt;https://octave.org/&lt;/li&gt;
&lt;li&gt;https://arma.sourceforge.net/&lt;/li&gt;
&lt;li&gt;https://bitbucket.org/blaze-lib/blaze&lt;/li&gt;
&lt;li&gt;https://octave-online.net/&lt;/li&gt;
&lt;li&gt;https://www.mycompiler.io/new/octave&lt;/li&gt;
&lt;li&gt;https://docs.cupy.dev/en/stable/&lt;/li&gt;
&lt;li&gt;https://icl.utk.edu/magma/&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>步进电机小记</title><link href="https://blog.debao.me/2024/08/notes-on-step-motors/" rel="alternate"></link><published>2024-08-15T15:36:00+08:00</published><updated>2024-08-15T15:36:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-08-15:/2024/08/notes-on-step-motors/</id><summary type="html">&lt;p&gt;步进电机是一种能够将电脉冲信号转换为精确角位移的电机。有三类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;永磁步进电机（Permanent Magnet Stepper Motor）：使用永久磁铁作为转子。扭 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;步进电机是一种能够将电脉冲信号转换为精确角位移的电机。有三类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;永磁步进电机（Permanent Magnet Stepper Motor）：使用永久磁铁作为转子。扭矩较大，适合低速应用。&lt;/li&gt;
&lt;li&gt;可变磁阻步进电机（Variable Reluctance Stepper Motor）：转子由软铁材料制成，没有永磁体。结构简单，成本低。&lt;/li&gt;
&lt;li&gt;混合式步进电机（Hybrid Synchronous Stepper Motor）：结合永磁和可变磁阻的优点。提供高精度和高扭矩，是最常用的类型。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以下主要关注混合式步进电机。&lt;/p&gt;
&lt;h2 id="_1"&gt;混合式步进电机&lt;/h2&gt;
&lt;p&gt;结构：&lt;/p&gt;
&lt;p&gt;&lt;img alt="step motor" src="https://blog.debao.me/images/motor/stepmotor.png"&gt;&lt;/p&gt;
&lt;p&gt;混合式步进电机的转子结构为两个导磁圆盘中间夹着一个永磁圆柱体轴向串在一起，两个导磁圆盘的外圆齿节距相同，其两个圆盘的齿错开1/2齿距安装，转子中圆柱永磁体沿轴向充磁，一段为N，另一端为S。&lt;/p&gt;
&lt;p&gt;对一个典型的2相步进电机：&lt;/p&gt;
&lt;p&gt;&lt;img alt="2phase angle" src="https://blog.debao.me/images/motor/stepmotor-2phase-angle.png"&gt;&lt;/p&gt;
&lt;h3 id="25"&gt;2相与5相&lt;/h3&gt;
&lt;p&gt;典型情况下，2相与5相步进电机，转子都是50个齿。2相电机，定子有8个磁极；5相电机，定子有10个磁极。&lt;/p&gt;
&lt;p&gt;&lt;img alt="2 v 5 step motor" src="https://blog.debao.me/images/motor/2-v-5-phase-stepper-motor-cutaway.jpg"&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;2相步进电机&lt;/th&gt;
&lt;th&gt;5相步进电机&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;结构&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;复杂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;成本&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;较高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;步距角&lt;/td&gt;
&lt;td&gt;1.8度（每步）&lt;/td&gt;
&lt;td&gt;0.72度（每步）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;扭矩输出&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;较高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;运行平滑度&lt;/td&gt;
&lt;td&gt;振动较大&lt;/td&gt;
&lt;td&gt;运行更平滑&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;控制电路&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;复杂&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_2"&gt;驱动模式&lt;/h3&gt;
&lt;p&gt;步进电机需要使用运动控制卡、驱动器进行控制。通过脉冲信号的数量和频率可控制位置和速度。&lt;/p&gt;
&lt;p&gt;&lt;img alt="stepmotor-drive" src="https://blog.debao.me/images/motor/stepmotor-2phase-pulses.png"&gt;&lt;/p&gt;
&lt;p&gt;对2相步进电机，驱动模式主要包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;单相驱动（Wave Drive）：每次只通电一个线圈。简单但扭矩较低。&lt;/li&gt;
&lt;li&gt;两相驱动（Full Step）：同时通电两个线圈。提供更高的扭矩。&lt;/li&gt;
&lt;li&gt;半步驱动（Half Step）：交替通电一个或两个线圈。提高分辨率，运行更平滑。&lt;/li&gt;
&lt;li&gt;微步驱动（Microstep）：将电流分为更小的步进。实现更高的精度和平滑度。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="stepmotor-drive" src="https://blog.debao.me/images/motor/stepmotor-drive.png"&gt;&lt;/p&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Stepper_motor&lt;/li&gt;
&lt;li&gt;https://www.moonsindustries.com/article/basic-structure-and-operating-principle-of-stepper-motor&lt;/li&gt;
&lt;li&gt;https://www.orientalmotor.com/stepper-motors/technology/2-phase-vs-5-phase-stepper-motors.html&lt;/li&gt;
&lt;li&gt;https://www.orientalmotor.com/stepper-motors/technology/stepper-motor-basics.html&lt;/li&gt;
&lt;li&gt;https://haokan.baidu.com/v?pd=wisenatural&amp;amp;vid=14005628814363889303&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>电机小记</title><link href="https://blog.debao.me/2024/08/notes-on-electric-motors/" rel="alternate"></link><published>2024-08-14T23:10:00+08:00</published><updated>2024-08-14T23:10:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-08-14:/2024/08/notes-on-electric-motors/</id><summary type="html">&lt;p&gt;电机（Electric Motor）是一种将电能转换成机械能的设备，也被称为马达，是Motor的音译。&lt;/p&gt;
&lt;h2 id="_1"&gt;一些术语？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;定子（Stator）：固定部分，包含绕组。&lt;/li&gt;
&lt;li&gt;转子（Rotor）：旋转部分，连 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;电机（Electric Motor）是一种将电能转换成机械能的设备，也被称为马达，是Motor的音译。&lt;/p&gt;
&lt;h2 id="_1"&gt;一些术语？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;定子（Stator）：固定部分，包含绕组。&lt;/li&gt;
&lt;li&gt;转子（Rotor）：旋转部分，连接负载。&lt;/li&gt;
&lt;li&gt;转矩（Torque）：旋转力。&lt;/li&gt;
&lt;li&gt;转速（Speed）：旋转速度，以RPM表示。&lt;/li&gt;
&lt;li&gt;反馈（Feedback）：监控电机状态的信号。&lt;/li&gt;
&lt;li&gt;编码器（Encoder）：提供位置或速度反馈的传感器。&lt;/li&gt;
&lt;li&gt;闭环控制（Closed-loop Control）：使用反馈调整输出。&lt;/li&gt;
&lt;li&gt;开环控制（Open-loop Control）：无反馈的控制方式。&lt;/li&gt;
&lt;li&gt;驱动器（Driver）：控制电机运行的设备。&lt;/li&gt;
&lt;li&gt;PWM（脉宽调制）：控制速度和转矩的技术。&lt;/li&gt;
&lt;li&gt;额定电压（Rated Voltage）：设计运行电压。&lt;/li&gt;
&lt;li&gt;额定电流（Rated Current）：额定负载下的电流。&lt;/li&gt;
&lt;li&gt;额定功率（Rated Power）：最大输出功率。&lt;/li&gt;
&lt;li&gt;启动转矩（Starting Torque）：启动时的转矩。&lt;/li&gt;
&lt;li&gt;转差（Slip）：转子转速与同步转速的差异。&lt;/li&gt;
&lt;li&gt;惯量（Inertia）：抵抗加速或减速的性质。&lt;/li&gt;
&lt;li&gt;电枢（Armature）：产生电磁力的部分。&lt;/li&gt;
&lt;li&gt;堵转电流（Stall Current）：转子阻止转动时的电流。&lt;/li&gt;
&lt;li&gt;换向器（Commutator）：反转电流方向的装置。&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;缩写&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PMSM：permanent-magnet synchronous motor&lt;/li&gt;
&lt;li&gt;BLDC：brushless DC electric motor&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;VFD：Variable-frequency drive&lt;/li&gt;
&lt;li&gt;FOC：Field-oriented control&lt;/li&gt;
&lt;li&gt;DTC：Direct torque control&lt;/li&gt;
&lt;li&gt;MPC：Model predictive control&lt;/li&gt;
&lt;li&gt;SVPWM：Space Vector Pulse Width Modulation&lt;/li&gt;
&lt;li&gt;PI：Proportional-integral&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;分类？&lt;/h2&gt;
&lt;p&gt;电机在生活中无处不在，种类繁多... 查查资料，简单整理一下&lt;/p&gt;
&lt;h3 id="_4"&gt;直流电机、交流电机&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;直流电机（DC motor）：直流电驱动的电机。常说的直流电机指代有刷电机（Brushed DC electric motor）。&lt;/li&gt;
&lt;li&gt;交流电机（AC motor）：交流电驱动的电机。交流电可以控制电流和磁场方向，可以不用电刷。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;广义的直流电机，可以包括：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;直流有刷电机&lt;/th&gt;
&lt;th&gt;直流无刷电机&lt;/th&gt;
&lt;th&gt;开关磁阻电机&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;结构&lt;/td&gt;
&lt;td&gt;有电刷和换向器&lt;/td&gt;
&lt;td&gt;无电刷，电子换向&lt;/td&gt;
&lt;td&gt;简单结构，无电刷&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;控制&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;复杂，需要控制器&lt;/td&gt;
&lt;td&gt;复杂，需要控制器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;维护&lt;/td&gt;
&lt;td&gt;需定期更换电刷&lt;/td&gt;
&lt;td&gt;低维护&lt;/td&gt;
&lt;td&gt;低维护&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;效率&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;中等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;噪音&lt;/td&gt;
&lt;td&gt;中等&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;较大&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;转子&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;td&gt;永磁体&lt;/td&gt;
&lt;td&gt;无磁体（软磁材料）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;定子&lt;/td&gt;
&lt;td&gt;永磁体或线圈&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;步进电机（stepper motor、step motor）是直流无刷电机的一种。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="_5"&gt;步进电机&lt;/h4&gt;
&lt;p&gt;步进电机采用开回路（open-loop)处理，不依赖出传感器或编码器，不需要位置检出和速度检出的回馈，可以脉冲信号进行运动。&lt;/p&gt;
&lt;p&gt;步进电机有三种，混合式比较常见。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;永磁步进电机（PM）&lt;/th&gt;
&lt;th&gt;反应式步进电机（VR）&lt;/th&gt;
&lt;th&gt;混合式步进电机（HB）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;特点&lt;/td&gt;
&lt;td&gt;使用永磁体，步距角较大&lt;/td&gt;
&lt;td&gt;无永久磁场，依靠磁阻变化&lt;/td&gt;
&lt;td&gt;结合永磁和反应式优点，精度高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;转子&lt;/td&gt;
&lt;td&gt;永磁体&lt;/td&gt;
&lt;td&gt;软铁材料&lt;/td&gt;
&lt;td&gt;永磁体与软铁组合&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;定子&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;精度&lt;/td&gt;
&lt;td&gt;中等&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;扭矩&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;较高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;复杂性&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;复杂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;应用&lt;/td&gt;
&lt;td&gt;低成本、简单应用&lt;/td&gt;
&lt;td&gt;精度较低，适合基本定位&lt;/td&gt;
&lt;td&gt;高精度、高性能应用&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;混合式步进电机有2相、3相、5相。其中2相电机步距角1.8°。&lt;/p&gt;
&lt;p&gt;&lt;img alt="step motor" src="https://blog.debao.me/images/motor/stepmotor.png"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;脉冲数决定了旋转角度，脉冲频率决定了旋转速度。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_6"&gt;同步电机、异步电机（感应电机）&lt;/h3&gt;
&lt;p&gt;同步电机（Synchronous Motor）和异步电机（Induction Motor）都是交流电机。它们都使用交流电源来运行，但在结构和工作原理上有所不同。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;同步电机&lt;/th&gt;
&lt;th&gt;异步电机（感应电机）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;转速&lt;/td&gt;
&lt;td&gt;与电源频率同步&lt;/td&gt;
&lt;td&gt;低于电源频率&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;效率&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;略低&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;结构&lt;/td&gt;
&lt;td&gt;需要外部励磁（永磁或电枢）&lt;/td&gt;
&lt;td&gt;无需外部励磁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;启动&lt;/td&gt;
&lt;td&gt;较复杂&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;转子&lt;/td&gt;
&lt;td&gt;永磁体或励磁绕组&lt;/td&gt;
&lt;td&gt;鼠笼式或绕线式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;定子&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;td&gt;缠绕线圈&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_7"&gt;单相电机、三相电机&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;单相电机&lt;/th&gt;
&lt;th&gt;三相电机&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;电源类型&lt;/td&gt;
&lt;td&gt;单相交流&lt;/td&gt;
&lt;td&gt;三相交流&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;结构&lt;/td&gt;
&lt;td&gt;简单&lt;/td&gt;
&lt;td&gt;复杂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;启动扭矩&lt;/td&gt;
&lt;td&gt;低，需要启动装置&lt;/td&gt;
&lt;td&gt;高，不需启动装置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;效率&lt;/td&gt;
&lt;td&gt;较低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;定子&lt;/td&gt;
&lt;td&gt;单相绕组&lt;/td&gt;
&lt;td&gt;三相绕组&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;转子&lt;/td&gt;
&lt;td&gt;鼠笼式&lt;/td&gt;
&lt;td&gt;鼠笼式或绕线式&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img alt="3phase motor" src="https://blog.debao.me/images/motor/motor-3phase.gif"&gt;&lt;/p&gt;
&lt;p&gt;根据转子结构不同，三相电机有：鼠笼式电机（Squirrel Cage Motor）和 绕线式（Wound Rotor Motor）&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;鼠笼式电机&lt;/th&gt;
&lt;th&gt;绕线式电机&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;结构&lt;/td&gt;
&lt;td&gt;转子由导条和短路环组成&lt;/td&gt;
&lt;td&gt;转子有绕组，连接滑环&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;维护&lt;/td&gt;
&lt;td&gt;维护方便，无需电刷&lt;/td&gt;
&lt;td&gt;需要滑环和电刷维护&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;启动特性&lt;/td&gt;
&lt;td&gt;启动电流大，转矩低&lt;/td&gt;
&lt;td&gt;启动转矩高，可调电阻&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;复杂性&lt;/td&gt;
&lt;td&gt;结构简单&lt;/td&gt;
&lt;td&gt;结构较复杂&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img alt="squirrel cage motor" src="https://blog.debao.me/images/motor/3motors_2.webp"&gt;&lt;/p&gt;
&lt;h3 id="_8"&gt;伺服电机&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;伺服电机（Servomotor、Servo）不是特定类别的电机，尽管“伺服电机”这一术语通常用于指适用于闭环控制系统的电机。伺服电机是一个电机系统，它包含电机、传感器和控制器，使伺服电机能够实现精确的闭环控制。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;编码器的使用是伺服电机的关键特征之一，但并非所有伺服电机都一定内置编码器，某些系统可能采用外部传感器。&lt;/p&gt;
&lt;p&gt;提到伺服电机，经常遇到一个名词：舵机。&lt;/p&gt;
&lt;h4 id="_9"&gt;舵机&lt;/h4&gt;
&lt;p&gt;“舵机” 其实是一个俗称，是玩航模、船模的人起的名字，因为这种电机常被用于舵面控制。舵机其实就是一个低端一点的伺服电机系统。舵机可以分为模拟舵机和数字舵机。&lt;/p&gt;
&lt;p&gt;舵机内部包含：一个小型直流电机，电位计，和一个控制电路。电机通过齿轮与控制轮相连，工作时，传入电信号，电机旋转时，电位计的电阻会发生变化，控制电路通过电阻变化来精确调节转动的角度，当输出轴角度位置恰好处于需要控制的位置时，电机停止转动。&lt;/p&gt;
&lt;p&gt;&lt;img alt="servo motor" src="https://blog.debao.me/images/motor/servomotor.png"&gt;&lt;/p&gt;
&lt;p&gt;舵机通常3根线：电源线，底线，控制信号线。如果控制信号线通过PWM进行控制，通过脉冲宽度（占空比）控制角度位置，脉冲宽度的变化变化控制运动速度。&lt;/p&gt;
&lt;h3 id="_10"&gt;永磁电机、励磁电机、感应电机&lt;/h3&gt;
&lt;p&gt;根据转子磁场产生方式和结构不同？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;永磁电机（Permanent Magnet Motor）：使用永久磁体。&lt;/li&gt;
&lt;li&gt;励磁电机（Electrically Excited Motor）：通过电流在绕组中产生磁场。&lt;/li&gt;
&lt;li&gt;感应电机（Induction Motor）：通过电磁感应产生磁场。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_11"&gt;直线电机、旋转电机&lt;/h3&gt;
&lt;p&gt;直线电机，也叫做线性电机（linear motor）是一种将&lt;strong&gt;电能&lt;/strong&gt;直接转换成&lt;strong&gt;直线运动机械能&lt;/strong&gt;而不需要任何中间转换机构的传动装置。不同于旋转电机，它不是产生扭矩（旋转），而是沿其长度产生直线力。它可以看成是一台旋转电机按径向剖开，并展成平面而成。&lt;/p&gt;
&lt;p&gt;&lt;img alt="Linear motor" src="https://blog.debao.me/images/motor/linearmotorprinzip.png"&gt;&lt;/p&gt;
&lt;p&gt;直线电机种类基本与旋转电机对应&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;直线电机种类&lt;/th&gt;
&lt;th&gt;对应旋转电机种类&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;直线感应电机（LIM）&lt;/td&gt;
&lt;td&gt;感应电机（IM）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;直线同步电机（LSM）&lt;/td&gt;
&lt;td&gt;同步电机（SM）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;直线开关磁阻电机（LSRM）&lt;/td&gt;
&lt;td&gt;开关磁阻电机（SRM）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;直线步进电机（LSM）&lt;/td&gt;
&lt;td&gt;步进电机（SM）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_12"&gt;压电马达（压电陶瓷电机）&lt;/h2&gt;
&lt;p&gt;压电马达（piezoelectric motor、piezo motor）是一种利用压电效应驱动的电机，通过电压改变压电材料的形状来产生运动。&lt;/p&gt;
&lt;p&gt;压电马达大致可以分为三大类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;共振马达（超声波驱动器），resonance-motors (ultrasonic drives)&lt;/li&gt;
&lt;li&gt;惯性马达（粘滑原理），inertia-motors (stick-slip principle)&lt;/li&gt;
&lt;li&gt;压电步行驱动器。piezo-walk drives&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_13"&gt;共振马达&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;通过高频电压在压电材料中产生超声波振动，利用共振效应放大振动幅度，增加驱动力。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;共振马达分为：行波马达和驻波马达。&lt;/p&gt;
&lt;h3 id="_14"&gt;惯性马达&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;惯性马达是一种利用压电效应和惯性原理进行运动的电机,通过快速的膨胀和收缩产生摩擦力，导致负载移动。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_15"&gt;压电步行马达&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;通过电压驱动压电材料，使其产生微小的机械运动。利用多个压电元件的协调动作，模拟步行方式推动负载。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="inchworm motor" src="https://blog.debao.me/images/motor/piezomotor_type_inchworm.gif"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="bimorph motor" src="https://blog.debao.me/images/motor/piezomotor_type_bimorph.gif"&gt;&lt;/p&gt;
&lt;h2 id="_16"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Electric_motor&lt;/li&gt;
&lt;li&gt;https://www.moonsindustries.com/article/basic-structure-and-operating-principle-of-stepper-motor&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Piezoelectric_motor&lt;/li&gt;
&lt;li&gt;https://www.pi-usa.us/en/tech-blog/overview-of-different-piezo-motor-design-principles&lt;/li&gt;
&lt;li&gt;https://www.163.com/dy/article/HEC3ISH505380ADU.html&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>Git 杂记</title><link href="https://blog.debao.me/2024/05/notes-on-git/" rel="alternate"></link><published>2024-05-31T22:00:00+08:00</published><updated>2024-05-31T22:00:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-05-31:/2024/05/notes-on-git/</id><summary type="html">&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;工作与个人配置 如何分开？&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#ssh-key"&gt;创建新的ssh key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#gitconfig-work"&gt;创建 ~/.gitconfig-work&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#gitconfig"&gt;修改 ~/.gitconfig&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;其他&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#master-vs-main"&gt;默认分支: master vs main ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowsgit-openssh"&gt;Windows版Git的 openssh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowsgitssl"&gt;Windows版Git的ssl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="_1"&gt;工作与个人配置 如何分开？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;考虑 …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;工作与个人配置 如何分开？&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#ssh-key"&gt;创建新的ssh key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#gitconfig-work"&gt;创建 ~/.gitconfig-work&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#gitconfig"&gt;修改 ~/.gitconfig&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;其他&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#master-vs-main"&gt;默认分支: master vs main ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowsgit-openssh"&gt;Windows版Git的 openssh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windowsgitssl"&gt;Windows版Git的ssl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="_1"&gt;工作与个人配置 如何分开？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;考虑一个场景：同一台电脑，既用于工作，又要用于个人事务，如何为其配置不同的email。如果这两个都同时位于github或gitlab上。又如何为其指定ssh的key？？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;假定 &lt;code&gt;E:/work&lt;/code&gt; 是为工作服务的，其他都是个人事务，那么只需要为work文件夹指定不同的配置即可：&lt;/p&gt;
&lt;h3 id="ssh-key"&gt;创建新的ssh key&lt;/h3&gt;
&lt;p&gt;执行命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh-keygen&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;work@example.com&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;提示输入文件名时，输入 &lt;code&gt;~/.ssh/id_work_rsa&lt;/code&gt;，以便于和默认key进行区分。&lt;/p&gt;
&lt;h3 id="gitconfig-work"&gt;创建 ~/.gitconfig-work&lt;/h3&gt;
&lt;p&gt;配置用户名，email，以及key，
内容如下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[user]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Work&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;email&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;work@example.com&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;[core]&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="na"&gt;sshCommand&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ssh -i ~/.ssh/id_work_rsa&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="gitconfig"&gt;修改 ~/.gitconfig&lt;/h3&gt;
&lt;p&gt;当仓库位于work文件夹时，使用工作配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[includeIf &amp;quot;gitdir:E:/Work/&amp;quot;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;path&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;.gitconfig-work&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意：gitdir指定的路径区分大小写（即使在Windows下）。忽略大小写用&lt;code&gt;gitdir/i&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_2"&gt;其他&lt;/h3&gt;
&lt;p&gt;完成类似任务，除了这种做法，gitlab文档中还给出了其他做法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/ee/user/ssh.html#use-different-accounts-on-a-single-gitlab-instance"&gt;https://docs.gitlab.com/ee/user/ssh.html#use-different-accounts-on-a-single-gitlab-instance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="master-vs-main"&gt;默认分支: master vs main ?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;好多年没在Github上创建新代码仓库，也没有更新公司内的gerrit2和gitlab。2年前就突然注意到，天天看到的master分支，竟已经被main取代...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;再仔细看看，变更竟发生在4年前：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;时间&lt;/th&gt;
&lt;th&gt;事件&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2020年6月&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;GitHub 宣布将把默认分支名改为 &lt;code&gt;main&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2020年7月&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Git 2.28.0 版本发布，允许用户通过配置选项自定义默认分支&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2020年10月&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;GitHub 新建的仓库默认分支改为 &lt;code&gt;main&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2020年10月&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;GitLab 宣布从 2021 年起新建仓库使用 &lt;code&gt;main&lt;/code&gt; 作为默认分支&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2021年&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;其他git平台和工具（如 Bitbucket、Azure DevOps）开始支持 &lt;code&gt;main&lt;/code&gt; 作为默认分支。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;在此之前：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;时间&lt;/th&gt;
&lt;th&gt;事件&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2014年&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Django 宣布将 &lt;code&gt;master-slave&lt;/code&gt; 替换为 &lt;code&gt;leader-follower&lt;/code&gt; 或 &lt;code&gt;primary-replica&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2017年&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis 将 &lt;code&gt;master-slave&lt;/code&gt; 替换为 &lt;code&gt;primary-replica&lt;/code&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2020年&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Black Lives Matter 运动引发对种族不公正和系统性种族主义的广泛讨论，推动科技行业重新审视用词。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;好吧，更名原因竟然和&lt;strong&gt;主人&lt;/strong&gt;与 &lt;strong&gt;奴隶&lt;/strong&gt;有关。尽管main与master短也是一个可以说的优势。&lt;/p&gt;
&lt;h2 id="windowsgit-openssh"&gt;Windows版Git的 openssh&lt;/h2&gt;
&lt;p&gt;在 Git for Windows 2.33.1 版本中，捆绑的 OpenSSH 升级到了 8.8p1 版本。OpenSSH 8.8 默认禁用了使用 SHA-1 算法的 ssh-rsa 密钥。&lt;/p&gt;
&lt;p&gt;如果不幸，某些老的网站还在用的旧版的 RSA 密钥，并且默认使用 ssh-rsa 签名算法，&lt;strong&gt; 这会造成连接失败&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;如果不能使用新算法生成密钥对，需要修改ssh配置文件&lt;code&gt;~/.ssh/config&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host *
    PubkeyAcceptedAlgorithms +ssh-rsa
    HostkeyAlgorithms +ssh-rsa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者只针对特定网站&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host codereview.debao.me
   Port 29418
   HostkeyAlgorithms +ssh-rsa
   PubkeyAcceptedAlgorithms +ssh-rsa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Git for Windows 版本&lt;/th&gt;
&lt;th&gt;OpenSSH 版本&lt;/th&gt;
&lt;th&gt;关键变化&lt;/th&gt;
&lt;th&gt;发布时间&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2.20.1&lt;/td&gt;
&lt;td&gt;OpenSSH 7.9p1&lt;/td&gt;
&lt;td&gt;初始版本&lt;/td&gt;
&lt;td&gt;2018年12月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.23.0&lt;/td&gt;
&lt;td&gt;OpenSSH 8.0p1&lt;/td&gt;
&lt;td&gt;更新到 8.0 版本&lt;/td&gt;
&lt;td&gt;2019年8月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.30.0&lt;/td&gt;
&lt;td&gt;OpenSSH 8.4p1&lt;/td&gt;
&lt;td&gt;更新到 8.4 版本&lt;/td&gt;
&lt;td&gt;2021年1月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.33.1&lt;/td&gt;
&lt;td&gt;OpenSSH 8.8p1&lt;/td&gt;
&lt;td&gt;禁用了使用 &lt;code&gt;ssh-rsa&lt;/code&gt; 的 RSA 签名&lt;/td&gt;
&lt;td&gt;2021年9月&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="windowsgitssl"&gt;Windows版Git的ssl&lt;/h2&gt;
&lt;p&gt;简单记录一下&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Git for Windows 版本&lt;/th&gt;
&lt;th&gt;OpenSSL 版本&lt;/th&gt;
&lt;th&gt;关键变化&lt;/th&gt;
&lt;th&gt;发布时间&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2.20.1&lt;/td&gt;
&lt;td&gt;OpenSSL 1.0.2p&lt;/td&gt;
&lt;td&gt;使用 OpenSSL 1.0.2 系列&lt;/td&gt;
&lt;td&gt;2018年12月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.23.0&lt;/td&gt;
&lt;td&gt;OpenSSL 1.1.1c&lt;/td&gt;
&lt;td&gt;升级到 OpenSSL 1.1.1 系列&lt;/td&gt;
&lt;td&gt;2019年8月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.30.0&lt;/td&gt;
&lt;td&gt;OpenSSL 1.1.1i&lt;/td&gt;
&lt;td&gt;持续更新 1.1.1 系列&lt;/td&gt;
&lt;td&gt;2021年1月&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.42.0&lt;/td&gt;
&lt;td&gt;OpenSSL 3.0.11&lt;/td&gt;
&lt;td&gt;升级到 OpenSSL 3.0 系列&lt;/td&gt;
&lt;td&gt;2023年9月&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/github/renaming"&gt;github/renaming: Guidance for changing the default branch name for GitHub repositories&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.openssh.com/txt/release-8.8"&gt;https://www.openssh.com/txt/release-8.8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://git-scm.com/docs/git-config#_conditional_includes"&gt;https://git-scm.com/docs/git-config#_conditional_includes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://itnext.io/how-to-handle-multiple-ssh-keys-with-gitlab-27f7cf2e77ed"&gt;https://itnext.io/how-to-handle-multiple-ssh-keys-with-gitlab-27f7cf2e77ed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/ee/user/ssh.html#use-different-accounts-on-a-single-gitlab-instance"&gt;https://docs.gitlab.com/ee/user/ssh.html#use-different-accounts-on-a-single-gitlab-instance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="Git"></category></entry><entry><title>禅道配置与使用小记</title><link href="https://blog.debao.me/2024/05/notes-on-zentao/" rel="alternate"></link><published>2024-05-28T21:13:00+08:00</published><updated>2024-05-28T21:13:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-05-28:/2024/05/notes-on-zentao/</id><summary type="html">&lt;p&gt;准备试试禅道，简单记录一下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意，本文提到的禅道，指代禅道 开源版18.11。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;安装&lt;/h2&gt;
&lt;p&gt;禅道有提供Linux下的一键安装包，也有用于Debian和Ubuntu的Deb包。&lt;/p&gt;
&lt;p&gt;安装后,apache的配置文件位于：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;/opt/zbox …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;准备试试禅道，简单记录一下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意，本文提到的禅道，指代禅道 开源版18.11。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;安装&lt;/h2&gt;
&lt;p&gt;禅道有提供Linux下的一键安装包，也有用于Debian和Ubuntu的Deb包。&lt;/p&gt;
&lt;p&gt;安装后,apache的配置文件位于：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;/opt/zbox/etc/apache/httpd.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在该文件内，可以修改监听地址等，比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Listen 127.0.0.1:81
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;以便于配置nginx作为反向代理。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;php配置文件位于&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;/opt/zbox/etc/php/php.ini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在该文件内，通过&lt;code&gt;log_errors&lt;/code&gt;设置成on，可以启用日志记录。路径在&lt;code&gt;/opt/zbox/logs/php_error_log&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;另外，配置文件&lt;code&gt;/opt/zbox/app/zentao/config/my.php&lt;/code&gt;中 &lt;code&gt;$config-&amp;gt;debug&lt;/code&gt;，也用于配置日志。日志目录位于 &lt;code&gt;/opt/zbox/app/zentao/tmp/log&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;一些命令&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;启动：&lt;code&gt;/opt/zbox/zbox/start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止：&lt;code&gt;/opt/zbox/zbox stop&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;重启：&lt;code&gt;/opt/zbox/zbox restart&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;检查：&lt;code&gt;/opt/zbox/zbox check&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ZBOX是禅道官方在linux下面运行的apache, php, mysql一键安装包。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_2"&gt;插件学习&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;禅道的扩展系统，从16.5版本起，其行了比较大的重构。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;感觉上，对插件开发挺不友好的，官方文档似乎很不全，第三方插件少，可能我没找到原因&lt;/p&gt;
&lt;h3 id="_3"&gt;基本机制&lt;/h3&gt;
&lt;p&gt;禅道有一个个的模块组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;project&lt;/li&gt;
&lt;li&gt;user&lt;/li&gt;
&lt;li&gt;admin&lt;/li&gt;
&lt;li&gt;product&lt;/li&gt;
&lt;li&gt;job&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;每个模块又按照mvc进行划分M V C三层和辅助config、lang、css、js：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;control：控制层&lt;/li&gt;
&lt;li&gt;model：模型层&lt;/li&gt;
&lt;li&gt;view：视图层&lt;/li&gt;
&lt;li&gt;config：配置&lt;/li&gt;
&lt;li&gt;lang：语言&lt;/li&gt;
&lt;li&gt;css：样式&lt;/li&gt;
&lt;li&gt;js：脚本&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;对已有模块扩展&lt;/strong&gt;（直接在对应ext目录下）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;extension/custom/user/ext/control/{method1.php, method2.php, ...} 
extension/custom/user/ext/model/{extend1.php, extend2.php, ...}
extension/custom/user/ext/view/{method1.html.php, method2.html.php, ...}
extension/custom/user/ext/config/{config1.php, config2.php, ...}
extension/custom/user/ext/lang/zh-cn/{lang1.php, lang2.php, ...}
extension/custom/user/ext/lang/en/{lang1.php, lang2.php, ...}
extension/custom/user/ext/css/method1/{1.css, 2.css, ...}
extension/custom/user/ext/js/method1/{1.js, 2.js, ...}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;对新的模块&lt;/strong&gt;，都在extension目录下。包含ext外的基本文件，和ext下的的扩展文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;extension/custom/oa/control.php
extension/custom/oa/model.php
extension/custom/oa/view/{metho1.html.php, method2.html.php, ...}
extension/custom/oa/config/config.php
extension/custom/oa/css/{method1.css, method2.css, common.css, ...}
extension/custom/oa/js/{method1.js, method2.js, common.js, ...}

extension/custom/oa/ext/control/{method1.php, method2.php, ...} 
extension/custom/oa/ext/model/{extend1.php, extend2.php, ...}
extension/custom/oa/ext/view/{method1.html.php, method2.html.php, ...}
extension/custom/oa/ext/config/{config1.php, config2.php, ...}
extension/custom/oa/ext/lang/zh-cn/{lang1.php, lang2.php, ...}
extension/custom/oa/ext/lang/en/{lang1.php, lang2.php, ...}
extension/custom/oa/ext/css/method1/{1.css, 2.css, ...}
extension/custom/oa/ext/js/method1/{1.js, 2.js, ...}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_4"&gt;打包规范&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;需要一个doc目录。不知道怎么回事，越看越看不懂，特别是releases...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;doc目录下面包含了插件的配置信息，按照语言进行存储，比如英文版本的，存为en.yaml，中文zh-cn.yaml&lt;/p&gt;
&lt;p&gt;插件的配置文件采用yaml格式，里面包含了插件的基本信息以及历次版本的发布信息。&lt;/p&gt;
&lt;h3 id="_5"&gt;新建模块&lt;/h3&gt;
&lt;p&gt;按照zentaoPHP框架结构，在插件目录(&lt;code&gt;extension/custom&lt;/code&gt;)下创建子目录，比如ldap，然后，按照预定，分别实现对应的control，model，view，css，js，lang等概念。&lt;/p&gt;
&lt;p&gt;比如ldap插件，在&lt;code&gt;extension/custom/ldap&lt;/code&gt;目录下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
├── config.php
├── control.php
├── css
│   └── setting.css
├── js
│   └── setting.js
├── lang
│   ├── en.php
│   ├── zh-cn.php
│   └── zh-tw.php
├── model.php
└── view
    └── setting.html.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;对比官网说法，这个插件的config.php位置似乎有问题，应该在 config/config.php 下？，不过官方extension之外的标准模块，config.php都是直接用的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="model"&gt;对model扩展&lt;/h3&gt;
&lt;p&gt;前面的ldap模块，对user的model层进行了扩展，&lt;code&gt;extension/custom/user&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
└── ext
    ├── config
    │   └── config.php
    └── model
        ├── identify.php
        └── updatePassword.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;禅道有多种方法扩展model层。此处是通过在 &lt;strong&gt;ext/model/&lt;/strong&gt; 目录下面建立相应的 &lt;strong&gt;以方法为名的文件&lt;/strong&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;禅道框架在执行的时候，会自动将扩展目录下面的identify.php里面的代码，替换misc/model.php中的identify方法的代码。如果是新增的方法，则会追加到misc/model.php的代码中，最终生成一个合并之后的model类文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_6"&gt;对语言扩展&lt;/h3&gt;
&lt;p&gt;语言的扩展文件存放在&lt;strong&gt;ext/lang/&lt;/strong&gt; 目录下面。按照不同的语言建立相应的目录，比如zh-cn下面，可以有多个文件，zentaoPHP框架会 &lt;strong&gt;自动加载该目录下面所有以.php结尾的文件&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;比如 Ldap，对admin模块进行扩展，在&lt;code&gt;extension/custom/admin&lt;/code&gt;下:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
└── ext
    └── lang
        ├── de
        │   └── ldapauth.php
        ├── en
        │   └── ldapauth.php
        ├── fr
        │   └── ldapauth.php
        ├── zh-cn
        │   └── ldapauth.php
        └── zh-tw
            └── ldapauth.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_7"&gt;对配置扩展&lt;/h3&gt;
&lt;p&gt;每个模块配置文件的扩展文件存放在 &lt;strong&gt;ext/config/&lt;/strong&gt; 目录下面，可以有多个文件，zentaoPHP框架会&lt;strong&gt;自动加载该目录下面以config开头的.php文件&lt;/strong&gt;。这样不同的扩展可以有自己的配置项，彼此之间不会冲突。&lt;/p&gt;
&lt;p&gt;在前面的 `extension/custom/user``下，可以配置的扩展（文件名无所谓）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
└── ext
    ├── config
    │   └── config.php
    └── model
        ├── identify.php
        └── updatePasswo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_8"&gt;配置&lt;/h2&gt;
&lt;h3 id="nginx"&gt;nginx 配置&lt;/h3&gt;
&lt;p&gt;可以使用nginx作为反向代理，以便于引入ssl支持等，简单配置一下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# server configuration for gitlab&lt;/span&gt;
&lt;span class="k"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;listen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;443&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;server_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;projects.debao.me&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;ssl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;ssl_certificate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/etc/ssl/projects.debao.me.cer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;ssl_certificate_key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/etc/ssl/projects.debao.me.key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;location&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;https://projects.debao.me/zentao/user-login-L3plbnRhby8=.html&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kn"&gt;location&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;proxy_pass&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;http://127.0.0.1:81&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="c1"&gt;# Allow for large file uploads&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;client_max_body_size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;Host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$http_host&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;X-Real-IP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$remote_addr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;X-Forwarded-For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$proxy_add_x_forwarded_for&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="kn"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;X-Forwarded-Proto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$scheme&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：配置行 &lt;code&gt;proxy_set_header X-Forwarded-Proto $scheme;&lt;/code&gt;很关键，不然用户在https模式下无法登录。&lt;/p&gt;
&lt;p&gt;这是因为在文件&lt;code&gt;/opt/zbox/zbox/app/zentao/framework/base/router.class.php&lt;/code&gt;中，有如下处理CSRF的代码。网上不少人遇到的https无法登录的问题，给出的方案就是：直接注释掉它们。这也...太简单粗暴了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;        /* Change for CSRF. */&lt;/span&gt;
&lt;span class="x"&gt;        if($this-&amp;gt;config-&amp;gt;framework-&amp;gt;filterCSRF)&lt;/span&gt;
&lt;span class="x"&gt;        {&lt;/span&gt;
&lt;span class="x"&gt;            $httpType = (isset($_SERVER[&amp;quot;HTTPS&amp;quot;]) &amp;amp;&amp;amp; $_SERVER[&amp;quot;HTTPS&amp;quot;] == &amp;#39;on&amp;#39;) ? &amp;#39;https&amp;#39; : &amp;#39;http&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;            if(isset($_SERVER[&amp;#39;HTTP_X_FORWARDED_PROTO&amp;#39;]) and strtolower($_SERVER[&amp;#39;HTTP_X_FORWARDED_PROTO&amp;#39;]) == &amp;#39;https&amp;#39;) $httpType = &amp;#39;https&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;            if(isset($_SERVER[&amp;#39;REQUEST_SCHEME&amp;#39;]) and strtolower($_SERVER[&amp;#39;REQUEST_SCHEME&amp;#39;]) == &amp;#39;https&amp;#39;) $httpType = &amp;#39;https&amp;#39;;&lt;/span&gt;

&lt;span class="x"&gt;            $httpHost = zget($_SERVER, &amp;#39;HTTP_HOST&amp;#39;, &amp;#39;&amp;#39;);&lt;/span&gt;
&lt;span class="x"&gt;            $apiMode  = (defined(&amp;#39;RUN_MODE&amp;#39;) &amp;amp;&amp;amp; RUN_MODE == &amp;#39;api&amp;#39;) || isset($_GET[$this-&amp;gt;config-&amp;gt;sessionVar]);&lt;/span&gt;
&lt;span class="x"&gt;            if(!$apiMode &amp;amp;&amp;amp; (empty($httpHost) or strpos($this-&amp;gt;server-&amp;gt;http_referer, &amp;quot;$httpType://$httpHost&amp;quot;) !== 0)) $_FILES = $_POST = array();&lt;/span&gt;
&lt;span class="x"&gt;        }&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;另外&lt;code&gt;location = /&lt;/code&gt;配置行，只为了直接跳转到登录页面，而不是停留在默认的广告界面，在手动点击登录开源版本。&lt;/p&gt;
&lt;p&gt;除此之外，在局域网内，可以设置根据主机名或者非ssl端口，直接进行跳转到ssl端口（配置文件加入如下若干行）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kn"&gt;listen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kn"&gt;server_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;projects&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;projects.debao.me&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kn"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;https://projects.debao.me&lt;/span&gt;&lt;span class="nv"&gt;$request_uri&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kn"&gt;listen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;443&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kn"&gt;server_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;projects&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;https://projects.debao.me&lt;/span&gt;&lt;span class="nv"&gt;$request_uri&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="ldap"&gt;Ldap配置&lt;/h3&gt;
&lt;p&gt;禅道官方没有给开源版提供Ldap支持。官网有如下一个链接，只支持到禅道7.3版本，早过时了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.zentao.net/extension-viewrelease-326-front.html"&gt;禅道开源版LDAP插件 - 版本详情 - 禅道开源项目管理软件 (zentao.net)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在Github有不少用于禅道的LDAP插件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/twoBxx/zentao-ldap-plugin"&gt;twoBxx/zentao-ldap-plugin: Zentaopms LDAP plugin (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/luzi2000/zentao-ldap"&gt;luzi2000/zentao-ldap: 根据前人总结的ldap工程改编而来，支持17.5版本 (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/DYSDF/zentao-ldap"&gt;DYSDF/zentao-ldap (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/iboxpay/ldap"&gt;iboxpay/ldap: 禅道开源版 LDAP插件 (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/shynome/zentao-ldap"&gt;shynome/zentao-ldap: 禅道 zentao 11.5 可用的 ldap 插件 (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Mohamed-ncib19/Zentao-LDAP-plugin"&gt;Mohamed-ncib19/Zentao-LDAP-plugin (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;东西最多，但一眼看去，感觉都不太靠谱...，&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="1"&gt;尝试1&lt;/h4&gt;
&lt;p&gt;先试试第一个 twoBxx/zentao-ldap-plugin，下载后，做成zip压缩包 ldap.zip (不包含顶层目录）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;插件安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在界面等登陆后，通过 &lt;code&gt;后台-&amp;gt;插件管理&lt;/code&gt; 调出插件管理界面。&lt;/p&gt;
&lt;p&gt;选中前面的 ldap.zip，强制安装（因为版本不完全匹配）。&lt;/p&gt;
&lt;p&gt;安装后到 &lt;code&gt;后台-&amp;gt;系统设置-&amp;gt;LDAP&lt;/code&gt;页面进行配置&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LDAP配置&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;选项&lt;/th&gt;
&lt;th&gt;示例值&lt;/th&gt;
&lt;th&gt;必填&lt;/th&gt;
&lt;th&gt;默认值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;基础配置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;协议&lt;/td&gt;
&lt;td&gt;ldap://，ldaps://&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;ldap://&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LDAP服务器&lt;/td&gt;
&lt;td&gt;ldap.test.com&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;端口&lt;/td&gt;
&lt;td&gt;389，636&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;searchDN&lt;/td&gt;
&lt;td&gt;ou=users,dc=test,dc=com&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BindDN&lt;/td&gt;
&lt;td&gt;cn=admin,dc=test,dc=com&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BindDN 密码&lt;/td&gt;
&lt;td&gt;ou=users,dc=test,dc=com&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;属性配置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;账号字段&lt;/td&gt;
&lt;td&gt;uid/sAMAccountName&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;uid&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;默认用户组&lt;/td&gt;
&lt;td&gt;下拉选择&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;管理员&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mail&lt;/td&gt;
&lt;td&gt;mail&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;mail&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;姓名字段&lt;/td&gt;
&lt;td&gt;cn&lt;/td&gt;
&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;cn&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;手机号&lt;/td&gt;
&lt;td&gt;mobile&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;mobile&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;界面修改的配置，写入到文件&lt;code&gt;extension/custom/ldap/config.php&lt;/code&gt; 中。&lt;/p&gt;
&lt;p&gt;保存操作位于&lt;code&gt;extension/custom/ldap/control.php&lt;/code&gt;中&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意，由于ldap_get_entries() 返回的数组中所有键名都是小写的，所以uid设置samaccountname也应该都用小写字符。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;问题：ldap连接测试不过&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;找到一个bug&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;extension/custom/ldap/control.php 文件内，sssList在lang中而不是config中：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt; public function test()&lt;/span&gt;
&lt;span class="x"&gt; {&lt;/span&gt;
&lt;span class="x"&gt;      $fh = $this-&amp;gt;config-&amp;gt;ldap-&amp;gt;sslList[$this-&amp;gt;post-&amp;gt;ssl] . $this-&amp;gt;post-&amp;gt;host . &amp;#39;:&amp;#39; .$this-    &amp;gt;post-&amp;gt;port;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;改为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;fh&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;sslList&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;非tsl下的连接测试通过。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题：任然无法同步账户&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;使用ldap和389端口，ldap连接没问题。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但是Ldap用户还是无法登录，可能和用的 uid 取的 'sAMAccountName' 有关（改写全小写samaccountname）没有改善。&lt;/p&gt;
&lt;p&gt;排查extension/custom/ldap/model.php，由于AD中不是所有用户都配置了email和mobile字段，需要确保这两个字段不为null：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;        for (; $i &amp;lt; $ldapUsers[&amp;#39;count&amp;#39;]; $i++) {&lt;/span&gt;
&lt;span class="x"&gt;            $user-&amp;gt;account = $ldapUsers[$i][$config-&amp;gt;uid][0];&lt;/span&gt;
&lt;span class="x"&gt;            $user-&amp;gt;realname = $ldapUsers[$i][$config-&amp;gt;name][0];&lt;/span&gt;
&lt;span class="x"&gt;            // 确保 mobile 字段不为 NULL&lt;/span&gt;
&lt;span class="x"&gt;            $user-&amp;gt;email = !empty($ldapUsers[$i][$config-&amp;gt;mail][0]) ? $ldapUsers[$i][$config-&amp;gt;mail][0] : $user-&amp;gt;realname . &amp;quot;@debao.me&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;            $user-&amp;gt;mobile = !empty($ldapUsers[$i][$config-&amp;gt;mobile][0]) ? $ldapUsers[$i][$config-&amp;gt;mobile][0] : &amp;quot;12345678&amp;quot;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;手动同步账户通过。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题：LDAP账户依然无法登录&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;需要排查 &lt;code&gt;extension/custom/user/ext/model/identify.php&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题：tls&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;但是ldaps和 636默认还是不行。可能和证书不受信任有关。用ldapsearch进行测试。&lt;/p&gt;
&lt;p&gt;尽管忽略证书校验，使用ldapsearch没问题&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ldapsearch -H ldaps://dc1.debao.me:636 -x -D &amp;quot;cn=admin,dc=debao,dc=me&amp;quot; -w your_password -b &amp;quot;dc=debao,dc=me&amp;quot; -o &amp;quot;tls_reqcert=never&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="2"&gt;尝试2&lt;/h4&gt;
&lt;p&gt;试试 luzi2000/zentao-ldap&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;很顺利&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;插件安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在界面等登陆后，通过 &lt;code&gt;后台-&amp;gt;插件管理&lt;/code&gt; 调出插件管理界面。&lt;/p&gt;
&lt;p&gt;选中前面的源码对应压缩包 zentao-ldap.zip，强制安装（因为版本不完全匹配）。&lt;/p&gt;
&lt;p&gt;安装后到 &lt;code&gt;后台-&amp;gt;系统设置-&amp;gt;LDAP&lt;/code&gt;页面进行配置&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;配置&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;选项&lt;/th&gt;
&lt;th&gt;示例值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;基础配置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LDAP服务器&lt;/td&gt;
&lt;td&gt;ldap.test.com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BindDN&lt;/td&gt;
&lt;td&gt;cn=admin,dc=test,dc=com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;BindDN 密码&lt;/td&gt;
&lt;td&gt;ou=users,dc=test,dc=com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;属性配置&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;baseDN&lt;/td&gt;
&lt;td&gt;ou=users,dc=test,dc=com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Serach Filter&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;账号字段&lt;/td&gt;
&lt;td&gt;samaccountname&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mail&lt;/td&gt;
&lt;td&gt;mail&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;姓名字段&lt;/td&gt;
&lt;td&gt;cn&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;没有tls以及端口设置，功能弱一些，但装完作为demo可以用&lt;/p&gt;
&lt;h2 id="_9"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://devel.easycorp.cn/book/extension-new/intro-52.html"&gt;zentaoPHP二次开发简介 - 禅道二次开发 - 易软天创开发者中心 (easycorp.cn)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.zentao.net/blog/zentao-expansion-82385.html"&gt;禅道扩展机制 - 技术笔记 - 禅道开源项目管理软件 (zentao.net)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.zentao.net/book/zentaopmshelp/144.html"&gt;禅道项目管理软件打包规范1.1版本 - 禅道二次开发手册 - 禅道开源项目管理软件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/easysoft/zentaopms&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category></entry><entry><title>GitLab与DevOps小记</title><link href="https://blog.debao.me/2024/05/notes-on-gitlab-devops/" rel="alternate"></link><published>2024-05-27T21:13:00+08:00</published><updated>2024-05-27T21:13:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-05-27:/2024/05/notes-on-gitlab-devops/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;接前面&lt;a href="https://blog.debao.me/2023/11/notes-on-gitlab-and-gerrit/"&gt;Gitlab与Gerrit&lt;/a&gt;，了解一下DevOps...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="devops"&gt;DevOps&lt;/h2&gt;
&lt;p&gt;DevOps是Development和Operations两个词的组合。它的英文发音是 /de'vɒps/。&lt;/p&gt;
&lt;p&gt;&lt;img alt="DevOps-Life-Cycle" src="https://blog.debao.me/images/devops/DevOps-Life-Cycle.svg"&gt;&lt;/p&gt;
&lt;p&gt;有两个词经常会伴随着DevOps出现，那就是CI和CD。CI是Continuous Integration（持续集成），而CD对应多个英文，Continuous Delivery（持续交付）或Continuous …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;接前面&lt;a href="https://blog.debao.me/2023/11/notes-on-gitlab-and-gerrit/"&gt;Gitlab与Gerrit&lt;/a&gt;，了解一下DevOps...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="devops"&gt;DevOps&lt;/h2&gt;
&lt;p&gt;DevOps是Development和Operations两个词的组合。它的英文发音是 /de'vɒps/。&lt;/p&gt;
&lt;p&gt;&lt;img alt="DevOps-Life-Cycle" src="https://blog.debao.me/images/devops/DevOps-Life-Cycle.svg"&gt;&lt;/p&gt;
&lt;p&gt;有两个词经常会伴随着DevOps出现，那就是CI和CD。CI是Continuous Integration（持续集成），而CD对应多个英文，Continuous Delivery（持续交付）或Continuous Deployment（持续部署）。&lt;/p&gt;
&lt;h3 id="devops_1"&gt;DevOps与瀑布和敏捷&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特点&lt;/th&gt;
&lt;th&gt;瀑布模型&lt;/th&gt;
&lt;th&gt;敏捷方法&lt;/th&gt;
&lt;th&gt;DevOps&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;开发过程&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;线性顺序&lt;/td&gt;
&lt;td&gt;迭代和增量&lt;/td&gt;
&lt;td&gt;持续集成和持续交付&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;灵活性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;用户参与&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;低&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;td&gt;高&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;文档&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;详细&lt;/td&gt;
&lt;td&gt;简略&lt;/td&gt;
&lt;td&gt;自动化文档&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;交付周期&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;长&lt;/td&gt;
&lt;td&gt;短&lt;/td&gt;
&lt;td&gt;短&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;风险管理&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;集中&lt;/td&gt;
&lt;td&gt;分散&lt;/td&gt;
&lt;td&gt;分散&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;团队协作&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;开发和运维分离&lt;/td&gt;
&lt;td&gt;开发团队协作&lt;/td&gt;
&lt;td&gt;开发和运维一体化&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;适用项目&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;需求明确且稳定的小型项目&lt;/td&gt;
&lt;td&gt;需求可能变化的中大型项目&lt;/td&gt;
&lt;td&gt;需要快速交付和高稳定性的项目&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;与瀑布式开发和敏捷开发相比，将开发（Development）和运维（Operations）紧密结合，强调协作和自动化。DevOps贯穿了软件全生命周期，而不仅限于开发阶段。&lt;/p&gt;
&lt;p&gt;&lt;img alt="devops-agile-devops" src="https://blog.debao.me/images/devops/devops-agile-devops.jpg"&gt;&lt;/p&gt;
&lt;p&gt;图片来源： x.com&lt;/p&gt;
&lt;p&gt;&lt;img alt="devops-agile-devops-2" src="https://blog.debao.me/images/devops/devops-agile-devops-2.jpg"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：&lt;a href="https://www.linkedin.com/pulse/agile-devops-prem-bangole/"&gt;To Agile or To DevOps | LinkedIn&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="devops_2"&gt;DevOps工具&lt;/h3&gt;
&lt;p&gt;DevOps各阶段，涉及到的工具太多了...&lt;/p&gt;
&lt;p&gt;&lt;img alt="DevOps-Tools" src="https://blog.debao.me/images/devops/DevOps-Tools.svg"&gt;&lt;/p&gt;
&lt;h2 id="gitlab"&gt;Gitlab&lt;/h2&gt;
&lt;p&gt;&lt;img alt="gitlab-ci-workflow.png" src="https://blog.debao.me/images/devops/gitlab-ci-workflow.png"&gt;Gitlab 开发于2011年，2012年开始开发 Gitlab-CI。从Gitlab 8.0版本开始，CI集成进Gitlab中（2015年）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/ee/topics/build_your_application.html"&gt;Use CI/CD to build your application | GitLab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/runner/install/"&gt;Install GitLab Runner | GitLab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/ee/development/cicd/"&gt;CI/CD development guidelines | GitLab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://about.gitlab.com/releases/2015/09/22/gitlab-8-0-released/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于Jenkins与GitLab CI，两个都免费可以本地部署，前者发力早，后者官方出品与Gitlab集成更好。&lt;/p&gt;
&lt;h2 id="github"&gt;Github&lt;/h2&gt;
&lt;p&gt;Github 在2018年被微软收购后，发布了github actions！！！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/features/actions"&gt;Features • GitHub Actions · GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://zhuanlan.zhihu.com/p/647970282&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/QbitAI/article/details/99366085"&gt;GitHub免费支持CI/CD了，开发测试部署高度自动化，支持各种语言，网友：第三方凉凉...-CSDN博客&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在Github Actions之前，2017年有人汇总github中10大 CI工具  &lt;a href="https://github.blog/2017-11-07-github-welcomes-all-ci-tools/"&gt;GitHub welcomes all CI tools - The GitHub Blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;前四位是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Travis CI&lt;/li&gt;
&lt;li&gt;Circle CI&lt;/li&gt;
&lt;li&gt;Jenkins&lt;/li&gt;
&lt;li&gt;AppVeyor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Travis CI 已经没有免费版本（只有刚注册第一个月有免费的点数）。&lt;/p&gt;
&lt;p&gt;Circle CI每个月有免费的分钟数&lt;/p&gt;
&lt;p&gt;Jenkins 免费，需要自行部署&lt;/p&gt;
&lt;p&gt;AppVeyor 不了解&lt;/p&gt;
&lt;h2 id="_1"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/DevOps"&gt;DevOps - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.openxcell.com/devops/"&gt;DevOps - The Complete Guide for 2023 (openxcell.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://zhuanlan.zhihu.com/p/91371659"&gt;DevOps到底是什么意思？ - 知乎 (zhihu.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="Git"></category></entry><entry><title>Markdown小记</title><link href="https://blog.debao.me/2024/05/notes-on-markdown/" rel="alternate"></link><published>2024-05-07T23:19:00+08:00</published><updated>2024-05-07T23:19:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2024-05-07:/2024/05/notes-on-markdown/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;用了10多年Markdown，却一直没有正经地看过它。每次换edit后，查看之前写的东西，总有些格式问题。各个编辑器介绍自己支持的一堆东西，又 …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;用了10多年Markdown，却一直没有正经地看过它。每次换edit后，查看之前写的东西，总有些格式问题。各个编辑器介绍自己支持的一堆东西，又看不懂...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="markdown"&gt;什么是Markdown？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Markdown 语法主要受 Swartz's 于 2002年创建的 atx 影响。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Markdown 是一种用于编写结构化文档的纯文本格式。它由 John Gruber 开发（得到 Aaron Swartz 的帮助），并于 2004 年以语法描述和一个 Perl 脚本（Markdown.pl）的形式发布，该脚本用于将 Markdown 转换成 HTML。&lt;/p&gt;
&lt;p&gt;在接下来的十年中，许多语言中开发了数十种实现方式。其中一些扩展了原始 Markdown 语法，增加了脚注、表格和其他文档元素的约定。像 Reddit、StackOverflow 和 GitHub 这样的网站有数百万人使用 Markdown。Markdown 还开始被用于网络之外的地方，用于编写书籍、文章、幻灯片、信件和讲义。&lt;/p&gt;
&lt;p&gt;Markdown 与许多其他轻量级标记语法相比的特点是其可读性。正如 Gruber 所写：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Markdown 格式语法的首要设计目标是尽可能提高可读性。其理念是，Markdown 格式的文档应当能够以纯文本的形式发布，而看上去不像是用标签或格式指令标记过。（http://daringfireball.net/projects/markdown/）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="markup-markdownup-down"&gt;Markup 与 Markdown（up ↑ 与 down ↓ )？&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Mark&lt;strong&gt;up&lt;/strong&gt;（标记语言）指的是一种包含“标记”的编程语言，用于处理和定义文本的结构与样式。最常见的标记语言是 HTML（HyperText Markup Language），用于创建和设计网页。&lt;/li&gt;
&lt;li&gt;Mark&lt;strong&gt;down&lt;/strong&gt; 是一种轻量级标记语言，用简单的标记语法来格式化文本。它的目标是使文档易于阅读、易于编写。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="commonmarkgfmflfmmmd"&gt;CommonMark、GFM、FLFM、MMD、... 都是什么鬼？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;John Gruber 对 Markdown 语法的规范描述，很多地方不够严谨（有二义性），对于各种Markdown工具的实现，是一个很大的挑战。而且Markdown.pl脚本，本身也有很多bug，可参考性不够。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="commonmark"&gt;CommonMark&lt;/h3&gt;
&lt;p&gt;因为原始的 Markdown 语法由 John Gruber 设计时留下了一些模糊和不一致的地方，不同的解释器可能会对同样的 Markdown 文本产生不同的解析结果。这种差异可能导致文档在不同平台上的显示效果不同，从而影响内容的一致性和专业性。&lt;/p&gt;
&lt;p&gt;CommonMark 试图成为 Markdown 语法的标准化版本，通过提供统一的规范来帮助开发者和内容创作者避免兼容性问题。它不是要替代原始的 Markdown，而是希望通过解决其局限性来增强 Markdown 的实用性和可靠性。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;因为Gruber不同意这个标准化的工作，使用Markdown字样，最终&lt;a href="https://blog.codinghorror.com/standard-markdown-is-now-common-markdown/"&gt;Standard Markdown is now Common Markdown &lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CommonMark 是一种开源的 Markdown 规范，旨在解决不同 Markdown 解释器之间存在的语法不一致问题。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;明确和一致：CommonMark 提供了一套严格定义的规范，明确了 Markdown 语法的每一个方面，减少了解释的歧义。&lt;/li&gt;
&lt;li&gt;跨平台兼容：它旨在确保 Markdown 文档在任何支持 CommonMark 的平台上都能有一致的解析和显示效果。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="gfm-github-flavored-markdown"&gt;GFM (GitHub Flavored Markdown)&lt;/h3&gt;
&lt;p&gt;GitHub Flavored Markdown，通常简称为 GFM，是目前 GitHub.com 和 GitHub Enterprise 上支持用户内容的 Markdown 方言。&lt;/p&gt;
&lt;p&gt;这个基于 CommonMark 规范的正式规范定义了这种方言的语法和语义。&lt;/p&gt;
&lt;p&gt;GFM 是 CommonMark 的严格超集。所有在 GitHub 用户内容中支持但未在原始 CommonMark 规范中指定的功能，因此被称为扩展，并作为此类突出显示。&lt;/p&gt;
&lt;p&gt;它的解析库是&lt;code&gt;cmark-gfm&lt;/code&gt;，采用C编写，有各种语言的绑定：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/github/cmark-gfm&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="glfmgitlab-flavored-markdown"&gt;GLFM(Gitlab Flavored Markdown)&lt;/h3&gt;
&lt;p&gt;GitLab Flavored Markdown 包括以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于 CommonMark 规范的核心 Markdown 功能。&lt;/li&gt;
&lt;li&gt;来自 GitHub Flavored Markdown 的扩展。&lt;/li&gt;
&lt;li&gt;专为 GitLab 制作的扩展。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="mmdmultimarkdown"&gt;MMD（MultiMarkdown)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;MultiMarkdown 是在 CommonMark 出现之前开发的，并不完全符合 CommonMark 标准。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;MultiMarkdown (MMD) 是 Markdown 的一个扩展，它增加了对表格、脚注、交叉引用等复杂内容的支持，使其更适用于学术写作和专业出版。MultiMarkdown 旨在保持 Markdown 的简洁性和易用性，同时增加额外的功能以处理更复杂的文档结构。&lt;/p&gt;
&lt;p&gt;MultiMarkdown 特别适合需要编写结构复杂文档的场景，如学术论文、书籍、研究报告等。由于其对多种输出格式的支持，它也非常适合需要将内容转换成特定格式的出版流程。&lt;/p&gt;
&lt;h3 id="php-markdown-extra"&gt;PHP Markdown Extra&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;PHP Markdown Extra 基于早期的 Markdown 实现，并且加入了一些额外的功能，如表格、定义列表和脚注等。并不符合 CommonMark 规范&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;PHP Markdown Extra 是一个基于 PHP 的 Markdown 解析器，它在原始 Markdown 实现的基础上添加了一些额外的功能。这个扩展由 Michel Fortin 开发，旨在增加一些对专业和学术写作非常有用的特性，同时保持 Markdown 的简洁和易用性。&lt;/p&gt;
&lt;h2 id="_1"&gt;编辑器与实现&lt;/h2&gt;
&lt;p&gt;缺乏统一标准，实现各个不同...&lt;/p&gt;
&lt;h3 id="_2"&gt;编辑器&lt;/h3&gt;
&lt;p&gt;因为缺少同一个的规范，以及各种各样的扩展的存在。各个编辑器对Markdown支持也各不相同...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VSCode（有多种扩展，Office Viewer）&lt;/li&gt;
&lt;li&gt;MarkText&lt;/li&gt;
&lt;li&gt;Typora（转正收费软件后，基本不考虑了）&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_3"&gt;实现&lt;/h3&gt;
&lt;h4 id="markdown-it"&gt;markdown-it&lt;/h4&gt;
&lt;p&gt;markdown-it 是基于 JavaScript 的 Markdown 解析器。它完全兼容 CommonMark 规范，并且支持扩展 Markdown 语法（如 GFM、表格、脚注等）。&lt;/p&gt;
&lt;p&gt;它在python下的移植叫做：&lt;code&gt;markdown-it-py&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="python-markdown"&gt;Python-markdown&lt;/h4&gt;
&lt;p&gt;这不是一个 CommonMark 的实现；也不是在尝试成为一个！Python-Markdown 是在 CommonMark 规范发布很久之前开发的，并且一直（大部分时间）遵循原始参考实现的语法规则和行为。没有做出任何调整来适应 CommonMark 所建议的变更。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;markdown-katex 支持 katex&lt;/li&gt;
&lt;li&gt;md-mermaid 支持 mermaid&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python-markdown的生态极为丰富。别的实现有的功能，多数都能找到对应扩展。&lt;/p&gt;
&lt;h4 id="kramdown"&gt;kramdown&lt;/h4&gt;
&lt;p&gt;Kramdown 是一个免费的、纯 Ruby 编写的 Markdown 解析器和转换器。它被设计用来解析某些 Markdown 方言，并将其转换成多种输出格式，比如 HTML。&lt;/p&gt;
&lt;h2 id="_4"&gt;扩展&lt;/h2&gt;
&lt;p&gt;混战的markdown有各种扩展。关注一下 katex 和 mermaid 等&lt;/p&gt;
&lt;h3 id="metadatafront-matter"&gt;metadata、front matter？？&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;python-markdown&lt;/code&gt;支持在markdown文件头部有类似下面的meta信息，文档中叫做&lt;a href="https://python-markdown.github.io/extensions/meta_data/"&gt;meta data&lt;/a&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Title&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;My&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Document&lt;/span&gt;
&lt;span class="n"&gt;Summary&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;brief&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;my&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;document&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Authors&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Waylan&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Limberg&lt;/span&gt;
&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="n"&gt;John&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Doe&lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;October&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;
&lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;

&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;paragraph&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;document&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;MultiMarkdown&lt;/code&gt;支持在markdown文件头部有类似下面的meta信息，文档中叫做&lt;a href="http://fletcher.github.io/MultiMarkdown-5/metadata.html"&gt;meta data&lt;/a&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Title&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Sample&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MultiMarkdown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Document&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="n"&gt;Author&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;Fletcher&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Penney&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;February&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2011&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="n"&gt;Comment&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comment&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;intended&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;demonstrate&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;metadata&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;spans&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;multiple&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;yet&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;treated&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;single&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;
&lt;span class="n"&gt;CSS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;standard&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;css&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;jekyll支持文件头部包含&lt;a href="https://jekyllrb.com/docs/front-matter/"&gt;YAML front matter block&lt;/a&gt;。github的pages也使用&lt;a href="https://docs.github.com/en/contributing/writing-for-github-docs/using-yaml-frontmatter"&gt;front matter&lt;/a&gt;，注意格式&lt;code&gt;---&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;layout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;post&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Blogging Like a Hacker&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;gitlab也支持&lt;a href="https://handbook.gitlab.com/docs/frontmatter/"&gt;front matter&lt;/a&gt;，但似乎没明确它是不是yaml：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Page&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;title&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;other_attribute&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;see&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;other&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;sections&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;for&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;what&amp;#39;s&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;valid&amp;quot;&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;pdandoc中有所谓的&lt;a href="https://pandoc.org/MANUAL.html#extension-pandoc_title_block"&gt;title block&lt;/a&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;% title&lt;/span&gt;
&lt;span class="c"&gt;% author(s) (separated by semicolons)&lt;/span&gt;
&lt;span class="c"&gt;% date&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;pandoc也支持&lt;a href="https://pandoc.org/MANUAL.html#extension-yaml_metadata_block"&gt;yaml metadata block&lt;/a&gt;，注意格式，以&lt;code&gt;---&lt;/code&gt;开头，且用&lt;code&gt;---&lt;/code&gt;或&lt;code&gt;...&lt;/code&gt;表示该block的结束：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;---
title: The document title
author:
- name: Author One
  affiliation: University of Somewhere
- name: Author Two
  affiliation: University of Nowhere
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;markdown-it生态下，各种扩展更是层出不穷，基本上以yaml为主。有的要求三个或以上&lt;code&gt;-&lt;/code&gt;开头或结尾，有的要求&lt;code&gt;---&lt;/code&gt;开头，用&lt;code&gt;---&lt;/code&gt;或&lt;code&gt;...&lt;/code&gt;结尾&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;valid-front-matter&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="katex"&gt;Katex&lt;/h3&gt;
&lt;p&gt;在MarkDown中添加公式支持，也是&lt;strong&gt;一团混战&lt;/strong&gt;：&lt;a href="https://github.com/cben/mathdown/wiki/math-in-markdown"&gt;Math in MarkDown · cben/mathdown Wiki · GitHub&lt;/a&gt;，只能挑感兴趣的简单看看。&lt;/p&gt;
&lt;p&gt;KaTeX 是一个快速的数学排版库，它可以在网页上渲染高质量的数学公式。KaTeX 是由 Khan Academy 开发的，它的主要目的是为了在网页上快速渲染数学公式，以改善用户体验。&lt;/p&gt;
&lt;p&gt;KaTeX 的主要特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;速度快：KaTeX 是目前已知的最快的数学排版库之一，能够几乎即时地渲染数学公式&lt;/li&gt;
&lt;li&gt;自渲染：KaTeX 不依赖于任何外部服务或插件，它在用户的浏览器中直接渲染公式。&lt;/li&gt;
&lt;li&gt;易于使用：只需将 KaTeX 的 JavaScript 和 CSS 文件包含在你的网页中，就可以开始渲染数学公式了。&lt;/li&gt;
&lt;li&gt;高质量的排版：KaTeX 生成的数学公式外观精美，支持高分辨率显示。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="mathjax"&gt;与MathJax对比&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;KaTeX&lt;/th&gt;
&lt;th&gt;MathJax&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;渲染速度&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;非常快，适合需要快速渲染的场景&lt;/td&gt;
&lt;td&gt;较慢，尤其是在处理复杂公式时&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;服务器依赖&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;无需服务器支持，完全在客户端运行&lt;/td&gt;
&lt;td&gt;通常在客户端运行，但也可以配置服务器端渲染&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;易用性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;简单，引入 CSS 和 JavaScript 即可使用&lt;/td&gt;
&lt;td&gt;配置较复杂，但提供丰富的自定义选项&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LaTeX 兼容性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;支持的 LaTeX 命令较少&lt;/strong&gt;，主要是基本和常用命令&lt;/td&gt;
&lt;td&gt;支持广泛的 LaTeX 命令和功能，包括复杂宏和扩展&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;浏览器兼容性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;较好，特别是在现代浏览器中&lt;/td&gt;
&lt;td&gt;非常好，包括对老旧浏览器的支持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;交互性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;较少的交互性支持&lt;/td&gt;
&lt;td&gt;强大的交互性支持，包括可点击的公式等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;文档和社区支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;文档清晰，社区活跃但相对较小&lt;/td&gt;
&lt;td&gt;详尽的文档和庞大的用户社区&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="gitlab"&gt;Gitlab支持&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;Gitlab 支持katex。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;行内公式：需要放置在美元符号和反引号构成的分隔符之间(&lt;code&gt;$`...`$&lt;/code&gt;)或者放置到美元符号之间 (&lt;code&gt;$...$&lt;/code&gt;) 。&lt;/p&gt;
&lt;p&gt;独立公式：放置到两个美元符号构成的分隔符之间(&lt;code&gt;$$...$$&lt;/code&gt;)，或者声明为 &lt;code&gt;math&lt;/code&gt;的代码块中。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Marktext默认不支持math代码块的写法，但是可以通过 &lt;code&gt;preferences -&amp;gt; Markdown-&amp;gt; "GitLab compatibility"&lt;/code&gt;选项打开【但是打开之后，Marktext的typewriter模式下又会自动把识别出的math转成 &lt;code&gt;$$...$$&lt;/code&gt;写法，挺不好玩的】。另外，即使打开，(&lt;code&gt;$`...`$&lt;/code&gt;)写法仍然不支持！！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="python-markdown_1"&gt;python-markdown支持&lt;/h4&gt;
&lt;p&gt;python-markdown通过插件 &lt;code&gt;markdown-katex&lt;/code&gt;来支持katex。它支持的Gitlab使用的如下语法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;行内公式：需要放置在美元符号和反引号构成的分隔符之间(&lt;code&gt;$`...`$&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;独立公式：放置到声明为 &lt;code&gt;math&lt;/code&gt;的代码块中。比如：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;标记如下代码为 &lt;code&gt;math&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;f(x) = \int_{-\infty}^\infty
    \hat f(\xi)\,e^{2 \pi i \xi x}
    \,d\xi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;将会：&lt;/p&gt;
&lt;div class="math display"&gt;
f(x) = \int_{-\infty}^\infty
    \hat f(\xi)\,e^{2 \pi i \xi x}
    \,d\xi
&lt;/div&gt;

&lt;h3 id="mermaid"&gt;图表 mermaid&lt;/h3&gt;
&lt;p&gt;Mermaid 允许开发者和文档作者通过简洁的文本描述来生成图表和可视化表示，如流程图、序列图、甘特图等。它是专为简化在 Markdown 文件和网页中创建复杂图表的过程而设计的。&lt;/p&gt;
&lt;p&gt;标记如下代码为mermaid&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;graph&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;将会&lt;/p&gt;
&lt;div class="mermaid"&gt;
graph TD;
    A --&gt; B;
    A --&gt; C;
    B --&gt; D;
    C --&gt; D;
&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意对比PlainUML。PlainUML是一个工具，允许用户使用纯文本语言来创建图表。它支持多种图表类型，包括序列图、用例图、类图、活动图、组件图、状态图等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;python中的markdown有对merimad的扩展支持&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/markdown-mermaidjs/&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://daringfireball.net/projects/markdown/syntax"&gt;Daring Fireball: Markdown Syntax Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.github.com/gfm/"&gt;GitHub Flavored Markdown Spec&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/ee/user/markdown.html"&gt;GitLab Flavored Markdown (GLFM) | GitLab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://spec.commonmark.org/&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Markdown"&gt;Markdown - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kramdown.gettalong.org/syntax.html"&gt;Syntax | kramdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rawgit.com/fletcher/MultiMarkdown-6-Syntax-Guide/master/index.html"&gt;MultiMarkdown v6 Syntax Guide (rawgit.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://michelf.ca/projects/php-markdown/extra/"&gt;PHP Markdown Extra (michelf.ca)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/markdown-it/markdown-it&lt;/li&gt;
&lt;li&gt;https://github.com/executablebooks/markdown-it-py&lt;/li&gt;
&lt;li&gt;https://github.com/github/cmark-gfm&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.aaronsw.com/2002/atx/intro.html"&gt;atx, the true structured text format (aaronsw.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/Vanessa219/vditor&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.markdownguide.org/tools/mark-text/"&gt;MarkText Markdown Reference | Markdown Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mermaid.js.org/syntax/flowchart.html"&gt;Flowcharts Syntax | Mermaid&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/cben/mathdown/wiki/math-in-markdown"&gt;Math in MarkDown · cben/mathdown Wiki · GitHub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="module"&gt;
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
&lt;/script&gt;</content><category term="Tools"></category><category term="pelican"></category><category term="markdown"></category><category term="katex"></category></entry><entry><title>非对称加密RSA小记</title><link href="https://blog.debao.me/2023/12/notes-on-asymmetric-encryption-rsa/" rel="alternate"></link><published>2023-12-13T22:04:00+08:00</published><updated>2023-12-13T22:04:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-12-13:/2023/12/notes-on-asymmetric-encryption-rsa/</id><summary type="html">&lt;p&gt;&lt;strong&gt;RSA加密算法&lt;/strong&gt;是一种非对称加密算法（public-key cryptosystem）。它是由 罗纳德·李维斯特（Ron Rivest）、阿迪·萨莫尔（Adi Shamir）和 伦纳德·阿德曼（Leonard Adleman）在1977年一起提出的。当时他们三人都 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;RSA加密算法&lt;/strong&gt;是一种非对称加密算法（public-key cryptosystem）。它是由 罗纳德·李维斯特（Ron Rivest）、阿迪·萨莫尔（Adi Shamir）和 伦纳德·阿德曼（Leonard Adleman）在1977年一起提出的。当时他们三人都在MIT工作。RSA 是他们三人姓氏开头字母拼成的。RSA算法包括四个步骤：密钥生成、密钥分发、加密和解密。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;非对称公钥-私钥密码系统的想法由 Whitfield Diffie 和 Martin Hellman 提出，他们于 1976 年发表了这个概念。在这之前，所有的加密方法都是同一种模式——对称加密算法（Symmetric-key algorithm）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="rsa"&gt;RSA 原理&lt;/h2&gt;
&lt;p&gt;RSA 背后的基本原理是观察到找到三个非常大的正整数 e、d 和 n 是可行的，这样对所有整数 m（0 ≤ m &amp;lt; n）进行模幂运算：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(m**e)**d ≡ m (mod n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;其中，≡ 表示模同余（modular congruence)。同除以&lt;code&gt;n&lt;/code&gt;时，&lt;code&gt;(m**e)**d&lt;/code&gt;与&lt;code&gt;m&lt;/code&gt;有相同的余数。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;公钥由整数 n 和 e 表示&lt;/li&gt;
&lt;li&gt;私钥由整数 d 表示（解密过程中也会使用 n，也可视为私钥的一部分）&lt;/li&gt;
&lt;li&gt;m 代表消息&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RSA的安全性在于：已知公钥n和e，难以推导出私钥d。&lt;/p&gt;
&lt;p&gt;注意：尽管通常将公钥e用于加密，私钥d用于解密。数学上，d和e的顺序完全是可以交换的：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(m**d)**e ≡ m (mod n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="key"&gt;Key生成&lt;/h2&gt;
&lt;h3 id="nd-e"&gt;生成n、d、和 e&lt;/h3&gt;
&lt;h4 id="1-p-q"&gt;1. 选择两个大质数 p 和 q&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;为了使分解更加困难，p和q应该随机选择，都很大并且有很大的差异。选择它们的标准方法是：&lt;strong&gt;选择随机整数并使用质性测试&lt;/strong&gt;，直到找到两个质数。&lt;/li&gt;
&lt;li&gt;p 和 q 应该保密。 &lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-n-pq"&gt;2. 计算 n = pq&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;n 用作公钥和私钥的模数。 它的长度通常以位表示，即&lt;strong&gt;密钥长度&lt;/strong&gt;。常说的RSA 1024、2048、4096就是这个值的二进制位数。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;n 作为公钥的一部分发布。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-n"&gt;3. 计算 λ(n)&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;早期的RSA的文章中，用的φ(p)，而不是 λ(n)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;λ 是Carmichael's totient function 函数。它和 Euler totient function 有如下关系：&lt;/p&gt;
&lt;p&gt;&lt;img alt="carmichael-function" src="https://blog.debao.me/images/carmichael-function.svg"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果两个正整数，除了1之外，没有其他公因子，这两个数就是互质关系（coprime)。不是质数的两个数可以是互质关系，比如21和8。欧拉函数φ(n)用于表示，对于正整数n，在小于等于n的正整数中，有多少个与n构成互质关系。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为 n = pq，所以 &lt;code&gt;λ(n) = lcm(λ(p), λ(q))&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;因为 p 和 q 是质数，所以&lt;code&gt;λ(p) = φ(p) = p − 1&lt;/code&gt;，&lt;code&gt;λ(q ) = q − 1&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;λ(n) = lcm(p − 1, q − 1)。lcm可以通过欧几里德算法计算，因为lcm(a,b)=|ab|/gcd(a,b)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;λ(n) 是保密的。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;lcm：Least common multiple（最小公倍数）&lt;/p&gt;
&lt;p&gt;gcd：Greatest common divisor（最大公约数）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="4-e"&gt;4. 选择一个整数 e&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;早期的RSA文章，都是选择d，而后计算e。但现在主流的实现，都是选择e，而后计算d。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;e的选择需要满足： 2 &amp;lt; e &amp;lt; λ(n) 且 gcd(e, λ(n)) = 1； 也就是说，e 和 λ(n) 互质。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;e 具有较短的位长度和较小的汉明权重，可以实现更高效的加密 – 最常用的 e 值为 216 + 1 = 65537。e 的最小（也是最快）可能值为 3，但如此小的值 e 已被证明在某些设置中不太安全。&lt;/li&gt;
&lt;li&gt;e 作为公钥的一部分发布。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-d"&gt;5. 确定 d&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; d ≡  e^(-1) (mod λ(n))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;d 是 e 模 λ(n) 的模乘逆。求解 d 方程 &lt;code&gt;de ≡ 1 (mod λ(n))&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;d 作为私钥指数保密。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;公钥由模数 n 和公共（或加密）指数 e 组成。 私钥由私有（或解密）指数 d 组成，必须保密。 p、q 和 λ(n) 也必须保密，因为它们可用于计算 d。 事实上，在计算 d 后它们都可以被丢弃。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;n已知，如果能够分解n，那么p和q就能被计算出来，进而找到d。破解RSA的难点在于n的因数分解，对于大整数的因数分解，目前没有高效的算法。&lt;/p&gt;
&lt;h3 id="_1"&gt;例子&lt;/h3&gt;
&lt;p&gt;生成Key，全程涉及6个数字：p、q、n、lam(n)、e、d。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;

&lt;span class="c1"&gt;# 1 选择两个素数p,q&lt;/span&gt;
&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;61&lt;/span&gt;
&lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;

&lt;span class="c1"&gt;# 2 计算n=p*q, 结果 3233&lt;/span&gt;
&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;

&lt;span class="c1"&gt;# 3 计算lam(n)=lcm((p-1), (q-1)), 结果 780&lt;/span&gt;
&lt;span class="n"&gt;lam_n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lcm&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# 4 选择一个整数e, 1&amp;lt;e&amp;lt;lam(n), 且e与lam(n)互质&lt;/span&gt;
&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt;

&lt;span class="c1"&gt;# 5 计算d, 使得e*d=1(mod lam(n)), 结果 413&lt;/span&gt;
&lt;span class="c1"&gt;#   考虑 e*d = 1+k*lam(n), k 为任意正整数&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;lam_n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;lam_n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;
        &lt;span class="k"&gt;break&lt;/span&gt;

&lt;span class="c1"&gt;# 6 公钥为(n,e), 私钥为(n,d)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;公钥为(n,e): (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;私钥为(n,d): (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;结果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;公钥为(n,e): (3233,17)
私钥为(n,d): (3233,413)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;使用上面的公钥和私钥，加密解密&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;65&lt;/span&gt;
&lt;span class="c1"&gt;# 加密，结果 2790&lt;/span&gt;
&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3233&lt;/span&gt;
&lt;span class="c1"&gt;# 解密&lt;/span&gt;
&lt;span class="n"&gt;m2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="mi"&gt;413&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3233&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="openssl-key"&gt;OpenSSL 查看key内容&lt;/h3&gt;
&lt;p&gt;可以使用openssl命令查看一个&lt;strong&gt;rsa公钥文件&lt;/strong&gt;的内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-pubin&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa_2048.pub&lt;span class="w"&gt; &lt;/span&gt;-text
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;输出如下（包含Modulus：n 和 Exponent：e）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Public&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Key&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Modulus&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;a7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;e5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;68&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;Exponent&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;65537&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x10001&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;writing&lt;/span&gt; &lt;span class="n"&gt;RSA&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;PUBLIC&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;span class="n"&gt;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Wk4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RZTlV2Wp28mMlzG&lt;/span&gt;
&lt;span class="p"&gt;......&lt;/span&gt;
&lt;span class="n"&gt;bwIDAQAB&lt;/span&gt;
&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;END&lt;/span&gt; &lt;span class="n"&gt;PUBLIC&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;也可以使用openssl命令查看一个&lt;strong&gt;rsa私钥文件&lt;/strong&gt;的内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa_2048.key&lt;span class="w"&gt; &lt;/span&gt;-text
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;私钥中，除了前面提到的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;prime1：p&lt;/li&gt;
&lt;li&gt;prime2：q&lt;/li&gt;
&lt;li&gt;modulus：N = p * q&lt;/li&gt;
&lt;li&gt;publicExponent：e&lt;/li&gt;
&lt;li&gt;privateExponent：d&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有另外三个值（这三个值有助于更高效地执行解密操作）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;exponent1：&lt;code&gt;d (mod p-1)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;exponent2：&lt;code&gt;d (mod q-1)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;coefficient：&lt;code&gt;q^(-1) (mod p)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体输出如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Private&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Key&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;primes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;modulus&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;a7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;e5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;68&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;publicExponent&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;65537&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x10001&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;privateExponent&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;e4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="n"&gt;f8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;a9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;a5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;a4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;da&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;bd&lt;/span&gt;
&lt;span class="n"&gt;prime1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;71&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ee&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;.......&lt;/span&gt;
    &lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dc&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;74&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d5&lt;/span&gt;
&lt;span class="n"&gt;prime2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;e7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;cf&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;57&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;bd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;
&lt;span class="n"&gt;exponent1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;85&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ff&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;eb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;
&lt;span class="n"&gt;exponent2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;87&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;f2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;
&lt;span class="n"&gt;coefficient&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;86&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;97&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ac&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;68&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p"&gt;......&lt;/span&gt;
    &lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;de&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt;
&lt;span class="n"&gt;writing&lt;/span&gt; &lt;span class="n"&gt;RSA&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;PRIVATE&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;span class="n"&gt;MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDZaTj9FlOVXZan&lt;/span&gt;
&lt;span class="p"&gt;......&lt;/span&gt;
&lt;span class="n"&gt;pX6lk6dw5kSVHFHeE75w3UxAKQ&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;
&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;END&lt;/span&gt; &lt;span class="n"&gt;PRIVATE&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="rfc3447"&gt;RFC3447&lt;/h3&gt;
&lt;p&gt;公钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;A&lt;/span&gt;&lt;span class="m m-Double"&gt;.1.1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;RSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;syntax&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;An&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;RSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;should&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;represented&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ASN&lt;/span&gt;&lt;span class="m m-Double"&gt;.1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;RSAPublicKey&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nx"&gt;RSAPublicKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;modulus&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;n&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;publicExponent&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;私钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;A&lt;/span&gt;&lt;span class="m m-Double"&gt;.1.2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;RSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;syntax&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;An&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;RSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;should&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;represented&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ASN&lt;/span&gt;&lt;span class="m m-Double"&gt;.1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;RSAPrivateKey&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nx"&gt;RSAPrivateKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;version&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nx"&gt;Version&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;modulus&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;n&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;publicExponent&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;privateExponent&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;d&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;prime1&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;p&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;prime2&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;q&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;exponent1&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;exponent2&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;q&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;coefficient&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="nx"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;inverse&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;q&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;p&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nx"&gt;otherPrimeInfos&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;OtherPrimeInfos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;OPTIONAL&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_2"&gt;填充&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;RSA的短明文可导致密文容易被攻击。给明文填充伪数据可以给攻击制造困难。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OpenSSL给出如下选项。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;RSA_PKCS1_PADDING&lt;/code&gt;，填充至少11字节&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RSA_NO_PADDING&lt;/code&gt; ，明文前面填充0，如果明文开头有0，解密后会被当做填充去掉&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RSA_PKCS1_OAEP_PADDING&lt;/code&gt; ，填充至少41字节，(只用于加密和解密)。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RSA_X931_PADDING&lt;/code&gt;（只用于 签名）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RSA_PKCS1_PSS_PADDING&lt;/code&gt;（只用于 签名和验签）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RSA_PKCS1_WITH_TLS_PADDING&lt;/code&gt;（只用于解密，TLS RSA的ClientKeyExchange消息）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;微软.Net中给出：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RSAEncryptionPaddingMode&lt;ul&gt;
&lt;li&gt;Oaep：推荐用于新程序&lt;/li&gt;
&lt;li&gt;Pkcs1：PKCS#1 v1.5. 兼容现有程序&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;RSASignaturePaddingMode &lt;ul&gt;
&lt;li&gt;Pkcs1：PKCS#1 v1.5 兼容现有程序&lt;/li&gt;
&lt;li&gt;Pss： 推荐用于新程序&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pkcs1pkcs1-v15"&gt;PKCS1（PKCS#1 v1.5)&lt;/h3&gt;
&lt;p&gt;PKCS#1 标准的早期版本（最高版本 1.5）， 主要用于跟老应用的兼容。&lt;/p&gt;
&lt;p&gt;消息M的长度(mLen)至少比RSA模数n的长度(k)要短11。因为要保证随机非零填充内容PS的长度至少为8。&lt;/p&gt;
&lt;p&gt;对于加密操作，填充格式如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;EM = 0x00 || 0x02 || PS || 0x00 || M
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对于签名操作，填充如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;EM = 0x00 || 0x01 || PS || 0x00 || T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;在 Crypto 1998 上，Bleichenbacher 表明该版本容易受到实际的自适应选择密文攻击。&lt;/p&gt;
&lt;p&gt;任何新应用程序都应使用 OAEP，并且应尽可能替换 PKCS#1 v1.5 填充。对签名处理要考虑概率签名方案 (RSA-PSS)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="oaep"&gt;OAEP&lt;/h3&gt;
&lt;p&gt;OAEP：&lt;strong&gt;Optimal Asymmetric Encryption Padding&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OAEP填充模式对于原文长度要求：&lt;code&gt;原文长度 &amp;lt;= 密钥模长 - (2 * 原文的摘要值长度) - 2&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;常见摘要值的长度（当用SHA-1时，原文比模长要短至少41字节）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SHA-1:      20字节&lt;/li&gt;
&lt;li&gt;SHA-256:  32字节&lt;/li&gt;
&lt;li&gt;SHA-384:  48字节&lt;/li&gt;
&lt;li&gt;SHA-512:  64字节&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="rsa-oaep-padding" src="https://blog.debao.me/images/rsa-oaep-padding.png"&gt;&lt;/p&gt;
&lt;h4 id="mgf"&gt;MGF&lt;/h4&gt;
&lt;p&gt;MGF：Mask Generation function&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;类似于哈希函数，但不同于哈希函数的输出大小固定，MGF的输出长度是可变的。&lt;/li&gt;
&lt;li&gt;接受任意长度的输入，可给出任意长度的输出&lt;/li&gt;
&lt;li&gt;同样的输入，输出结果是确定的&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pss"&gt;PSS&lt;/h3&gt;
&lt;p&gt;PSS：&lt;strong&gt;Probabilistic Signature Scheme&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;与传统PKCS#1 v1.5方式相比，PSS签名算法引入了随机性。&lt;/p&gt;
&lt;p&gt;&lt;img alt="rsa-pss-padding" src="https://blog.debao.me/images/rsa-pss-padding.png"&gt;&lt;/p&gt;
&lt;p&gt;图片来源：https://slidetodoc.com/lect-15-digital-signatures-rsa-el-gamal-dsa/&lt;/p&gt;
&lt;p&gt;这个东西太复杂了，简单看看它的反操作——签名验证流程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;解密：拿到签名S后，使用公钥进行RSA解密操作，得到解密后的EM。最后一个字节如不是0xbc，签名无效。&lt;/li&gt;
&lt;li&gt;分隔 EM：分隔出哈希值H和MaskedDB。（哈希值H长度 由哈希算法确定）&lt;/li&gt;
&lt;li&gt;计算 Salt：计算出DB值，分隔出PS和salt值，如果PS不是全0，签名无效。（salt长度一般与哈希值H长度一致）&lt;/li&gt;
&lt;li&gt;构建M’：计算哈希值mHash，添加salt，建构出M‘&lt;/li&gt;
&lt;li&gt;校验：计算M‘的哈希值，与H进行比较。如不相等，签名无效。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/RSA_(cryptosystem)&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Optimal_asymmetric_encryption_padding&lt;/li&gt;
&lt;li&gt;https://www.di-mgt.com.au/crt_rsa.html&lt;/li&gt;
&lt;li&gt;https://www.rfc-editor.org/rfc/rfc3447&lt;/li&gt;
&lt;li&gt;https://www.51cto.com/article/663141.html&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="crypto"></category><category term="rsa"></category></entry><entry><title>DER编码规则小记</title><link href="https://blog.debao.me/2023/12/notes-on-der-encoding-rules/" rel="alternate"></link><published>2023-12-13T19:09:00+08:00</published><updated>2023-12-13T19:09:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-12-13:/2023/12/notes-on-der-encoding-rules/</id><summary type="html">&lt;p&gt;&lt;strong&gt;X.690&lt;/strong&gt;定义了ASN.1的编码格式，包括BER、CER、DER。另外 ASN.1的编码格式还有 XER、JER 等。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BER：Basic Encoding Rules&lt;/li&gt;
&lt;li&gt;CER：Canonical Encoding Rules&lt;/li&gt;
&lt;li&gt;DER：Distinguished Encoding Rules&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DER是BER的子集，本文只关注DER。&lt;/p&gt;
&lt;h2 id="_1"&gt;规则&lt;/h2&gt;
&lt;p&gt;DER 指定了用于编码 ASN.1 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;X.690&lt;/strong&gt;定义了ASN.1的编码格式，包括BER、CER、DER。另外 ASN.1的编码格式还有 XER、JER 等。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BER：Basic Encoding Rules&lt;/li&gt;
&lt;li&gt;CER：Canonical Encoding Rules&lt;/li&gt;
&lt;li&gt;DER：Distinguished Encoding Rules&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DER是BER的子集，本文只关注DER。&lt;/p&gt;
&lt;h2 id="_1"&gt;规则&lt;/h2&gt;
&lt;p&gt;DER 指定了用于编码 ASN.1 数据结构的部分自描述和自定界协议。 每个数据元素都将被编码为类型标识符、长度描述、实际数据元素。 这些类型的编码通常称为类型type-长度length-值value (TLV) 编码。 然而，在 DER 的术语中，它是标识符identifier-长度length-内容content。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Identifier：Type&lt;/li&gt;
&lt;li&gt;Length：Length&lt;/li&gt;
&lt;li&gt;Contents：Value&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="identifer"&gt;标识符Identifer&lt;/h3&gt;
&lt;p&gt;标识符占一个(Short form)或多个字节(Long form)。&lt;/p&gt;
&lt;p&gt;&lt;img alt="der-identifier" src="https://blog.debao.me/images/der-identifier.png"&gt;&lt;/p&gt;
&lt;p&gt;标识符有四类（Class），本文关注Universal：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Universal：0，Native to ASN.1&lt;/li&gt;
&lt;li&gt;Application：1&lt;/li&gt;
&lt;li&gt;Context-specific：2&lt;/li&gt;
&lt;li&gt;Private：3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;值类型有两种（P/C）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primitive：Content直接是值&lt;/li&gt;
&lt;li&gt;Constructed：Content包含多个其他编码值&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ANS.1定义的一些type：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BOOLEAN：1&lt;/li&gt;
&lt;li&gt;INTEGER：2&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BIT STRING&lt;/strong&gt;：3&lt;/li&gt;
&lt;li&gt;OCTET STRING：4&lt;/li&gt;
&lt;li&gt;NULL：5&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OBJECT IDENTIFIER&lt;/strong&gt;：6&lt;/li&gt;
&lt;li&gt;OBJECT Descriptor：7&lt;/li&gt;
&lt;li&gt;EXTERNAL：8&lt;/li&gt;
&lt;li&gt;REAL：9&lt;/li&gt;
&lt;li&gt;UTF8String：12&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SEQUENCE&lt;/strong&gt;，SEQUENCE OF：16&lt;/li&gt;
&lt;li&gt;SET，SET OF：17&lt;/li&gt;
&lt;li&gt;DATE：31&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Type大于30时，标识符1个字节不够用，需要使用long form。&lt;/p&gt;
&lt;h3 id="_2"&gt;长度&lt;/h3&gt;
&lt;p&gt;DER不使用Indefinite，故只需要考虑Definite格式。它又分为short和long两种。&lt;/p&gt;
&lt;p&gt;&lt;img alt="der-length" src="https://blog.debao.me/images/der-length.png"&gt;&lt;/p&gt;
&lt;h3 id="_3"&gt;内容规则&lt;/h3&gt;
&lt;h4 id="object-identifier"&gt;对象标识符 &lt;strong&gt;OBJECT IDENTIFIER&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;OID 的前两个节点编码为单个字节。 第一个节点乘以小数 40，结果将添加到第二个节点的值。&lt;/li&gt;
&lt;li&gt;小于或等于 127 的节点值按一个字节进行编码。&lt;/li&gt;
&lt;li&gt;大于或等于 128 的节点值按多个字节进行编码。 最左侧字节的第 7 位设置为 1。 每个字节的 0 到 6 位包含编码值。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="bit-string"&gt;BIT STRING&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;BIT STRING&lt;/strong&gt;  TLV 三元组的 &lt;strong&gt;“值”&lt;/strong&gt; 字段包含一个前导字节，该字节指定内容最后一个字节中剩余未使用的位数。&lt;/p&gt;
&lt;p&gt;&lt;img alt="位字符串数据类型的 der 编码" src="https://blog.debao.me/images/der-tlv-bitstring.png"&gt;&lt;/p&gt;
&lt;p&gt;再上面的示例中， &lt;strong&gt;“长度L”&lt;/strong&gt; 字段为“0x03”，因为后面跟着三个内容字节。“ &lt;strong&gt;值&lt;/strong&gt;V ”字段的前导字节设置为“0x04，因为最后一个内容字节中有四个未使用的位。 每个未使用的位都由字母 x 表示。&lt;/p&gt;
&lt;p&gt;注：图片来自：https://learn.microsoft.com/zh-cn/windows/win32/seccertenroll/about-bit-string&lt;/p&gt;
&lt;h4 id="integer"&gt;INTEGER&lt;/h4&gt;
&lt;p&gt;如果整数为正数，但高阶位设置为 1，则需要将0x00作为前导字符添加到内容中，以指示数字不是负数。&lt;/p&gt;
&lt;h2 id="der"&gt;解码DER&lt;/h2&gt;
&lt;p&gt;python中好多支持der编解码的库，比如&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/asn1crypto/&lt;/li&gt;
&lt;li&gt;https://pypi.org/project/asn1tools/&lt;/li&gt;
&lt;li&gt;https://pypi.org/project/asn1/&lt;/li&gt;
&lt;li&gt;https://pypi.org/project/pyasn1/&lt;/li&gt;
&lt;li&gt;https://github.com/wiml/derlite&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;简单起见，我们按照DER的规则，自己写写，看能否解读RSA的公钥文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;
&lt;span class="normal"&gt;52&lt;/span&gt;
&lt;span class="normal"&gt;53&lt;/span&gt;
&lt;span class="normal"&gt;54&lt;/span&gt;
&lt;span class="normal"&gt;55&lt;/span&gt;
&lt;span class="normal"&gt;56&lt;/span&gt;
&lt;span class="normal"&gt;57&lt;/span&gt;
&lt;span class="normal"&gt;58&lt;/span&gt;
&lt;span class="normal"&gt;59&lt;/span&gt;
&lt;span class="normal"&gt;60&lt;/span&gt;
&lt;span class="normal"&gt;61&lt;/span&gt;
&lt;span class="normal"&gt;62&lt;/span&gt;
&lt;span class="normal"&gt;63&lt;/span&gt;
&lt;span class="normal"&gt;64&lt;/span&gt;
&lt;span class="normal"&gt;65&lt;/span&gt;
&lt;span class="normal"&gt;66&lt;/span&gt;
&lt;span class="normal"&gt;67&lt;/span&gt;
&lt;span class="normal"&gt;68&lt;/span&gt;
&lt;span class="normal"&gt;69&lt;/span&gt;
&lt;span class="normal"&gt;70&lt;/span&gt;
&lt;span class="normal"&gt;71&lt;/span&gt;
&lt;span class="normal"&gt;72&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;struct&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;base64&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse_der&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;#print(f&amp;#39;Parsing: {data.hex(&amp;quot; &amp;quot;)}, Length: {len(data)}\n&amp;#39;)&lt;/span&gt;
    &lt;span class="c1"&gt;# parse tag and length&lt;/span&gt;
    &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;struct&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unpack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;length_bytes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x7F&lt;/span&gt;
        &lt;span class="n"&gt;length_value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;struct&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unpack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;length_bytes&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;length_bytes&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
        &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length_bytes&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length_value&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;length_bytes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;contents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;length_bytes&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;length_bytes&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;total_length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;length_bytes&lt;/span&gt;


    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x01&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# Boolean&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x02&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# Integer&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;big&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x03&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# BitString&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x04&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# OctetString&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x05&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# Null&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x06&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# ObjectIdentifier&lt;/span&gt;
        &lt;span class="n"&gt;oid_bytes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;struct&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unpack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;first_byte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;oid_bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;
        &lt;span class="n"&gt;second_byte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;oid_bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;
        &lt;span class="n"&gt;oid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;first_byte&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;second_byte&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;oid_bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]:&lt;/span&gt;
            &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;128&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x7F&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;oid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;oid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x30&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x31&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# Sequence or Set&lt;/span&gt;
        &lt;span class="c1"&gt;# 0x30: tag 0x10 with P/C=1&lt;/span&gt;
        &lt;span class="c1"&gt;# 0x31: tag 0x11 with P/C=1&lt;/span&gt;
        &lt;span class="n"&gt;parsed_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
        &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;sub_tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sub_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_der&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt;
            &lt;span class="n"&gt;parsed_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;sub_length&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;parsed_data&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Unknown tag: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;

&lt;span class="n"&gt;base64_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&amp;#39;-----BEGIN PUBLIC KEY-----&lt;/span&gt;
&lt;span class="s1"&gt;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Wk4/RZTlV2Wp28mMlzG&lt;/span&gt;
&lt;span class="s1"&gt;EvCJtYUKlK1BD1bzGl4dS41dQuLjkmgV6QnLcOgpfJCF8CPuS4rVBCZ0jG0VuY6A&lt;/span&gt;
&lt;span class="s1"&gt;ZU+cBsY74LY+WDQt6GJCktgFmDoQ81onmA+SYS5yIhVJMo4KCbn88HXt201iWPJK&lt;/span&gt;
&lt;span class="s1"&gt;bla+EduA1CustJxDb+vkqylomceW0YZmBkyfFJ5v5VYqql7BD/Roa9tU/rYssE67&lt;/span&gt;
&lt;span class="s1"&gt;gnIfMRDyzWfATOKgPmERVEO4RPkwtH4NIHmTDN6NgZixrnRXuY+tc46JPvPI8mhM&lt;/span&gt;
&lt;span class="s1"&gt;Kq62A5wHVWmJkzayFH4cMPogIVAJocxh0Sct4jqIVA8FJOVoUzsUyZU/ct1fNU8p&lt;/span&gt;
&lt;span class="s1"&gt;bwIDAQAB&lt;/span&gt;
&lt;span class="s1"&gt;-----END PUBLIC KEY-----&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# remove header and footer with regex&lt;/span&gt;
&lt;span class="n"&gt;base64_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;rb&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;----[A-Z ]+----&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;base64_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;der_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;b64decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;base64_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;parsed_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_der&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;der_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parsed_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;运行结果如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[[&amp;#39;1.2.840.113549.1.1.1&amp;#39;, None], &amp;#39;00 30 82 01 0a 02 82 01 01 00 d9 69 38 fd 16 53 95 5d 96 a7 6f 26 32 5c c6 12 f0 89 b5 85 0a 94 ad 41 0f 56 f3 1a 5e 1d 4b 8d 5d 42 e2 e3 92 68 15 e9 09 cb 70 e8 29 7c 90 85 f0 23 ee 4b 8a d5 04 26 74 8c 6d 15 b9 8e 80 65 4f 9c 06 c6 3b e0 b6 3e 58 34 2d e8 62 42 92 d8 05 98 3a 10 f3 5a 27 98 0f 92 61 2e 72 22 15 49 32 8e 0a 09 b9 fc f0 75 ed db 4d 62 58 f2 4a 6e 56 be 11 db 80 d4 2b ac b4 9c 43 6f eb e4 ab 29 68 99 c7 96 d1 86 66 06 4c 9f 14 9e 6f e5 56 2a aa 5e c1 0f f4 68 6b db 54 fe b6 2c b0 4e bb 82 72 1f 31 10 f2 cd 67 c0 4c e2 a0 3e 61 11 54 43 b8 44 f9 30 b4 7e 0d 20 79 93 0c de 8d 81 98 b1 ae 74 57 b9 8f ad 73 8e 89 3e f3 c8 f2 68 4c 2a ae b6 03 9c 07 55 69 89 93 36 b2 14 7e 1c 30 fa 20 21 50 09 a1 cc 61 d1 27 2d e2 3a 88 54 0f 05 24 e5 68 53 3b 14 c9 95 3f 72 dd 5f 35 4f 29 6f 02 03 01 00 01&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对比一下openssl的输出&lt;code&gt;openssl rsa -pubin -in rsa_2048.pub -text&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Public-Key: (2048 bit)
Modulus:
    00:d9:69:38:fd:16:53:95:5d:96:a7:6f:26:32:5c:
    c6:12:f0:89:b5:85:0a:94:ad:41:0f:56:f3:1a:5e:
    1d:4b:8d:5d:42:e2:e3:92:68:15:e9:09:cb:70:e8:
    29:7c:90:85:f0:23:ee:4b:8a:d5:04:26:74:8c:6d:
    15:b9:8e:80:65:4f:9c:06:c6:3b:e0:b6:3e:58:34:
    2d:e8:62:42:92:d8:05:98:3a:10:f3:5a:27:98:0f:
    92:61:2e:72:22:15:49:32:8e:0a:09:b9:fc:f0:75:
    ed:db:4d:62:58:f2:4a:6e:56:be:11:db:80:d4:2b:
    ac:b4:9c:43:6f:eb:e4:ab:29:68:99:c7:96:d1:86:
    66:06:4c:9f:14:9e:6f:e5:56:2a:aa:5e:c1:0f:f4:
    68:6b:db:54:fe:b6:2c:b0:4e:bb:82:72:1f:31:10:
    f2:cd:67:c0:4c:e2:a0:3e:61:11:54:43:b8:44:f9:
    30:b4:7e:0d:20:79:93:0c:de:8d:81:98:b1:ae:74:
    57:b9:8f:ad:73:8e:89:3e:f3:c8:f2:68:4c:2a:ae:
    b6:03:9c:07:55:69:89:93:36:b2:14:7e:1c:30:fa:
    20:21:50:09:a1:cc:61:d1:27:2d:e2:3a:88:54:0f:
    05:24:e5:68:53:3b:14:c9:95:3f:72:dd:5f:35:4f:
    29:6f
Exponent: 65537 (0x10001)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;仔细比较一下，可发现，Modulus和Exponent都包在 BIT STRING 输出里面了，但是是混在一块的。看来需要基于OID&lt;code&gt;1.2.840.113549.1.1.1&lt;/code&gt;继续解读 BIT STRING 才行。&lt;/p&gt;
&lt;p&gt;另注意，此处Modulus有前导字符0（因为下一个字符D9，最高位为1），也可以通过&lt;code&gt;openssl rsa -modulus&lt;/code&gt;来查看具体的模值：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl rsa -pubin  -in rsa_2048.pub -modulus
Modulus=D96938FD1653955D96A76F26325CC612F089B5850A94AD410F56F31A5E1D4B8D5D42E2E3926815E909CB70E8297C9085F023EE4B8AD50426748C6D15B98E80654F9C06C63BE0B63E58342DE8624292D805983A10F35A27980F92612E72221549328E0A09B9FCF075EDDB4D6258F24A6E56BE11DB80D42BACB49C436FEBE4AB296899C796D18666064C9F149E6FE5562AAA5EC10FF4686BDB54FEB62CB04EBB82721F3110F2CD67C04CE2A03E61115443B844F930B47E0D2079930CDE8D8198B1AE7457B98FAD738E893EF3C8F2684C2AAEB6039C075569899336B2147E1C30FA20215009A1CC61D1272DE23A88540F0524E568533B14C9953F72DD5F354F296F
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;猜想对不对？可以用 &lt;a href="https://github.com/PKISolutions/Asn1Editor.WPF"&gt;Asn1Editor.WPF  &lt;/a&gt;工具对比确认一下：&lt;/p&gt;
&lt;p&gt;&lt;img alt="asn1editor-rsa" src="https://blog.debao.me/images/asn1editor-rsa.png"&gt;&lt;/p&gt;
&lt;p&gt;可以看到它也在继续解读BIT STRING。&lt;/p&gt;
&lt;p&gt;OK，临时修改一下上面的python代码（注意，此处跳过BitString的第一个字节00，它用于指定最后一个内容字节中存在的未使用位数）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x03&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# BitString&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parse_der&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可得到两个值：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[27445599381378035545670523148607236472225286815854892348596803754128427639970701679060637674408997570467049607589422583767959961753522984671350732011421502377280857000739029206485080166159886898664317181584241642378526386882345159670001146437538224818393591073459474805361047165591136893859645793002623819995930088355664715708614808951470601732409482672759339954069052827132163326960803603753820677019256485986991663132033163463784405045346025270316334503071062277674190893959720506018839850062431584678553749928642692097173492555975389032958879496564099492785722322726190859650291595641789787694809886825416252926319, 65537]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_4"&gt;例子&lt;/h2&gt;
&lt;h3 id="rsa-pkcs8x509-vs-pkcs1"&gt;RSA PKCS8/X.509 vs PKCS1&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;注意公钥头部 &lt;code&gt;-----BEGIN PUBLIC KEY-----&lt;/code&gt; 与 &lt;code&gt;-----BEGIN RSA PUBLIC KEY-----&lt;/code&gt;的不同。后者标出RSA字样，格式简单直接，存储RSA公钥；前者能存储各种算法的公钥，需要专门的OID标识。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;对于公钥，这两个格式分别由X.509&lt;strong&gt;SubjectPublicKeyInfo&lt;/strong&gt; 和 PKCS1&lt;strong&gt;RSAPublicKey&lt;/strong&gt;规范&lt;/li&gt;
&lt;li&gt;对于私钥，这两个格式分别由PKCS8 &lt;strong&gt;PrivateKeyInfo&lt;/strong&gt;和 PKCS1 &lt;strong&gt;RSAPrivateKey&lt;/strong&gt;规范&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上面的例子中，我们解读的是RSA的公钥（X.509）。可以转换成PKCS1格式，再看看&lt;/p&gt;
&lt;p&gt;转换可以通过openssl实现：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-pubin&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa_2048.pub&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa_2048_pkcs1.pub&lt;span class="w"&gt; &lt;/span&gt;-RSAPublicKey_out
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;结果文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;-----BEGIN RSA PUBLIC KEY-----&lt;/span&gt;
&lt;span class="s"&gt;MIIBCgKCAQEA2Wk4/RZTlV2Wp28mMlzGEvCJtYUKlK1BD1bzGl4dS41dQuLjkmgV&lt;/span&gt;
&lt;span class="s"&gt;6QnLcOgpfJCF8CPuS4rVBCZ0jG0VuY6AZU+cBsY74LY+WDQt6GJCktgFmDoQ81on&lt;/span&gt;
&lt;span class="s"&gt;mA+SYS5yIhVJMo4KCbn88HXt201iWPJKbla+EduA1CustJxDb+vkqylomceW0YZm&lt;/span&gt;
&lt;span class="s"&gt;BkyfFJ5v5VYqql7BD/Roa9tU/rYssE67gnIfMRDyzWfATOKgPmERVEO4RPkwtH4N&lt;/span&gt;
&lt;span class="s"&gt;IHmTDN6NgZixrnRXuY+tc46JPvPI8mhMKq62A5wHVWmJkzayFH4cMPogIVAJocxh&lt;/span&gt;
&lt;span class="s"&gt;0Sct4jqIVA8FJOVoUzsUyZU/ct1fNU8pbwIDAQAB&lt;/span&gt;
&lt;span class="gh"&gt;-----END RSA PUBLIC KEY-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;将这段内容直接贴进前面的python代码，输出结果如下（比前面简单直接）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[27445599381378035545670523148607236472225286815854892348596803754128427639970701679060637674408997570467049607589422583767959961753522984671350732011421502377280857000739029206485080166159886898664317181584241642378526386882345159670001146437538224818393591073459474805361047165591136893859645793002623819995930088355664715708614808951470601732409482672759339954069052827132163326960803603753820677019256485986991663132033163463784405045346025270316334503071062277674190893959720506018839850062431584678553749928642692097173492555975389032958879496564099492785722322726190859650291595641789787694809886825416252926319, 65537]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="pkcs1"&gt;PKCS1&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;https://www.rfc-editor.org/rfc/rfc3447#page-44&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;定义RSA公钥和私钥的格式，其中私钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;RSAPrivateKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;::=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;version&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nv"&gt;Version&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;modulus&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;publicExponent&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;e&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;privateExponent&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;d&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;prime1&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;p&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;prime2&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;q&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;exponent1&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;p&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;exponent2&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;q&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;coefficient&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;inverse&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;q&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;mod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;p&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;otherPrimeInfos&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nv"&gt;OtherPrimeInfos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;OPTIONAL&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;在ASN.1中，注释有两种形式，单行注释和多行注释。单行注释以 &lt;code&gt;--&lt;/code&gt; 开始，以行尾或者另一个&lt;code&gt;--&lt;/code&gt;结束（以先遇到的为准）。多行注释以&lt;code&gt;/*&lt;/code&gt;开始，以&lt;code&gt;*/&lt;/code&gt;结束。多行注释允许多重嵌套，如果遇到多个&lt;code&gt;/*&lt;/code&gt;，需要遇到同等的&lt;code&gt;*/&lt;/code&gt;才结束注释。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;公钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;RSAPublicKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;::=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;modulus&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nv"&gt;publicExponent&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;INTEGER&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;e&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="pkcs8"&gt;PKCS8&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;https://datatracker.ietf.org/doc/html/rfc5208&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;定义私钥PrivateKeyInfo的格式&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;PrivateKeyInfo ::= SEQUENCE {&lt;/span&gt;
&lt;span class="x"&gt;   version Version,&lt;/span&gt;
&lt;span class="x"&gt;   privateKeyAlgorithm AlgorithmIdentifier &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;PrivateKeyAlgorithms&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;,&lt;/span&gt;
&lt;span class="x"&gt;   privateKey PrivateKey,&lt;/span&gt;
&lt;span class="x"&gt;   attributes [0] Attributes OPTIONAL }&lt;/span&gt;

&lt;span class="x"&gt;Version ::= INTEGER {v1(0)} (v1,...)&lt;/span&gt;

&lt;span class="x"&gt;PrivateKey ::= OCTET STRING&lt;/span&gt;

&lt;span class="x"&gt;Attributes ::= SET OF Attribute&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;以及EncryptedPrivateKeyInfo&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;EncryptedPrivateKeyInfo ::= SEQUENCE {&lt;/span&gt;
&lt;span class="x"&gt;    encryptionAlgorithm AlgorithmIdentifier &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;KeyEncryptionAlgorithms&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;,&lt;/span&gt;
&lt;span class="x"&gt;    encryptedData EncryptedData&lt;/span&gt;
&lt;span class="x"&gt;}&lt;/span&gt;

&lt;span class="x"&gt;EncryptedData ::= OCTET STRING&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;但是公钥定义应该不再PKCS8里面。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;SubjectPublicKeyInfo&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;::=&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nv"&gt;algorithm&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;AlgorithmIdentifier&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nv"&gt;subjectPublicKey&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nv"&gt;BIT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;STRING&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nv"&gt;AlgorithmIdentifier&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;::=&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;SEQUENCE&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nv"&gt;algorithm&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="nv"&gt;OBJECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;IDENTIFIER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nv"&gt;parameters&lt;/span&gt;&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="nv"&gt;ANY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DEFINED&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;algorithm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;OPTIONAL&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对RSA来说， OID 是 &lt;code&gt;1.2.840.113549.1.1.1&lt;/code&gt;, 其 &lt;code&gt;RSAPublicKey&lt;/code&gt; 位于 &lt;code&gt;subjectPublicKey&lt;/code&gt;  这个BIT STRING 中。&lt;/p&gt;
&lt;h3 id="openssl"&gt;OpenSSL&lt;/h3&gt;
&lt;p&gt;OpenSSL 提供一个 asn1parse 的工具，用于解读 asn1文件。&lt;/p&gt;
&lt;p&gt;输出内容说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;d：嵌套深度(depth)&lt;/li&gt;
&lt;li&gt;hl：头部长度(head length)&lt;/li&gt;
&lt;li&gt;l：内容长度(length)&lt;/li&gt;
&lt;li&gt;cons/prim：类型&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="public-key-x509"&gt;解读 PUBLIC KEY 格式的公钥（X.509)：&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl asn1parse -in rsa_2048.pub
    0:d=0  hl=4 l= 290 cons: SEQUENCE
    4:d=1  hl=2 l=  13 cons: SEQUENCE
    6:d=2  hl=2 l=   9 prim: OBJECT            :rsaEncryption
   17:d=2  hl=2 l=   0 prim: NULL
   19:d=1  hl=4 l= 271 prim: BIT STRING
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可以看到，默认和我们一样，key 在 BIT STRING 中，需要进一步解读。&lt;/p&gt;
&lt;h4 id="rsa-public-keypkcs1"&gt;解读 RSA PUBLIC KEY公钥（PKCS1）：&lt;/h4&gt;
&lt;p&gt;这个就比较直接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl asn1parse -in rsa_2048_pkcs1.pub
    0:d=0  hl=4 l= 266 cons: SEQUENCE
    4:d=1  hl=4 l= 257 prim: INTEGER           :D96938FD1653955D96A76F26325CC612F089B5850A94AD410F56F31A5E1D4B8D5D42E2E3926815E909CB70E8297C9085F023EE4B8AD50426748C6D15B98E80654F9C06C63BE0B63E58342DE8624292D805983A10F35A27980F92612E72221549328E0A09B9FCF075EDDB4D6258F24A6E56BE11DB80D42BACB49C436FEBE4AB296899C796D18666064C9F149E6FE5562AAA5EC10FF4686BDB54FEB62CB04EBB82721F3110F2CD67C04CE2A03E61115443B844F930B47E0D2079930CDE8D8198B1AE7457B98FAD738E893EF3C8F2684C2AAEB6039C075569899336B2147E1C30FA20215009A1CC61D1272DE23A88540F0524E568533B14C9953F72DD5F354F296F
  265:d=1  hl=2 l=   3 prim: INTEGER           :010001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_5"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/X.690#DER_encoding&lt;/li&gt;
&lt;li&gt;https://learn.microsoft.com/zh-cn/windows/win32/seccertenroll/about-bit-string&lt;/li&gt;
&lt;li&gt;https://www.oss.com/asn1/resources/asn1-made-simple/encoding-rules.html&lt;/li&gt;
&lt;li&gt;https://www.alvestrand.no/objectid/1.2.840.113549.1.1.html&lt;/li&gt;
&lt;li&gt;https://medium.com/asecuritysite-when-bob-met-alice/the-magic-of-cryptographic-identifiers-and-formats-oids-der-and-asn-1-efc4e75c94db&lt;/li&gt;
&lt;li&gt;https://mbed-tls.readthedocs.io/en/latest/kb/cryptography/asn1-key-structures-in-der-and-pem/&lt;/li&gt;
&lt;li&gt;https://stackoverflow.com/questions/18039401/how-can-i-transform-between-the-two-styles-of-public-key-format-one-begin-rsa&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="crypto"></category><category term="der"></category><category term="rsa"></category></entry><entry><title>获取Windows下的硬件信息</title><link href="https://blog.debao.me/2023/12/get-hardware-information-under-windows/" rel="alternate"></link><published>2023-12-03T00:53:00+08:00</published><updated>2023-12-03T00:53:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-12-03:/2023/12/get-hardware-information-under-windows/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;在Windows下获取硬件(比如CPU、主板、硬盘、显卡、网卡...)的信息，主要是通过WMI实现。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本文涉及&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WMIC 工具使用【废弃】&lt;/li&gt;
&lt;li&gt;Get-WmiObject 使用 【废弃】&lt;/li&gt;
&lt;li&gt;Get-CimInstance 使用&lt;/li&gt;
&lt;li&gt;python下wmi 使用&lt;/li&gt;
&lt;li&gt;C++下 wmi 使用&lt;/li&gt;
&lt;li&gt;Qt下通过ActiveQt使用wmi …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;在Windows下获取硬件(比如CPU、主板、硬盘、显卡、网卡...)的信息，主要是通过WMI实现。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本文涉及&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WMIC 工具使用【废弃】&lt;/li&gt;
&lt;li&gt;Get-WmiObject 使用 【废弃】&lt;/li&gt;
&lt;li&gt;Get-CimInstance 使用&lt;/li&gt;
&lt;li&gt;python下wmi 使用&lt;/li&gt;
&lt;li&gt;C++下 wmi 使用&lt;/li&gt;
&lt;li&gt;Qt下通过ActiveQt使用wmi 【本文重点】&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__cpuid&lt;/code&gt; 使用&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;术语&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;WMI：WIndows管理规范（Windows Management Instrumentation）。WMI是Windows操作系统提供的一种管理接口，从Windows 2000系统开始出现，它允许开发人员通过编程语言或脚本来访问和管理Windows系统的各种资源和服务。WMI通过提供COM/DCOM接口，使得开发人员可以从应用程序或脚本中直接调用WMI提供的功能来获取系统信息。WMI基于WBEM和CIM实现。&lt;/li&gt;
&lt;li&gt;WBEM：基于Web的企业管理（Web Based Enterprise Management）。1996年由BMC、Cisco、Compaq、Intel和Microsoft发起。&lt;/li&gt;
&lt;li&gt;CIM：公共信息模型（Common Information Model），是一个可扩展并面向对象的数据模型,含有与企业各个部门有关的信息。CIM也是由分布式管理任务组 (DMTF) 维护的跨平台标准。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="wmi"&gt;WMI&lt;/h3&gt;
&lt;p&gt;WMI提供COM/DCOM接口，可以通过C/C++客户端、VBScript或JScript脚本、Powershell 等.NET客户端 访问。&lt;/p&gt;
&lt;p&gt;早期，WMI架构中是没有.Net的：&lt;/p&gt;
&lt;p&gt;&lt;img alt="wmi-architecture-from-msdn-0" src="https://blog.debao.me/images/wmi-architecture-from-msdn-0.png"&gt;&lt;/p&gt;
&lt;p&gt;后来，.Net占据重要位置（感觉COM和.Net混杂挺乱)：&lt;/p&gt;
&lt;p&gt;&lt;img alt="wmi-architecture-from-msdn" src="https://blog.debao.me/images/wmi-architecture-from-msdn.png"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：可关注wbemtest 这个测试工具。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="wmic"&gt;wmic&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/wmic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这个东西出镜率挺高，但是它已经 &lt;strong&gt;被废弃了&lt;/strong&gt;。因为功能太强，容易被黑客利用。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;The WMI command-line (WMIC) utility is deprecated as of Windows 10, version 21H1, and as of the 21H1 semi-annual channel release of Windows Server. 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;只是wmic这个命令行工具被废弃了，不是WMI功能被废弃了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;常用命令&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看cpu: &lt;code&gt;wmic cpu list brief&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看物理内存: &lt;code&gt;wmic memphysical list brief&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看逻辑内存: &lt;code&gt;wmic memlogical list brief&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看缓存内存: &lt;code&gt;wmic memcache list brief&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;查看虚拟内存: &lt;code&gt;wmic pagefile list brief&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看网卡: &lt;code&gt;wmic nic list brief&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体一点的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;获取cpu名称：&lt;code&gt;wmic cpu get Name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取cpu核心数：&lt;code&gt;wmic cpu get NumberOfCores&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取cpu线程数：&lt;code&gt;wmic cpu get NumberOfLogicalProcessors&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取cpu序列号：&lt;code&gt;wmic cpu get processorid&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取主板序列号：&lt;code&gt;wmic baseboard get serialnumber&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取BIOS序列号：&lt;code&gt;wmic bios get serialnumber&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取硬盘序列号：&lt;code&gt;wmic diskdrive where index=0 get serialnumber&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="get-wmiobject"&gt;Get-WmiObject&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/get-wmiobject?view=powershell-5.1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这是Windows Powershell中的 cmdlet，在Windows Powershell 3.0中，已经&lt;strong&gt;被废弃&lt;/strong&gt;，建议使用&lt;code&gt;Get-CimInstance&lt;/code&gt;。而到了Powershell 6.0 （pwsh）中，它更是直接&lt;strong&gt;被移除了&lt;/strong&gt;，比wmic还彻底。&lt;/p&gt;
&lt;p&gt;一些命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;获取cpu信息：&lt;code&gt;Get-WmiObject Win32_Processor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;获取BIOS信息：&lt;code&gt;Win32_Bios&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pwsh-powershell"&gt;关于pwsh 与 powershell&lt;/h3&gt;
&lt;p&gt;https://github.com/powershell/powershell&lt;/p&gt;
&lt;p&gt;从PowerShell  6开始，可执行程序的名字改为&lt;strong&gt;pwsh&lt;/strong&gt;， 它使用 .NET Core，可以运行在Windows、Linux和macOS系统。&lt;/p&gt;
&lt;p&gt;之前版本的PowerShell 只运行在Windows平台，叫做Window PowerShell，可执行程序的名字却为 &lt;strong&gt;powershell.exe&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id="get-ciminstance"&gt;Get-CimInstance&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/powershell/scripting/learn/ps101/07-working-with-wmi?view=powershell-7.4&lt;/li&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/powershell/scripting/samples/getting-wmi-objects--get-ciminstance-?view=powershell-7.4&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;CIM是Powershell 3.0 引入的。至少目前没过时&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;获取主板信息：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Get-CimInstance Win32_BaseBoard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;获取内存信息&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Get-CimInstance Win32_PhysicalMemory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;获取CPU信息&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Get-CimInstance Win32_Processor
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;获取操作系统信息&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Get-CimInstance Win32_OperatingSystem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：要查看具体有什么class可用，使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Get-CIMClass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这个表很长，可以使用通配符过滤，比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; Get-CIMClass Win32*Processor
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;另外，微软官方上有列表：
* &lt;a href="https://learn.microsoft.com/en-us/windows/win32/cimwin32prov/computer-system-hardware-classes"&gt;Computer System Hardware Classes&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="python"&gt;Python&lt;/h2&gt;
&lt;p&gt;python有 wmi 的第三方包，它依赖于 pywin32包。用起来挺简单：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;wmi&lt;/span&gt;

&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;wmi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WMI&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# information about the cpu&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_Processor&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Processor ID: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;cpu&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ProcessorId&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Process Name: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;cpu&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="c1"&gt;# information about the baseboard&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;board_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_BaseBoard&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Board ID: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;board_id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SerialNumber&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="c1"&gt;# information about the BIOS&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bios_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_BIOS&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;BIOS Serial Number: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;bios_id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SerialNumber&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="c1"&gt;# get disk information&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_DiskDrive&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Disk Serial Number: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SerialNumber&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Disk Drive Caption: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Caption&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Disk Drive Size: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# get physical memory information&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;memModule&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_PhysicalMemory&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Memory Capacity: %.fMB&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;memModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Capacity&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="c1"&gt;# get information about the OS&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Win32_OperatingSystem&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Windows Directory: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WindowsDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Operating System: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Caption&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;OS Manufacturer: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Manufacturer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;OS Configuration: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BuildNumber&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;OS Serial Number: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SerialNumber&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;OS Version: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="c"&gt;C++&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;如何在C、C++中通过WMI获取硬件信息？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;要使用 C++ 创建 WMI 应用程序：必须初始化 COM、访问和设置 WMI 协议以及执行手动清理。 MSDN上有说明和举例。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/windows/win32/wmisdk/example--getting-wmi-data-from-the-local-computer&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;官方例子有中有点小问题，去掉using namespace或者将其起到最后。不然byte类型（C++17引入）会有二义性。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#define _WIN32_DCOM&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;namespace&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;std&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;comdef.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;Wbemidl.h&amp;gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma comment(lib, &amp;quot;wbemuuid.lib&amp;quot;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;主要步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通过 CoInitializeEx 初始化COM参数&lt;/li&gt;
&lt;li&gt;通过CoInitializeSecurity初始化COM进程安全性&lt;/li&gt;
&lt;li&gt;通过CoCreateInstance获取WMI初始定位符&lt;/li&gt;
&lt;li&gt;通过IWbemLocator::ConnectServer获取本地&lt;code&gt;root\cimv2&lt;/code&gt;命名空间的IWebemServices指针&lt;/li&gt;
&lt;li&gt;使用IWbemServices指针向WMI发出请求。这个请求是真正需要的东西&lt;/li&gt;
&lt;li&gt;获取并显式查询数据&lt;/li&gt;
&lt;li&gt;清理等其他操作&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Github上有不少C++的对wmi的封装&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/sondernextdoor/WindowsHardwareInfo&lt;/li&gt;
&lt;li&gt;https://github.com/bozali/wmi&lt;/li&gt;
&lt;li&gt;https://github.com/Thomas-Sparber/wmi&lt;/li&gt;
&lt;li&gt;https://github.com/sonodima/wmipp&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="qt"&gt;Qt&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Qt是C++的库，所以前面的C++中的东西都可以直接用。只是需要注意Qt中使用COM的一些坑...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Qt官方的qtsystems模块仓库中有具体封装wmi的例子（没有用ActiveQt）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/qt/qtsystems/blob/dev/src/systeminfo/windows/qwmihelper_win.cpp&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="qt-com"&gt;Qt 与 COM初始化&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：Qt在Windows下为了支持剪切板，所以QGuiApplication初始化时已经为主线程调用了 OleInitialize() 函数，一旦再次调用CoInitializeEx() 且&lt;strong&gt;使用不用的并发标志&lt;/strong&gt;，会造成崩溃等问题。&lt;/p&gt;
&lt;p&gt;由于 OLE 技术不是线程安全的， 因此 OleInitialize 函数使用 COINIT_APARTMENTTHREADED 标志调用 &lt;strong&gt;CoInitializeEx&lt;/strong&gt; 。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;MSDN中的&lt;a href="https://learn.microsoft.com/en-us/windows/win32/learnwin32/initializing-the-com-library"&gt;Initializing the COM Library&lt;/a&gt;中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;提及CoInitializeEx时，说&lt;strong&gt;每个用到COM的线程&lt;/strong&gt;都要调用它：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Each thread that uses a COM interface must make a separate call to this function.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;提及主线程时，说到&lt;strong&gt;主线程用COINIT_APARTMENTTHREADED&lt;/strong&gt;：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Generally, a thread that creates a window should use the COINIT_APARTMENTTHREADED flag, and other threads should use COINIT_MULTITHREADED. 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;MSDN中的 &lt;a href="https://learn.microsoft.com/zh-cn/windows/win32/api/combaseapi/nf-combaseapi-coinitializeex"&gt;CoInitializeEx 函数 (combaseapi.h) &lt;/a&gt; 中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;提及 CoInitializeEx 可以多次调用，只要并发标志相同即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;对于使用 COM 库的每个线程，CoInitializeEx 必须至少调用一次，并且通常只调用一次。 只要同一线程传递相同的并发标志，就允许同一线程多次调用 CoInitializeEx ，但后续的有效调用将返回S_FALSE。 若要在线程上正常关闭 COM 库，每次成功调用 CoInitialize 或 CoInitializeEx（包括返回S_FALSE的任何调用）都必须通过对 CoUninitialize 的相应调用进行平衡。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="qaxobject"&gt;QAxObject&lt;/h3&gt;
&lt;p&gt;Qt中有ActiveQt模块，所以可以减少一些工作。&lt;/p&gt;
&lt;p&gt;注：执行Qt自带的dumpdoc可以生成一个帮助文档。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;dumpdoc WbemScripting.SWbemLocator -o help.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;对于这个例子，由于涉及好多个QAxObject，我们可以需要对每个对象，都生成一个文档，这个最好在代码中进行，具体示例见下一节。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用ActiveQt模组，我们可以写一个 WmiHelper 类：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;// demo file by dbzhang800 2023&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QApplication&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QDebug&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QUuid&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QThread&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QFile&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;QAxObject&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;Windows.h&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;WmiHelper&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QObject&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;WmiHelper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;nullptr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;QObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="c1"&gt;// try to make Qt&amp;#39;s GUI Thread happy.&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CoInitializeEx&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;COINIT_MULTITHREADED&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RPC_E_CHANGED_MODE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;CoInitializeEx&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;COINIT_APARTMENTTHREADED&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;WbemScripting.SWbemLocator&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;wmiService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;querySubObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ConnectServer(QString&amp;amp;,QString&amp;amp;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ROOT&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;CIMV2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;WmiHelper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;delete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;CoUninitialize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;resultList&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiService&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;querySubObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ExecQuery(QString&amp;amp;))&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                                   &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SELECT %1 FROM %2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;resultList&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;property&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toInt&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;resultList&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;querySubObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ItemIndex(int)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latin1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toLatin1&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dynamicCall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;latin1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;resultList&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="k"&gt;nullptr&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;wmiService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="k"&gt;nullptr&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;然后我们可以在Qt的各处直接使用了（Gui线程，QCoreApplication线程，其他次线程）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;QGuiApplication&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;WmiHelper&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cpu: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_Processor&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ProcessorId&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bios: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_BIOS&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SerialNumber&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;baseboard: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_BaseBoard&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SerialNumber&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;disk: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_DiskDrive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SerialNumber&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nic: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_NetworkAdapter&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MACAddress&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;os: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_OperatingSystem&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SerialNumber&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cpu name: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_Processor&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;qDebug&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;os name: &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiHelper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Win32_OperatingSystem&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Caption&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exec&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="generatedocumentation"&gt;generateDocumentation&lt;/h4&gt;
&lt;p&gt;适当使用 QString QAxBase::generateDocumentation() 生成帮助文档，对我们使用ActiveQt有帮助，比如前面的代码，可以加上：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;writeDoc&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[](&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QString&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;fileName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QByteArray&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;QFile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fileName&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QFile&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;WriteOnly&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;QAxObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;WbemScripting.SWbemLocator&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;writeDoc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.html&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;generateDocumentation&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;toUtf8&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;wmiService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wbemLocator&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;querySubObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ConnectServer(QString&amp;amp;,QString&amp;amp;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ROOT&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;CIMV2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;writeDoc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2.html&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wmiService&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;generateDocumentation&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;toUtf8&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;得到：&lt;/p&gt;
&lt;p&gt;&lt;img alt="activeqt-iswbemlocator" src="https://blog.debao.me/images/activeqt-iswbemlocator-1.png"&gt;&lt;/p&gt;
&lt;p&gt;以及&lt;/p&gt;
&lt;p&gt;&lt;img alt="activeqt-iswbemservicesex" src="https://blog.debao.me/images/activeqt-iswbemservicesex-1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="activeqt-iswbemobjectset" src="https://blog.debao.me/images/activeqt-iswbemobjectset-1.png"&gt;&lt;/p&gt;
&lt;h2 id="__cpuid-__cpuidex"&gt;__cpuid, __cpuidex&lt;/h2&gt;
&lt;p&gt;除了WMI，CPU的ID可以通过 &lt;code&gt;__cpuid&lt;/code&gt; 和 &lt;code&gt;__cpuidex&lt;/code&gt; 来获取。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;intrin.h&amp;gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;array&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;sstream&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iomanip&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Calling __cpuid with 0x0 as the function_id argument&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// gets the number of the highest valid function ID.&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;__cpuid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cpuInfo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nIds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nIds&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;__cpuidex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cpuInfo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push_back&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cpuInfo&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// vender name in data[0]: 1, 3, 2&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vendor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;reinterpret_cast&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vendor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;reinterpret_cast&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vendor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;reinterpret_cast&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vendor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CPU Vendor is : &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vendor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// serial number in data[1]: 3, 0&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;stringstream&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;setfill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;setw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;uppercase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;hex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cpuInfos&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ProcessorId is : &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;运行结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;CPU Vendor is : GenuineIntel
ProcessorId is : BFEBFBFF806C1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_2"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://devblogs.microsoft.com/scripting/powertip-list-all-available-cim-classes-by-using-powershell/&lt;/li&gt;
&lt;li&gt;http://timgolden.me.uk/python/wmi/index.html&lt;/li&gt;
&lt;li&gt;https://pypi.org/project/WMI/&lt;/li&gt;
&lt;li&gt;https://www.codeproject.com/Articles/10539/Making-WMI-Queries-In-C&lt;/li&gt;
&lt;li&gt;https://github.com/qt/qtsystems/tree/dev/src/systeminfo&lt;/li&gt;
&lt;li&gt;https://github.com/jiangzhw/MachineCodeCal&lt;/li&gt;
&lt;li&gt;https://learn.microsoft.com/en-us/cpp/intrinsics/cpuid-cpuidex?view=msvc-170&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/CPUID&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="Qt"></category></entry><entry><title>现代CMake学习笔记（二）</title><link href="https://blog.debao.me/2023/12/modern-cmake-study-notes-part2/" rel="alternate"></link><published>2023-12-02T12:04:00+08:00</published><updated>2023-12-02T12:04:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-12-02:/2023/12/modern-cmake-study-notes-part2/</id><summary type="html">&lt;p&gt;接&lt;a href="https://blog.debao.me/2023/11/modern-cmake-study-notes-part1/"&gt;现代CMake学习笔记（一）&lt;/a&gt;，捋一捋CMake中的一些容易被忽略的问题。先列一下本文内容，然后再就用一个最简单的C++例子，看看能发散多少&lt;/p&gt;
&lt;p&gt;知识点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cmake -h&lt;/code&gt; 查看生成器列表 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;接&lt;a href="https://blog.debao.me/2023/11/modern-cmake-study-notes-part1/"&gt;现代CMake学习笔记（一）&lt;/a&gt;，捋一捋CMake中的一些容易被忽略的问题。先列一下本文内容，然后再就用一个最简单的C++例子，看看能发散多少&lt;/p&gt;
&lt;p&gt;知识点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cmake -h&lt;/code&gt; 查看生成器列表与默认值。&lt;code&gt;-G&lt;/code&gt; 用于选择生成器&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cmake --build .&lt;/code&gt; 隐藏不同生成器的执行差异&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-S&lt;/code&gt; &lt;code&gt;-B&lt;/code&gt; 与 &lt;code&gt;--build&lt;/code&gt;  实现了在源码目录下直接执行out-of-source-build，不需要切换目录&lt;/li&gt;
&lt;li&gt;务必为 cmake指定构建类型 ，如果你不喜欢薛定谔的猫的话。它默认&lt;strong&gt;既不是&lt;/strong&gt;Release&lt;strong&gt;也不是&lt;/strong&gt;Debug&lt;/li&gt;
&lt;li&gt;Debug和Release的选择，区分单配置和多配置的生成器。单配置在config时指定，多配置在build时指定&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以上几点合并起来——如果我要编译release版本程序，且生成产物放置到&lt;code&gt;my-release-dir&lt;/code&gt;下，只需要在源码目录下执行如下命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对单配置生成器（以Ninja为例）&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;my-release-dir&lt;span class="w"&gt; &lt;/span&gt;-G&lt;span class="w"&gt; &lt;/span&gt;Ninja&lt;span class="w"&gt; &lt;/span&gt;-DCMAKE_BUILD_TYPE&lt;span class="o"&gt;=&lt;/span&gt;Release
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;my-release-dir
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;对多配置生成器（以Visual Studio 16 2019为例）&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;my-release-dir&lt;span class="w"&gt; &lt;/span&gt;-G&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Visual Studio 16 2019&amp;quot;&lt;/span&gt;
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;my-release-dir&lt;span class="w"&gt; &lt;/span&gt;--config&lt;span class="w"&gt; &lt;/span&gt;Release
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;言归正传，如下正文：&lt;/p&gt;
&lt;h2 id="cmake"&gt;CMake简单使用？使用简单？&lt;/h2&gt;
&lt;p&gt;CMake用起来很简单，只需要写一个代码文件和工程文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;main.cpp 文件&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hi 1+1=10 ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;CMakeLists.txt&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;project&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;simple-test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;add_executable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;hello&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;main.cpp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;然后就可以放飞自我，在众多平台下构建了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;.
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这时得到一个名为&lt;code&gt;hello&lt;/code&gt;可执行程序，任务完成。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一条命令：为make生成Makefile文件或为其他工具生成工程文件，生成在当前目录下&lt;/li&gt;
&lt;li&gt;第二条命令：调用make或其他工具，在当前目录进行构建&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就这么简单！&lt;/p&gt;
&lt;p&gt;就这么简单？？不妨看看这里面到底有多少注意点...&lt;/p&gt;
&lt;h2 id="make-cmake-build"&gt;make? cmake --build?&lt;/h2&gt;
&lt;p&gt;在上面的例子中，我们使用了&lt;code&gt;cmake --build .&lt;/code&gt; 而不是直接 &lt;code&gt;make&lt;/code&gt;。明明下面这样更简单啊。&lt;/p&gt;
&lt;p&gt;而且很多资料也是这么用的，不是么？&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake .
make                       # 或者 nmake 或 jom 或 ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;因为cmake 有不同的生成器，针对不同的生成器，需要我们需调用不同的命令make/nmake/jom/ninja/msbuild/...&lt;/p&gt;
&lt;p&gt;最终写起来很费心，用&lt;code&gt;--build&lt;/code&gt;这个选项，就不用分情况讨论了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：构建时使用 &lt;code&gt;-v&lt;/code&gt;或&lt;code&gt;--verbose&lt;/code&gt;参数，有时候很有用
&lt;code&gt;cmake --build -v .&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="generator"&gt;生成器（Generator）&lt;/h3&gt;
&lt;p&gt;可用的的生成器有哪些，默认是哪个？可如下命令可以查看。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-h
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;比如，cmake在Ubuntu下的结果如下：（从中可见，该配置下默认是Unix Makefiles）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Generators

The following generators are available on this platform (* marks default):
  Green Hills MULTI            = Generates Green Hills MULTI files
                                 (experimental, work-in-progress).
&lt;span class="k"&gt;*&lt;/span&gt; Unix Makefiles               = Generates standard UNIX makefiles.
  Ninja                        = Generates build.ninja files.
  Ninja Multi-Config           = Generates build-&amp;lt;Config&amp;gt;.ninja files.
  Watcom WMake                 = Generates Watcom WMake makefiles.
  CodeBlocks - Ninja           = Generates CodeBlocks project files.
  CodeBlocks - Unix Makefiles  = Generates CodeBlocks project files.
  CodeLite - Ninja             = Generates CodeLite project files.
  CodeLite - Unix Makefiles    = Generates CodeLite project files.
  Eclipse CDT4 - Ninja         = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - Unix Makefiles= Generates Eclipse CDT 4.0 project files.
  Kate - Ninja                 = Generates Kate project files.
  Kate - Unix Makefiles        = Generates Kate project files.
  Sublime Text 2 - Ninja       = Generates Sublime Text 2 project files.
  Sublime Text 2 - Unix Makefiles
                               = Generates Sublime Text 2 project files.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;要切换不同的Generator，可使用 &lt;code&gt;-G&lt;/code&gt; 参数，比如，工程可以这么构建：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-G&lt;span class="w"&gt; &lt;/span&gt;Ninja
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;另外，如果要改变默认的生成器，可以设置环境变量（就不用每次用&lt;code&gt;-G&lt;/code&gt;指定了）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;CMAKE_GENERATOR=Ninja
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注：如果用conan的话，使用如下环境变量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;CONAN_CMAKE_GENERATOR=Ninja
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_1"&gt;只用一个生成器？&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;CMake本身是跨平台的方案，如果只考虑一个环境。cmake不一定简单了。&lt;/p&gt;
&lt;p&gt;而且如果只用一个平台，且用的Visual Studio或XCode的话，也确实没必要碰cmake。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对上面例子来说，我们只要写一个 main.cpp 文件，然后：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;g++ main.cpp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cl main.cpp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;不就得了？？ 既不需要工程文件，也不需要执行执行两次命令。多简单&lt;/p&gt;
&lt;p&gt;即使文件比较多，要高级一点，也就写个Makefile文件，比如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;cpp&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;每次构建也只需要调用下面一条命令就够了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;make
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;嗯，这样确实不需要cmake，且似乎更简单。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;尽管如此，cmake还是有一定优势，毕竟可以逃避学更底层的一些东西，比如Makefile的规则。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="in-source-buildout-of-source-build"&gt;In-source build？Out-of-source build?&lt;/h2&gt;
&lt;p&gt;在上面例子中，构建的中间产物和目标产物都和源码在一个目录下（即In-source-build)。&lt;/p&gt;
&lt;p&gt;尽管命令简单，但缺点也比较明显。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;污染源码目录，不方便源码管控。需要精细配置 .gitignore等文件&lt;/li&gt;
&lt;li&gt;如果一套源码在不同的编译器下编译，不便于隔离。&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;建议的操作方式是，构建和源码目录隔离，单独创建构建目录（Out-of-source-build)。&lt;/p&gt;
&lt;p&gt;其实操作不复杂&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;build-dir
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-dir
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;第一条命令：为make生成Makefile文件或为其他工具生成工程文件。使用&lt;code&gt;-S&lt;/code&gt;指定源码目录，&lt;code&gt;-B&lt;/code&gt;指定构建目录&lt;/li&gt;
&lt;li&gt;第二条命令：调用make或其他工具，在指定目录下进行构建&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样源码目录没那么乱了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
├── CMakeLists.txt
├── main.cpp
├── build
│   ├── CMakeCache.txt
│   ├── CMakeFiles
...
│   ├── cmake_install.cmake
│   ├── hello
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;当前，可以构建目录和源码目录平行，这样...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
├── src
│   ├── CMakeLists.txt
│   ├── main.cpp
│ 
├── build-msvc2019
├── build-mingw
├── build-clang
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;注意，我们在这儿没有显式切换目录&lt;/strong&gt;，如果你看过老版本的CMake，操作主要在构建目录下进行，写下来会像下面这样：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mkdir build-dir
cd build-dir
cmake ..
cmake --build .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="debug-release-single-configuration"&gt;Debug？ Release ？（单配置生成器 single-configuration）&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;这个一个坑！！！&lt;/p&gt;
&lt;p&gt;我们某个程序Linux下某程序运行很慢，怀疑没用release模式构建。同事排查后：里面没有Debug信息，肯定是Release。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对于单配置的生成器（比如Makefile 和 Ninja）来说，构建类型通过&lt;code&gt;CMAKE_BUILD_TYPE&lt;/code&gt;来指定，它的典型值如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Debug&lt;/code&gt;,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Release&lt;/code&gt;,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RelWithDebInfo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MinSizeRel&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如我们要构建release和debug：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;build-release&lt;span class="w"&gt; &lt;/span&gt;-DCMAKE_BUILD_TYPE&lt;span class="o"&gt;=&lt;/span&gt;Release
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-release

cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;build-debug&lt;span class="w"&gt; &lt;/span&gt;-DCMAKE_BUILD_TYPE&lt;span class="o"&gt;=&lt;/span&gt;Debug
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-debug
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如果不加type，默认是那个呢？&lt;/p&gt;
&lt;h3 id="_2"&gt;默认是什么东西？&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;手册中说：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;initialized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enable_language&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;called&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tree&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;created&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CMAKE_BUILD_TYPE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;environment&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;its&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;used&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Otherwise&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;toolchain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;specific&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;chosen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;often&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;usually&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;desirable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;standard&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;usually&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;more&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;appropriate&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;手册中说，默认&lt;strong&gt;经常&lt;/strong&gt;是空值，&lt;strong&gt;通常&lt;/strong&gt;不符合预期。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以Ubuntu为例，默认时，编译选项中既没有&lt;code&gt;-g&lt;/code&gt;来生成调试信息，也没有&lt;code&gt;-O3&lt;/code&gt;等优化选项。&lt;/p&gt;
&lt;p&gt;完全就是玩具，不要再生产环境用！！（其实这也不全是cmake的锅，前面我们直接调g++不也没有加选项嘛，但是cmake这样弄还是有点接受不了）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;另外，Debug、Release 到底是大写、小写还是首字符大写。官方也没有确定的说法。&lt;/p&gt;
&lt;h3 id="_3"&gt;查看不同类型编译选项&lt;/h3&gt;
&lt;p&gt;要查看编译选项，可以在CMakeLists.txt中添加&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;debug flags:&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_CXX_FLAGS_DEBUG&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;release flags:&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_CXX_FLAGS_RELEASE&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;min size flags:&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_CXX_FLAGS_MINSIZEREL&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;运行cmake，在Linux下大致是下面这样的结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="s s-Atom"&gt;debug&lt;/span&gt; &lt;span class="s s-Atom"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="s s-Atom"&gt;g&lt;/span&gt;
&lt;span class="s s-Atom"&gt;release&lt;/span&gt; &lt;span class="s s-Atom"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;O3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DNDEBUG&lt;/span&gt;
&lt;span class="s s-Atom"&gt;min&lt;/span&gt; &lt;span class="s s-Atom"&gt;size&lt;/span&gt; &lt;span class="s s-Atom"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;Os&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DNDEBUG&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者直接运行 &lt;code&gt;cmake -LA .&lt;/code&gt; 来查看当前项目所有变量值&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;...
CMAKE_CXX_FLAGS:STRING=
CMAKE_CXX_FLAGS_DEBUG:STRING=-g
CMAKE_CXX_FLAGS_MINSIZEREL:STRING=-Os -DNDEBUG
CMAKE_CXX_FLAGS_RELEASE:STRING=-O3 -DNDEBUG
CMAKE_CXX_FLAGS_RELWITHDEBINFO:STRING=-O2 -g -DNDEBUG
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="debug-release-multi-configuration"&gt;Debug？ Release ？（多配置生成器 Multi-configuration）&lt;/h2&gt;
&lt;p&gt;对于  &lt;code&gt;Visual Studio&lt;/code&gt;、&lt;code&gt;Xcode&lt;/code&gt; 与 &lt;code&gt;Ninja Multi-Config&lt;/code&gt;这些多配置生成器来说，在config阶段生效的 &lt;code&gt;CMAKE_BUILD_TYPE&lt;/code&gt; 变量没有任何作用，&lt;strong&gt;会直接被忽略掉&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;配置时，不需要指定类型，但是构建时，需要通过&lt;code&gt;--config&lt;/code&gt;来指定。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;build-dir
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-dir&lt;span class="w"&gt; &lt;/span&gt;--config&lt;span class="w"&gt; &lt;/span&gt;Debug
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;那么config后面可以跟什么呢，手册中说&lt;a href="[cmake-buildsystem(7) — CMake 3.28.0-rc6 Documentation](https://cmake.org/cmake/help/latest/manual/cmake-buildsystem.7.html#build-configurations)"&gt;预定义这么几个&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Debug&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Release&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RelWithDebInfo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MinSizeRel&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这个列表可以使用&lt;code&gt;CMAKE_CONFIGURATION_TYPES&lt;/code&gt;可以手动修改/指定。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;CMAKE_CONFIGURATION_TYPES&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;STRING&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Debug&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="n"&gt;Release&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="n"&gt;MinSizeRel&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="n"&gt;RelWithDebInfo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意：单配置生成器&lt;strong&gt;会直接忽略&lt;/strong&gt; &lt;code&gt;CMAKE_CONFIGURATION_TYPES&lt;/code&gt; 选项。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对于config值，同前面单配置的坑一样，手册中&lt;strong&gt;强调&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;value&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;often&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;none&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;above&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;standard&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;configurations&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;instead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;empty&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;misunderstanding&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Debug&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Users&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;should&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;always&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;explicitly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;specify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;instead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;avoid&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;problem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;默认值通常不是上面几个值中的一个，而是一个空值。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;不要将默认值 等同于 Debug&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;你应该始终显式指定构建类型&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如我们要构建release和debug：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;-B&lt;span class="w"&gt; &lt;/span&gt;build-dir
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-dir&lt;span class="w"&gt; &lt;/span&gt;--config&lt;span class="w"&gt; &lt;/span&gt;Release
cmake&lt;span class="w"&gt; &lt;/span&gt;--build&lt;span class="w"&gt; &lt;/span&gt;build-dir&lt;span class="w"&gt; &lt;/span&gt;--config&lt;span class="w"&gt; &lt;/span&gt;Debug
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="release"&gt;如何默认Release构建？&lt;/h2&gt;
&lt;p&gt;如果只是自己用，设置如下环境变量就行了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;CMAKE_BUILD_TYPE=Release
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如果不想让项目每个参与者都设置环境变量，那么，可以像下面这样改项目的CMakeLists.txt文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;get_property&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;isMultiConfig&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;GLOBAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;PROPERTY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;GENERATOR_IS_MULTI_CONFIG&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;isMultiConfig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;AND&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_BUILD_TYPE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;OR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;DEFINED&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;ENV{CMAKE_BUILD_TYPE}&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_BUILD_TYPE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;Release&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;CACHE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;STRING&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;I prefer Release to Debug&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;endif&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：里面用到了全局属性&lt;code&gt;GENERATOR_IS_MULTI_CONFIG&lt;/code&gt;来判定生成器类型，这一属性是CMAKE 3.9 引入的。&lt;/p&gt;
&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://blog.feabhas.com/2021/07/cmake-part-2-release-and-debug-builds/&lt;/li&gt;
&lt;li&gt;https://stackoverflow.com/questions/23995019/what-is-the-modern-method-for-setting-general-compile-flags-in-cmake&lt;/li&gt;
&lt;li&gt;https://stackoverflow.com/questions/16851084/how-to-list-all-cmake-build-options-and-their-default-values&lt;/li&gt;
&lt;li&gt;https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html&lt;/li&gt;
&lt;li&gt;https://cmake.org/cmake/help/latest/variable/CMAKE_CONFIGURATION_TYPES.html&lt;/li&gt;
&lt;li&gt;https://blog.csdn.net/weixin_39766005/article/details/122439200&lt;/li&gt;
&lt;li&gt;https://www.kitware.com/cmake-and-the-default-build-type/&lt;/li&gt;
&lt;li&gt;https://www.scivision.dev/cmake-default-build-type/&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="cmake"></category></entry><entry><title>现代CMake学习笔记（一）</title><link href="https://blog.debao.me/2023/11/modern-cmake-study-notes-part1/" rel="alternate"></link><published>2023-11-29T22:37:00+08:00</published><updated>2023-11-29T22:37:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-29:/2023/11/modern-cmake-study-notes-part1/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;从默默无闻，到成为C++跨平台构建工具的事实标准，不知道是因为C++太不争气了，还是cmake真的亮眼...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;作为Qt爱好者，还是喜欢从Qt的角度捋一捋 CMake（另外，CMake的gui界面本身就是用Qt开发的）&lt;/p&gt;
&lt;h2 id="cmake"&gt;CMake …&lt;/h2&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;从默默无闻，到成为C++跨平台构建工具的事实标准，不知道是因为C++太不争气了，还是cmake真的亮眼...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;作为Qt爱好者，还是喜欢从Qt的角度捋一捋 CMake（另外，CMake的gui界面本身就是用Qt开发的）&lt;/p&gt;
&lt;h2 id="cmake"&gt;CMake 时间线&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2000年，CMake 诞生，为 ITK 提供跨平台的构建工具&lt;/li&gt;
&lt;li&gt;2006年，KDE 这一Qt社区的重量级框架 确定将kde4构建工具从 autotools 切换为 cmake（这一事件对cmake来说应该影响深远，如果没有KDE决策者顶着各种异议做出的这一决定，估计也没有cmake的今天）&lt;/li&gt;
&lt;li&gt;2009年，Qt5开发阶段，Qt官方针对要不要将构建工具切换到cmake，展开的激烈的讨论，最终确定：不切换到cmake，自行开发Qt新的构建工具qbs。&lt;/li&gt;
&lt;li&gt;2014年，CMake 3.0 发布（传统cmake和现代的cmake的分界线）&lt;/li&gt;
&lt;li&gt;2017年，Visual Studio开始内置支持cmake。方便了Visual Studio下的Qt用户。&lt;/li&gt;
&lt;li&gt;2020年，Qt6正式将cmake作为自身的构建工具。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="qt"&gt;Qt 时间线&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Qt4：尽管KDE4（Qt4的程序库）选择了cmake，但是Qt官方并没有跟进。（这一时期，kde和cmake在共同成长。cmake单方面支持Qt。）&lt;ul&gt;
&lt;li&gt;Qt4.5：Qt进入Nokia旗下后，开始急速扩张。该版本起Qt增加LGPL授权&lt;/li&gt;
&lt;li&gt;PySide：因与PyQt开发者就授权协议无法达成一致，Nokia的巴西团队开始自行开发Python绑定，取名PySide，采用LGPL授权。PySide采用cmake进行构建。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Qt5：社区经过激烈讨论，最终：Qt官方确定自行开发构建工具qbs，不用cmake。（不好评价这一决策对错。毕竟此时的cmake和几年后的cmake压根就不是一个东西。）&lt;ul&gt;
&lt;li&gt;Qt5.5：Qt官方开始为Qt库提供cmake的支持，以便于cmake用户使用Qt。（在次之前，是cmake单方面支持Qt）&lt;/li&gt;
&lt;li&gt;Qt5.15：为了让Qt5用户向Qt6过渡，引入 Version-less CMake target&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Qt6: 正式将cmake作为自身的构建工具&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="qmake"&gt;关于 qmake&lt;/h3&gt;
&lt;p&gt;对于简单的项目，qmake语法真的很简单，简单易学。&lt;/p&gt;
&lt;p&gt;不过，复杂的项目，qmake的工程文件真的像天书一样。本来我不这样认为，只是，当发现下面问题时，我改变了认知：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当提到 .pro .pri .prf .prl 这四种文件，很多qmake用户只认识第一个的时候&lt;/li&gt;
&lt;li&gt;当提及 .pro文件中，如下变量有什么区别&lt;code&gt;$$varName&lt;/code&gt;、&lt;code&gt;$${varName}&lt;/code&gt;、&lt;code&gt;$$(varName)&lt;/code&gt;、&lt;code&gt;$(varName)&lt;/code&gt;、&lt;code&gt;$$[varName]&lt;/code&gt;、&lt;code&gt;${varName}&lt;/code&gt;，qmake用户脑袋嗡嗡的时候&lt;/li&gt;
&lt;li&gt;当问及一个由几十个.pri 和 .pro构成的工程，不少qmake用户没感觉的时候&lt;/li&gt;
&lt;li&gt;当看到qmake的官方维护人员，对于qmake相关的bug充满抱怨的时候&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以，离开qmake是早晚的事情&lt;/p&gt;
&lt;h3 id="qbs"&gt;关于 qbs&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;和Qt发音 Cute 相传承，qbs的官方发音是 Cubes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;2010年，qbs开始开发。这时候Qt在Nokia旗下，也是Qt飞速扩张的时候。（注意和前面的时间线对应，否决cmake的同时开始的qbs）&lt;/li&gt;
&lt;li&gt;2012年，qbs 正式发布。&lt;/li&gt;
&lt;li&gt;2018年，qbs 被官方废弃（deprecated ）。建议用户使用cmake&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;qbs设计挺好的，但是只有Qt社区用，不像cmake有大量的用户群，生态不行。&lt;/p&gt;
&lt;p&gt;简单来说，这个东西就是因cmake不好而生，又因cmake上进而死的。&lt;/p&gt;
&lt;h3 id="pyside"&gt;关于 PySide&lt;/h3&gt;
&lt;p&gt;PySide，据我所知，这是Qt官方最早使用CMake的公开项目。我最初学习cmake也正是因为PySide采用了cmake。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2009，因无法与PyQt开发公司达成一致，Qt官方（Nokia）确定自己Qt4开发Pyhton 绑定，采用LGPL授权。采用cmake构建。&lt;/li&gt;
&lt;li&gt;201x，因为Nokia 的 xxxx xxx xxxx 问题，Qt分批出售，同时Qt旗下的大批项目关停，PySide是其中之一。&lt;/li&gt;
&lt;li&gt;2015，PySide2 开始复活，开始从Qt4向Qt5移植（个人猜测，应该是Python越来越火的原因）&lt;/li&gt;
&lt;li&gt;2018，PySide2 正式发布。基于Qt5 ，官方名字 &lt;strong&gt;Qt for Python&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;2020，PySide6 发布，版本号开始与 Qt6同步。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="cmake_1"&gt;CMake&lt;/h2&gt;
&lt;p&gt;前面提到 CMake分为传统的cmake和现代cmake，但是中文资料似乎跟进很慢。所以：看资料，先看年份（不过，年份问题挡不住大家不加标注的来回转载 ）。&lt;/p&gt;
&lt;p&gt;尽管不喜欢CMake，在传统CMake时代，还是陆续记过一些笔记 &lt;a href="https://blog.csdn.net/dbzhang800/article/details/6314073"&gt;cmake 学习笔记(一)&lt;/a&gt; ... &lt;a href="https://blog.csdn.net/dbzhang800/article/details/6341029"&gt;cmake学习笔记(五)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这些cmake内容尽管放到现在仍然工作的很好，但是就像现在写C++98程序的一样，可以用，但新版本更简洁、易学。&lt;/p&gt;
&lt;p&gt;作为本系列笔记的第一篇，只扯些闲篇。希望能有时间续写后面的内容...&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文有些内容我没有严格找资料考证，有错误之外，欢迎指正&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://lwn.net/Articles/188693/"&gt;Why the KDE project switched to CMake -- and how (continued)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://www.qt.io/blog/qt-and-cmake-the-past-the-present-and-the-future&lt;/li&gt;
&lt;li&gt;http://blog.gerryyang.com/gcc/clang/2022/07/31/modern-cmake-in-action.html&lt;/li&gt;
&lt;li&gt;https://www.qt.io/blog/qt-6-build-system&lt;/li&gt;
&lt;li&gt;https://www.kdab.com/using-cmake-with-qt-5/&lt;/li&gt;
&lt;li&gt;https://www.qt.io/blog/2009/10/12/to-make-or-not-to-make-qmake-and-beyond&lt;/li&gt;
&lt;li&gt;https://www.qt.io/blog/2009/10/14/to-make-or-not-to-make-qmake-and-beyond-redux&lt;/li&gt;
&lt;li&gt;https://steveire.wordpress.com/2017/11/05/embracing-modern-cmake/&lt;/li&gt;
&lt;li&gt;https://devblogs.microsoft.com/cppblog/cmake-support-in-visual-studio/&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/dbzhang800/article/details/6348432"&gt;浅谈 qmake 之 pro、pri、prf、prl文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/dbzhang800/article/details/6758204"&gt;qmake 乱乱乱谈(一)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://www.qt.io/blog/2018/10/29/deprecation-of-qbs&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="cmake"></category><category term="qt"></category></entry><entry><title>证书相关的 X.509、PEM、DER、CER、KEY 等都是什么鬼？</title><link href="https://blog.debao.me/2023/11/what-on-earth-are-x.509-pem-der-cer-key-and-other-certificate-related-terms/" rel="alternate"></link><published>2023-11-25T23:38:00+08:00</published><updated>2023-11-25T23:38:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-25:/2023/11/what-on-earth-are-x.509-pem-der-cer-key-and-other-certificate-related-terms/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;这堆东西在互联网上无处不在，但是每次遇到它们总还是觉得陌生，每次都需要搜索、搜素、...，还是挺没成就感的。&lt;/p&gt;
&lt;p&gt;先梳理梳理 …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;这堆东西在互联网上无处不在，但是每次遇到它们总还是觉得陌生，每次都需要搜索、搜素、...，还是挺没成就感的。&lt;/p&gt;
&lt;p&gt;先梳理梳理，做个记录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_1"&gt;术语&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ASN.1：Abstract Syntax Notation One.  一种接口描述语言（IDL），它是一种描述数据的表示、编码、传输、解码的灵活的记法。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;X.509：&lt;strong&gt;X.509&lt;/strong&gt;是密码学里公钥证书的格式标准，X.509证书包含公钥、身份信息和签名信息。证书采用ASN.1进行描述。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;PKCS：Public Key Cryptography Standards。公钥加密标准，此一标准的设计与发布皆由 RSA 资讯安全公司（英语：RSA Security）所制定。PKCS #8 是存储私钥信息的标准语法；PKCS#10定义证书申请标准；PKCS#12定义个人讯息交换标准（定义包含私钥与公钥证书的文件格式，私钥采用密码保护）。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;PKI：Public Key Infrastructure，公钥基础设施。它是一种用于创建、存储和分发数字证书的系统，用于验证特定的公钥属于某个实体。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;CA：Certificate Authority，数字证书颁发机构。负责存储、发布和签署数字证书&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;数字证书：digital certificate，public key certificate，或者 identiry certificate。是一个经证书颁发机构（CA）数字签名的文件，包含拥有者的公钥及相关身份信息。&lt;/li&gt;
&lt;li&gt;DER：Distinguished Encoding Rules，是ASN.1的一种编码规则。注意，BER，CER 都是ASN.1定义的编码规则。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;PEM：Privacy-Enhanced Main，一种存放key、证书的文件格式的事实标准。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;术语太多，且不同上下文下偏重不同，试图捋一捋：&lt;/p&gt;
&lt;h3 id="asn1-x509-der-pem"&gt;ASN.1→ X.509 →  数字证书 → DER→  PEM&lt;/h3&gt;
&lt;p&gt;个人觉得，可以借用C++来类比一下&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;术语&lt;/th&gt;
&lt;th&gt;类比C++&lt;/th&gt;
&lt;th&gt;备注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ASN.1&lt;/td&gt;
&lt;td&gt;C++ 语言&lt;/td&gt;
&lt;td&gt;ASN.1 一门语言，规定了基本数据类型，扩展机制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X.509&lt;/td&gt;
&lt;td&gt;C++ 类&lt;/td&gt;
&lt;td&gt;X.509使用ASN.1语言，定义一个类（证书类），明确了类有哪些成员，类型是什么&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;数字证书&lt;/td&gt;
&lt;td&gt;类对象&lt;/td&gt;
&lt;td&gt;数字证书时X.509这个类的实例化对象，各个成员都有了具体的值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DER&lt;/td&gt;
&lt;td&gt;.obj&lt;/td&gt;
&lt;td&gt;ASN.1定义各序列化或编译规则，类对象存放在硬盘上的形态。数字证书存在的形式之一&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PEM&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;这个和ASN.1似乎没有半毛钱关系。它可以把任何二进制数据用base64进行编码。数字证书存在的形式之一(把DER产物用 base64编码）。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="pki-ca-ra"&gt;PKI → CA → RA → 数字证书&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;在非对称加密中，公钥是公开的，但如何保证我拿到的证书（公钥）是可信的，而不是中间人的？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="publickey-privatekey" src="https://blog.debao.me/images/publickey-privatekey.png"&gt;&lt;/p&gt;
&lt;p&gt;PKI（Public Key Infrastructure）是解决证书（公钥）信任问题的基础和框架。PKI创建数字证书，将公钥与实体进行映射，将这些证书安全地存储在中央存储库中，并在需要时撤销它们。&lt;/p&gt;
&lt;p&gt;PKI由以下几部分构成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;证书颁发机构（CA，Certificate Authority）：存储、发布和签署数字证书；&lt;/li&gt;
&lt;li&gt;注册机构（RA，Registration Authority）：验证请求其数字证书存储在CA中的实体的身份；&lt;/li&gt;
&lt;li&gt;证书库（LDAP协议列表）&lt;/li&gt;
&lt;li&gt;证书撤销列表（CRL）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="pki-ra-ca-ldap" src="https://blog.debao.me/images/pki-ra-ca-ldap.png"&gt;&lt;/p&gt;
&lt;h3 id="csrkeycrt"&gt;.CSR、.key、CRT等&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CSR：证书请求文件 Certificate Signing Request。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;KEY：私钥，与证书配对使用&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;CRT：可以是二进制DER，可以是文本格式PEM。只包含证书，不存在私钥。Linux一般用CRT后缀，还有其他后缀格式。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用openssl的话：&lt;/p&gt;
&lt;p&gt;生成私钥 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl genrsa -out x.key 2048
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;生成 证书请求文件 (回答它的提问，完成过程)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl req -new -key x.key -out x.csr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后用csr去找CA机构申请正式的证书。&lt;/p&gt;
&lt;p&gt;如果用openssl作为CA来生成证书的话（ca的选项可通过openssl的配置文件配置），可以&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl ca -req -in x.csr -out x.crt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如果有老的证书文件，但是对应的 .csr文件丢失，也可以使用openssl工具，从证书文件中提取出来（注意使用命令行参数&lt;code&gt;-x509toreq&lt;/code&gt;）。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl x509 -in x.crt -signkey x.key -x509toreq -out x.csr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="cercrtderpemp12pfx"&gt;.CER、.CRT、.DER、.PEM、.P12、.pfx 等&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;这些都是证书的后缀名。但后缀名和和文件内容并不一一对应。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;从文件编码来说，X.509的证书格式有两大类：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DER：以二进制格式保存证书，不包含私钥。常用的后缀有：.DER、.CER和.CRT。&lt;/li&gt;
&lt;li&gt;PEM：以ASCII码格式保存证书，可以包含私钥，也可以不包含私钥。常用的后缀有：.PEM、.CER和.CRT。对PEM格式的证书，RFC7468建议的后缀名是 .CRT。&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;对于证书后缀为.CER或.CRT，可以用记事本打开证书，查看证书内容来区分证书格式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果有类似＂-----BEGIN xxxxx-----＂和＂-----END xxxxx-----＂的头尾标记，则证书格式为PEM。&lt;/li&gt;
&lt;li&gt;如果是乱码，则证书格式为DER&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Apache和*nix服务器偏向于PEM格式，而Java和Windows服务器偏向于DER格式。&lt;/p&gt;
&lt;p&gt;另外，还有一个：&lt;/p&gt;
&lt;p&gt;PKCS#12：以二进制格式保存证书，可以包含私钥，也可以不包含私钥。常用的后缀有：.P12和.PFX。主要用于Windows平台&lt;/p&gt;
&lt;p&gt;注意：尽管PEM能存各种东西，但一般不存储PKCS#12的证书。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不同格式证书之间可以互相转换。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OpenSSL中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;openssl x509&lt;/code&gt; 可用于 DER 和 PEM的互转&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl x509 -in x.cer -inform der -out x.crt -outform pem
openssl x509 -in x.crt -inform pem -out x.cer -outform der
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;openssl pkcs12&lt;/code&gt; 可用于PFX和PEM的互转&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;openssl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pkcs12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pfx&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;nodes&lt;/span&gt;
&lt;span class="n"&gt;openssl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pkcs12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;inkey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pfx&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;certfile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="digital-certificate"&gt;数字证书（digital certificate）&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;数字证书解决了"公钥持有者到底是谁"的问题。数字签名技术中无法确定公钥是拥有者的身份。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;数字证书，是一个经证书颁发机构（CA）数字签名的文件，包含拥有者的公钥及相关身份信息。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    证书
        版本号
        序列号
        签名算法
        颁发者
        证书有效期
            此日期前无效
            此日期后无效
        主题
        主题公钥信息
            公钥算法
            主题公钥
        颁发者唯一身份信息（可选项）
        主题唯一身份信息（可选项）
        扩展信息（可选项）
            ...
    证书签名算法
    数字签名
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="x509"&gt;证书标准 X.509&lt;/h3&gt;
&lt;p&gt;X.509是一个和数字证书有关的国际标准。一个X.509证书需要提供下列信息：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Version：X.509标准的版本&lt;/li&gt;
&lt;li&gt;Serial Number：赋给每个证书的序列号&lt;/li&gt;
&lt;li&gt;Signature Algorithm：发布者用于签名的算法&lt;/li&gt;
&lt;li&gt;Issuer：发布者名字&lt;/li&gt;
&lt;li&gt;Validity：证书有效期&lt;/li&gt;
&lt;li&gt;Subject：公钥所有者的名字&lt;/li&gt;
&lt;li&gt;Subject Public Key Info：公钥及其相关信息&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;证书内容可以通过openssl工具查看：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl x509 -in x.crt -text -noout
openssl x509 -in x.crt -inform der -text -noout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="1"&gt;分类1&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DV类型证书：&lt;/strong&gt;域名验证型证书（Domain Validated），证书审核方式为通过验证域名所有权即可签发证书。此类型证书适合个人和小微企业申请，价格较低，申请快捷。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OV类型证书：&lt;/strong&gt;企业验证型证书（Organization Validated ），证书审核方式为通过验证域名所有权和申请企业的真实身份信息才能签发证书。目前运用最广，兼容性最好的证书类型。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;EV类型证书：&lt;/strong&gt;增强验证型证书（Extended Validation），证书审核级别为所有类型最严格验证方式，在OV类型的验证基础上额外验证其他企业的相关信息，比如银行开户许可证书。EV类型证书多使用于银行,金融,证券,支付等高安全标准行业。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DV证书有很多途径可以免费申请，比如 Let's Encrypt。&lt;/p&gt;
&lt;p&gt;不过DV证书的有效期越来越短，目前单个证书有效期一般3个月（2012年之前有效期10年，2012年有效期3年，2018年有效期2年，2020年有效期1年，2023年有效期3个月，...）。&lt;/p&gt;
&lt;h3 id="2"&gt;分类2&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;单域名SSL：&lt;/strong&gt;这类证书只保护一个域名，这些域名形如example.com；ww.example.com, b.example.com等；如果您为www前缀的域名申请证书时，默认是可以保护不带www的主域名，但是当其他前缀的子域名申请证书时，则只能保护当前子域名，不能保护不带前缀的主域名。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;多域名SSL：&lt;/strong&gt;这种类型的证书可以同时保护多个域名，例如：同时保护ww.example.com, b.example.com、c.example.com等，但是不同品牌的多域名证书默认保护的域名数量不一样。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;通配符SSL：&lt;/strong&gt;通配符证书可以保护一个域名下的同级子域名，并且不限制该子域名的数量。例如：这类证书可以保护b.example.com，也可以保护c.example.com，也就是说他可以保护example.com这个域名下的所有同级子域名。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;其他&lt;/h2&gt;
&lt;h3 id="pem"&gt;PEM&lt;/h3&gt;
&lt;p&gt;PEM格式将二进制数据使用base64进行编码，并定义了头和尾。格式如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;-----BEGIN xxxxx-----&lt;/span&gt;

&lt;span class="gh"&gt;-----END xxxxx-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;xxxxx的常见值见 &lt;a href="https://www.rfc-editor.org/rfc/rfc7468"&gt;RFC7468&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CERTIFICATE&lt;/strong&gt;：X.509数字证书，它编码的内容必须是BER/DER格式。 [&lt;a href="https://www.rfc-editor.org/rfc/rfc5280"&gt;RFC5280]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;X509 CRL&lt;/strong&gt; ：证书撤销列表（Certificate Revocation Lists）,要求BER/DER  [&lt;a href="https://www.rfc-editor.org/rfc/rfc5280"&gt;RFC5280]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CERTIFICATE REQUEST&lt;/strong&gt;：证书请求（对应&lt;code&gt;PKCS#10&lt;/code&gt;) ,要求BER/DER [&lt;a href="https://www.rfc-editor.org/rfc/rfc2986"&gt;RFC2986]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PKCS7&lt;/strong&gt; ：签名密文格式 [&lt;a href="https://www.rfc-editor.org/rfc/rfc2315"&gt;RFC2315]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CMS&lt;/strong&gt; [&lt;a href="https://www.rfc-editor.org/rfc/rfc5652"&gt;RFC5652]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PRIVATE KEY&lt;/strong&gt;：非加密的&lt;code&gt;PKCS#8&lt;/code&gt;，要求BER/DER [&lt;a href="https://www.rfc-editor.org/rfc/rfc5208"&gt;RFC5208]&lt;/a&gt; [&lt;a href="https://www.rfc-editor.org/rfc/rfc5958"&gt;RFC5958]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ENCRYPTED PRIVATE KEY&lt;/strong&gt;：&lt;code&gt;加密的PKCS8&lt;/code&gt;，要求BER/DER [&lt;a href="https://www.rfc-editor.org/rfc/rfc5958"&gt;RFC5958]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ATTRIBUTE CERTIFICATE&lt;/strong&gt; [&lt;a href="https://www.rfc-editor.org/rfc/rfc5755"&gt;RFC5755]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PUBLIC KEY&lt;/strong&gt;：X.509公钥 [&lt;a href="https://www.rfc-editor.org/rfc/rfc5280"&gt;RFC5280]&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在OpenSSL中，xxxxx的定义值有（定义在crypto/pem/pem.h）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;# define PEM_STRING_X509_OLD     &amp;quot;X509 CERTIFICATE&amp;quot;
# define PEM_STRING_X509         &amp;quot;CERTIFICATE&amp;quot;
# define PEM_STRING_X509_TRUSTED &amp;quot;TRUSTED CERTIFICATE&amp;quot;
# define PEM_STRING_X509_REQ_OLD &amp;quot;NEW CERTIFICATE REQUEST&amp;quot;
# define PEM_STRING_X509_REQ     &amp;quot;CERTIFICATE REQUEST&amp;quot;
# define PEM_STRING_X509_CRL     &amp;quot;X509 CRL&amp;quot;
# define PEM_STRING_EVP_PKEY     &amp;quot;ANY PRIVATE KEY&amp;quot;
# define PEM_STRING_PUBLIC       &amp;quot;PUBLIC KEY&amp;quot;
# define PEM_STRING_RSA          &amp;quot;RSA PRIVATE KEY&amp;quot;
# define PEM_STRING_RSA_PUBLIC   &amp;quot;RSA PUBLIC KEY&amp;quot;
# define PEM_STRING_DSA          &amp;quot;DSA PRIVATE KEY&amp;quot;
# define PEM_STRING_DSA_PUBLIC   &amp;quot;DSA PUBLIC KEY&amp;quot;
# define PEM_STRING_PKCS7        &amp;quot;PKCS7&amp;quot;
# define PEM_STRING_PKCS7_SIGNED &amp;quot;PKCS #7 SIGNED DATA&amp;quot;
# define PEM_STRING_PKCS8        &amp;quot;ENCRYPTED PRIVATE KEY&amp;quot;
# define PEM_STRING_PKCS8INF     &amp;quot;PRIVATE KEY&amp;quot;
# define PEM_STRING_DHPARAMS     &amp;quot;DH PARAMETERS&amp;quot;
# define PEM_STRING_DHXPARAMS    &amp;quot;X9.42 DH PARAMETERS&amp;quot;
# define PEM_STRING_SSL_SESSION  &amp;quot;SSL SESSION PARAMETERS&amp;quot;
# define PEM_STRING_DSAPARAMS    &amp;quot;DSA PARAMETERS&amp;quot;
# define PEM_STRING_ECDSA_PUBLIC &amp;quot;ECDSA PUBLIC KEY&amp;quot;
# define PEM_STRING_ECPARAMETERS &amp;quot;EC PARAMETERS&amp;quot;
# define PEM_STRING_ECPRIVATEKEY &amp;quot;EC PRIVATE KEY&amp;quot;
# define PEM_STRING_PARAMETERS   &amp;quot;PARAMETERS&amp;quot;
# define PEM_STRING_CMS          &amp;quot;CMS&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;文件后缀常见的有 .pem，.cer, .crt, .key 等，后缀意义不大，可辨识性不高，远没有文件内的这些标签有用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：OpenSSH的私钥PEM格式与此处不同，它的私钥以&lt;code&gt;-----BEGIN OPENSSH PRIVATE KEY-----&lt;/code&gt;开头。这应该不是问题，只要ssh客户端认可即可。详见&lt;a href="https://superuser.com/questions/1720991/differences-between-begin-rsa-private-key-and-begin-openssh-private-key"&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="pem_1"&gt;查看PEM文件内容&lt;/h4&gt;
&lt;p&gt;确定文件类别后，可以通过openssl的对应命令来查看pem文件内容，比如&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看CSR&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl req -text -noout -in blog.debao.me.csr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;查看crt&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl x509 -text -noout -in blog.debao.me.crt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;查看私钥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl rsa -text -noout -in blog.debao.me.key
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_3"&gt;提取公钥&lt;/h3&gt;
&lt;p&gt;可以从RSA 私钥文件、CSR文件、X.509证书中提取公钥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从RSA私钥提取公钥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl rsa -in x.key -pubout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;从.CSR文件提取公钥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl req -in x.csr -pubkey -noout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;从X.509数字证书提取公钥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl x509 -in x.crt -pubkey -noout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_4"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/X.509&lt;/li&gt;
&lt;li&gt;https://www.openssl.org/docs/man3.2/man1/openssl-x509.html&lt;/li&gt;
&lt;li&gt;http://www.herongyang.com/crypto/Certificate_Formats_X509_DER_PEM.html&lt;/li&gt;
&lt;li&gt;http://serverfault.com/questions/9708/what-is-a-pem-file-and-how-does-it-differ-from-other-openssl-generated-key-file&lt;/li&gt;
&lt;li&gt;https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them&lt;/li&gt;
&lt;li&gt;http://www.cnblogs.com/guogangj/p/4118605.html&lt;/li&gt;
&lt;li&gt;&lt;a href="https://linux.cn/article-11810-1.html"&gt;OpenSSL 入门：密码学基础知识 &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://blog.51cto.com/u_15316394/5004231&lt;/li&gt;
&lt;li&gt;&lt;a href="https://segmentfault.com/a/1190000019008423"&gt;[X.509、PKCS文件格式介绍](https://segmentfault.com/a/1190000019008423)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="openssl"></category></entry><entry><title>OpenSSL小记</title><link href="https://blog.debao.me/2023/11/notes-for-openssl/" rel="alternate"></link><published>2023-11-25T14:28:00+08:00</published><updated>2023-11-25T14:28:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-25:/2023/11/notes-for-openssl/</id><summary type="html">&lt;h2 id="_1"&gt;简介&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;1995年，Eric Andrew Young 和 Tim J. Hudson 开发了 SSLeay。这是一个开源的SSL实现，它支持X.509v3证书、PKCS#10证书请求、SSL2和SSL3。（注：eay是Eric Andrew Young的首字母）&lt;/li&gt;
&lt;li&gt;1998年，OpenSSL项目启动，它基于SSLeay的代码进行开发。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OpenSSL可以分成三个主要部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;密码算法库：实现了目 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h2 id="_1"&gt;简介&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;1995年，Eric Andrew Young 和 Tim J. Hudson 开发了 SSLeay。这是一个开源的SSL实现，它支持X.509v3证书、PKCS#10证书请求、SSL2和SSL3。（注：eay是Eric Andrew Young的首字母）&lt;/li&gt;
&lt;li&gt;1998年，OpenSSL项目启动，它基于SSLeay的代码进行开发。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OpenSSL可以分成三个主要部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;密码算法库：实现了目前大部分主流的密码算法和标准。主要包括对称算法、非对称算法、散列算法、数字签名和认证、X509数字证书标准、PKCS12、PKCS7等标准。&lt;/li&gt;
&lt;li&gt;SSL协议库：完全实现SSL协议和TLS协议。&lt;/li&gt;
&lt;li&gt;命令行工具：基于密码算法库和SSL协议库实现的命令。包括各种算法的加密程序和各种类型密钥的产生程序、证书签发和验证程序、SSL连接测试程序等。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;版本&lt;/h3&gt;
&lt;p&gt;在Qt中碰到的几个版本（注：3.0开始版本规则又发生改变，版本号不再用字母后缀）：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;版本&lt;/th&gt;
&lt;th&gt;初始发布日期&lt;/th&gt;
&lt;th&gt;备注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.0.2&lt;/td&gt;
&lt;td&gt;2015年1月22日&lt;/td&gt;
&lt;td&gt;1.0.2u（2019年12月20日）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1.1.1&lt;/td&gt;
&lt;td&gt;2018年9月11日&lt;/td&gt;
&lt;td&gt;1.1.1w（2023年9月11日）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3.0&lt;/td&gt;
&lt;td&gt;2021年9月7日&lt;/td&gt;
&lt;td&gt;（2026年9月7日）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;注：OpenSSL1.1和OpenSSL1.0二进制和源码都不兼容&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_3"&gt;动态库名称&lt;/h3&gt;
&lt;p&gt;OpenSSL库包含两个动态库（共享库）文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;libssl&lt;/li&gt;
&lt;li&gt;libcrypto&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;前者实现ssl的基本功能，后者是各种加密算法。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenSSL1.1之前的版本，在Windows下用MSVC编译的产物，名字比较怪异，是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ssleay32 （等价于 libssl32）&lt;/li&gt;
&lt;li&gt;libeay32&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;初次见到它是在Windows下，有些懵&lt;/p&gt;
&lt;p&gt;好消息是，从OpenSSL1.1开始，在Windows下的命名也规范统一了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;libssl-1_1(-x64).dll&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;libcrypto-1_1(-x64).dll&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id="_4"&gt;命令行工具&lt;/h3&gt;
&lt;p&gt;OpenSSL支持的命令列表，可以通过&lt;code&gt;openssl help&lt;/code&gt; 查看&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl help
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;它会返回内容很长，包括：&lt;/p&gt;
&lt;p&gt;标准命令列表&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Standard commands
asn1parse         ca                ciphers           cms               
crl               crl2pkcs7         dgst              dhparam           
dsa               dsaparam          ec                ecparam  
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;摘要命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Message&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Digest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;commands&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;see&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;`&lt;span class="nv"&gt;dgst&lt;/span&gt;&lt;span class="err"&gt;&amp;#39; command for more details)&lt;/span&gt;
&lt;span class="err"&gt;blake2b512        blake2s256        gost              md4               &lt;/span&gt;
&lt;span class="err"&gt;md5               rmd160            sha1              sha224   &lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;以及&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Cipher&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;commands&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;see&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;`&lt;span class="nv"&gt;enc&lt;/span&gt;&lt;span class="err"&gt;&amp;#39; command for more details)&lt;/span&gt;
&lt;span class="err"&gt;aes-128-cbc       aes-128-ecb       aes-192-cbc       aes-192-ecb       &lt;/span&gt;
&lt;span class="err"&gt;aes-256-cbc       aes-256-ecb       aria-128-cbc      aria-128-cfb&lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_5"&gt;算法&lt;/h2&gt;
&lt;h3 id="cipher"&gt;对称加密算法(Cipher)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;特点是文件加密和解密使用相同的密钥，即加密密钥也用作解密密钥。特点：加解密速度很快，但密钥丢失，会造成安全隐患。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;https://www.openssl.org/docs/man1.1.1/man1/enc.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过&lt;code&gt;openssl enc -list&lt;/code&gt;命令可以获取算法列表&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AES&lt;/li&gt;
&lt;li&gt;Blowfish&lt;/li&gt;
&lt;li&gt;Camelia&lt;/li&gt;
&lt;li&gt;Poly1305&lt;/li&gt;
&lt;li&gt;SEED&lt;/li&gt;
&lt;li&gt;CAST-128&lt;/li&gt;
&lt;li&gt;DES&lt;/li&gt;
&lt;li&gt;IDEA&lt;/li&gt;
&lt;li&gt;RC2&lt;/li&gt;
&lt;li&gt;RC4&lt;/li&gt;
&lt;li&gt;RC5&lt;/li&gt;
&lt;li&gt;Triple DES&lt;/li&gt;
&lt;li&gt;GOST 28147-89&lt;/li&gt;
&lt;li&gt;SM4&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_6"&gt;加解密使用&lt;/h4&gt;
&lt;p&gt;使用AES加密：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl enc -aes-256-cbc -salt -in input.txt -out encrypted.enc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;解密&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl enc -aes-256-cbc -d -in encrypted.enc -out decrypted.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;加解密过程中会提示输入密码，类似下面这样：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;enter AES-256-CBC decryption password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="public-key-cryptography"&gt;非对称加密算法(Public-key cryptography)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;非对称加密算法需要两个密钥：公开密钥（public-key）和私有密钥 （private-key）。公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密（公私钥互为加解密关系）。&lt;/p&gt;
&lt;p&gt;相对于对称加密算法来说，非对称加密算法速度很慢。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;RSA&lt;/li&gt;
&lt;li&gt;DSA&lt;/li&gt;
&lt;li&gt;Diffie-Heliman key exchange(迪菲-赫尔曼密钥交换)&lt;/li&gt;
&lt;li&gt;Elliptic curve(椭圆曲线)&lt;/li&gt;
&lt;li&gt;X25519&lt;/li&gt;
&lt;li&gt;Ed25519&lt;/li&gt;
&lt;li&gt;X448&lt;/li&gt;
&lt;li&gt;Ed448&lt;/li&gt;
&lt;li&gt;GOST R34.10-2001&lt;/li&gt;
&lt;li&gt;SM2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对非对称加密算法，一些知识点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用公钥操作数据（公钥加密，私钥解密） -&amp;gt; 加密&lt;/li&gt;
&lt;li&gt;使用私钥对原文的摘要操作（私钥加密，公钥解密） -&amp;gt; 签名&lt;/li&gt;
&lt;li&gt;公钥和私钥可以互相加密解密（对应上两条）&lt;/li&gt;
&lt;li&gt;公钥对外公开，但私钥一定不能泄露。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_7"&gt;密钥操作&lt;/h4&gt;
&lt;p&gt;OpenSSL3 默认生成密钥格式(PKCS#8)和之前(PKCS#1)不同。&lt;/p&gt;
&lt;p&gt;直观差异体现在密钥文件的开头：&lt;/p&gt;
&lt;p&gt;PKCS#1（只用于RSA）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;RSA&lt;/span&gt; &lt;span class="n"&gt;PRIVATE&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;和PKCS#8（也适用于其他算法的私钥，使用OID进行区分）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;PRIVATE&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在OpenSSL3中，可以使用&lt;code&gt;-traditional&lt;/code&gt;选项来生成老的格式。&lt;/p&gt;
&lt;p&gt;两个格式具体差异，详见：&lt;a href="https://blog.debao.me/2023/12/notes-on-der-encoding-rules/"&gt;DER格式小结&lt;/a&gt;&lt;/p&gt;
&lt;h5 id="openssl-11"&gt;OpenSSL 1.1下&lt;/h5&gt;
&lt;p&gt;生成密钥（PKCS#1格式）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;genrsa&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;
-----BEGIN&lt;span class="w"&gt; &lt;/span&gt;RSA&lt;span class="w"&gt; &lt;/span&gt;PRIVATE&lt;span class="w"&gt; &lt;/span&gt;KEY-----
MIICXAIBAAKBgQDBqdNEz15gMCAH6FQTsqxFFExolLg2VUAdBxks7pl7aIIi4qE
....
/Wo83kTObo8lOMq7MPwFlCWoXNxYZpVdb3WU6eNNLYY&lt;span class="o"&gt;=&lt;/span&gt;
-----END&lt;span class="w"&gt; &lt;/span&gt;RSA&lt;span class="w"&gt; &lt;/span&gt;PRIVATE&lt;span class="w"&gt; &lt;/span&gt;KEY-----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;查看私钥内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-text
RSA&lt;span class="w"&gt; &lt;/span&gt;Private-Key:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;bit,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;primes&lt;span class="o"&gt;)&lt;/span&gt;
modulus:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;00&lt;/span&gt;:c1:a9:d3:44:cf:5e:60:30:20:07:e8:54:13:b2:
&lt;span class="w"&gt;    &lt;/span&gt;ac:45:14:4c:68:94:b8:36:55:40:1d:07:19:2c:ee:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;99&lt;/span&gt;:7b:68:82:22:e2:a1:33:b0:db:92:94:be:f0:13:
&lt;span class="w"&gt;    &lt;/span&gt;2b:03:ee:37:09:82:f1:3b:3d:cd:2b:2f:df:5e:8a:
....
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;https://www.openssl.org/docs/man1.1.1/man1/openssl-pkcs8.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PKCS#1到PKCS#8转换（-nocrypt生成不带密码的私钥)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl.exe&lt;span class="w"&gt; &lt;/span&gt;pkcs8&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.pem&lt;span class="w"&gt; &lt;/span&gt;-topk8&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.pem&lt;span class="w"&gt; &lt;/span&gt;-nocrypt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;PKCS#8 到PKCS#1转换&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl.exe&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.pem&lt;span class="w"&gt;  &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h5 id="openssl-30"&gt;OpenSSL 3.0下&lt;/h5&gt;
&lt;p&gt;生成密钥（PKCS8格式）:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;genrsa&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;
-----BEGIN&lt;span class="w"&gt; &lt;/span&gt;PRIVATE&lt;span class="w"&gt; &lt;/span&gt;KEY-----
MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAMXQYsn+DeflrheT
...
&lt;span class="nv"&gt;Lm9g7JNkTzCgiwQ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
-----END&lt;span class="w"&gt; &lt;/span&gt;PRIVATE&lt;span class="w"&gt; &lt;/span&gt;KEY-----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;查看密钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-text
Private-Key:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;bit,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;primes&lt;span class="o"&gt;)&lt;/span&gt;
modulus:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;00&lt;/span&gt;:c4:3d:a2:07:14:01:d2:68:20:f5:8b:72:89:4f:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;42&lt;/span&gt;:58:a9:70:0f:94:1e:76:47:d0:ea:be:93:c5:ae:
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;导出公钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-pubout&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa.pub
$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-pubout
-----BEGIN&lt;span class="w"&gt; &lt;/span&gt;PUBLIC&lt;span class="w"&gt; &lt;/span&gt;KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDBqdNEz15gMCAH6FQTsqxFFEx
...
aW+wLBQ5O4mCIQyALQIDAQAB
-----END&lt;span class="w"&gt; &lt;/span&gt;PUBLIC&lt;span class="w"&gt; &lt;/span&gt;KEY-----
writing&lt;span class="w"&gt; &lt;/span&gt;RSA&lt;span class="w"&gt; &lt;/span&gt;key
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注：-in -out 默认都是私钥，通过-pubout指定输出公钥；同样通过-pubin指定输入公钥。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id="pem-der"&gt;PEM 与 DER转换&lt;/h5&gt;
&lt;p&gt;输出格式默认都是pem格式，如果要使用der格式，可以使用 &lt;code&gt;-outform DER&lt;/code&gt;指定：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;rsa&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa.pem&lt;span class="w"&gt; &lt;/span&gt;-outform&lt;span class="w"&gt; &lt;/span&gt;DER&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa.der
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="_8"&gt;加解密操作&lt;/h4&gt;
&lt;p&gt;使用公钥加密文件（openssl命令行只能使用公钥加密，其C API支持私钥加解密）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;pkeyutl&lt;span class="w"&gt; &lt;/span&gt;-encrypt&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;a.txt&lt;span class="w"&gt; &lt;/span&gt;-pubin&lt;span class="w"&gt; &lt;/span&gt;-inkey&lt;span class="w"&gt; &lt;/span&gt;rsa.pub&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;rsa_chiper.enc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;即使是如下这样写，还是用的私钥文件中的公钥进行的加密：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl pkeyutl -encrypt -in a.txt -inkey rsa.key -out rsa_chiper.enc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;使用私钥解密文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;pkeyutl&lt;span class="w"&gt; &lt;/span&gt;-decrypt&lt;span class="w"&gt; &lt;/span&gt;-in&lt;span class="w"&gt; &lt;/span&gt;rsa_chiper.enc&lt;span class="w"&gt; &lt;/span&gt;-inkey&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;a.txt.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;填充方式可通过选项指定：&lt;code&gt;-pkeyopt rsa_padding_mode:oaep&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_9"&gt;签名与验证&lt;/h4&gt;
&lt;p&gt;签名（输入必须是哈希值，该命令不会对输入内容执行哈希操作）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl pkeyutl -sign -in sha384.txt -inkey rsa.key  -out sha384.sig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;验证&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl pkeyutl -verify -in sha384.txt -pubin -inkey rsa.pub -sigfile sha384.sig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="openssh"&gt;OpenSSH&lt;/h4&gt;
&lt;p&gt;注意，OpenSSH生成公钥私钥格式与OpenSSL不同！！不要混淆&lt;/p&gt;
&lt;p&gt;它的私钥头部如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;-----&lt;/span&gt;&lt;span class="kr"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;OPENSSH&lt;/span&gt; &lt;span class="n"&gt;PRIVATE&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;它生成私钥的命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh-keygen -t rsa -b 4096
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="cryptographic-hash-functions"&gt;散列函数(Cryptographic hash Functions)&lt;/h3&gt;
&lt;p&gt;散列函数 又称 哈希函数、摘要算法。它是一种单向算法，用户可以通过散列函数对目标信息生成一段特定长度的唯一的Hash值，却不能通过这个Hash值逆向获得目标信息。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;特点：不可逆，加密后值很小（128位，256位，512位等）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;散列函数有两大家族：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MD：Message Digest Algorithm &lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;MD4：1990年发布。早已被攻破。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;MD5：Message Digest 5，1992年发布。早已被攻破，不适用于安全认证或数字签名。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;SHA：安全散列算法（Secure Hash Algorithm），由美国国家安全局（NSA）设计，美国国家标准与技术研究所发布。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;SHA-0：1993年发布后，但很快被撤回。&lt;/li&gt;
&lt;li&gt;SHA-1：1995年发布，使用很广泛（用于 TLS, GnuPG, SSH, IPsec等）。2017年已经被荷兰CWI和Google攻破。&lt;/li&gt;
&lt;li&gt;SHA-2：2001年发布，包括SHA-224, SHA-256, SHA-384, SHA-512, SHA512/224, SHA512/256。&lt;/li&gt;
&lt;li&gt;SHA-3：2015年发布。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="_10"&gt;算法列表&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;https://www.openssl.org/docs/manmaster/man1/openssl-dgst.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OpenSSL支持的算法列表，可以通过&lt;code&gt;openssl dgst -list&lt;/code&gt;命令获得：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;dgst&lt;span class="w"&gt; &lt;/span&gt;-list
Supported&lt;span class="w"&gt; &lt;/span&gt;digests:
-blake2b512&lt;span class="w"&gt;                &lt;/span&gt;-blake2s256&lt;span class="w"&gt;                &lt;/span&gt;-md4
-md5&lt;span class="w"&gt;                       &lt;/span&gt;-md5-sha1&lt;span class="w"&gt;                  &lt;/span&gt;-mdc2
-ripemd&lt;span class="w"&gt;                    &lt;/span&gt;-ripemd160&lt;span class="w"&gt;                 &lt;/span&gt;-rmd160
-sha1&lt;span class="w"&gt;                      &lt;/span&gt;-sha224&lt;span class="w"&gt;                    &lt;/span&gt;-sha256
-sha3-224&lt;span class="w"&gt;                  &lt;/span&gt;-sha3-256&lt;span class="w"&gt;                  &lt;/span&gt;-sha3-384
-sha3-512&lt;span class="w"&gt;                  &lt;/span&gt;-sha384&lt;span class="w"&gt;                    &lt;/span&gt;-sha512
-sha512-224&lt;span class="w"&gt;                &lt;/span&gt;-sha512-256&lt;span class="w"&gt;                &lt;/span&gt;-shake128
-shake256&lt;span class="w"&gt;                  &lt;/span&gt;-sm3&lt;span class="w"&gt;                       &lt;/span&gt;-ssl3-md5
-ssl3-sha1&lt;span class="w"&gt;                 &lt;/span&gt;-whirlpool
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;也可以通过&lt;code&gt;openssl list -digest-algorithms&lt;/code&gt;命令（这个返回的列表比较长，多出来的别名？）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;list&lt;span class="w"&gt; &lt;/span&gt;-digest-algorithmsRSA-MD4&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;MD4
RSA-MD5&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;MD5
RSA-MDC2&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;MDC2
RSA-RIPEMD160&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;RIPEMD160
RSA-SHA1&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA1
RSA-SHA1-2&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;RSA-SHA1
RSA-SHA224&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA224
RSA-SHA256&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA256
RSA-SHA3-224&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-224
RSA-SHA3-256&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-256
RSA-SHA3-384&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-384
RSA-SHA3-512&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-512
RSA-SHA384&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA384
RSA-SHA512&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA512
RSA-SHA512/224&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA512-224
RSA-SHA512/256&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA512-256
RSA-SM3&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SM3
BLAKE2b512
BLAKE2s256
id-rsassa-pkcs1-v1_5-with-sha3-224&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-224
id-rsassa-pkcs1-v1_5-with-sha3-256&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-256
id-rsassa-pkcs1-v1_5-with-sha3-384&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-384
id-rsassa-pkcs1-v1_5-with-sha3-512&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;SHA3-512
MD4
&lt;span class="nv"&gt;md4WithRSAEncryption&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;MD4
MD5
MD5-SHA1
&lt;span class="nv"&gt;md5WithRSAEncryption&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;MD5
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="_11"&gt;生成摘要&lt;/h4&gt;
&lt;p&gt;要获得一个文件的md5值，可以使用dgst命令:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$openssl dgst -md5 dbzhang800.txt
MD5(dbzhang800.txt)= 520e37bcab36e7f6c63a9fe8571fef5c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者直接用md5命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$openssl md5 dbzhang800.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;将结果以二进制输出到文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$openssl dgst -md5 -binary -out dgst.out dbzhang800.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;使用16进制编辑器查看dgst.out结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;00000000&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;520&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;373&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f36&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f3f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f3a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f3f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;571&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f5c&lt;/span&gt;
&lt;span class="mi"&gt;00000010&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;默认的dgst是SHA256：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;dgst&lt;span class="w"&gt; &lt;/span&gt;dbzhang800.txt
SHA256&lt;span class="o"&gt;(&lt;/span&gt;dbzhang800.txt&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;a327231c982850cb61eecfb3da89aa6831d09d2c9e209acb58658faa78ccfeeb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;加密后的值被称为hash值，hash值用于确保数据的完整性，但是不能保证数据传输存在身份认证机制。&lt;/p&gt;
&lt;h4 id="_12"&gt;数字签名&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;数字签名它是基于非对称密钥加密技术与数字摘要算法技术的应用，只有私钥拥有者才能产生别人无法伪造的一段数字串。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;发送方通过私钥加密后数字签名发送给接收方，接收方使用公钥解密，&lt;strong&gt;通过对比解密后的摘要和使用Hash函数对数据电文进行计算的摘要 判定其是否被篡改。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;生成签名&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;dgst&lt;span class="w"&gt; &lt;/span&gt;-sha256&lt;span class="w"&gt; &lt;/span&gt;-sign&lt;span class="w"&gt; &lt;/span&gt;rsa.key&lt;span class="w"&gt; &lt;/span&gt;-out&lt;span class="w"&gt; &lt;/span&gt;signature.sign&lt;span class="w"&gt; &lt;/span&gt;a.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;验证签名&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;dgst&lt;span class="w"&gt; &lt;/span&gt;-sha256&lt;span class="w"&gt; &lt;/span&gt;-verify&lt;span class="w"&gt; &lt;/span&gt;rsa.pub&lt;span class="w"&gt; &lt;/span&gt;-signature&lt;span class="w"&gt; &lt;/span&gt;signature.sign&lt;span class="w"&gt; &lt;/span&gt;a.txt
Verified&lt;span class="w"&gt; &lt;/span&gt;OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;结果为 Verification failure 或 Verified OK&lt;/p&gt;
&lt;h2 id="openssl-ca"&gt;OpenSSL 作为CA&lt;/h2&gt;
&lt;h4 id="_13"&gt;配置文件&lt;/h4&gt;
&lt;p&gt;在Ubuntu下，配置文件在 /etc/ssl/openssh.cnf&lt;/p&gt;
&lt;p&gt;在Windows下安装OpenSSL-Win32，安装目录下有一个配置文件openssh.cnf&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果报错，可通过环境变量来指定它。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;set OPENSSL_CONF=[path-to-OpenSSL-install-dir]\openssl.cnf&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[ ca ]&lt;/span&gt;
&lt;span class="na"&gt;default_ca&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;CA_default&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="c1"&gt;# The default ca section&lt;/span&gt;

&lt;span class="c1"&gt;####################################################################&lt;/span&gt;
&lt;span class="k"&gt;[ CA_default ]&lt;/span&gt;

&lt;span class="na"&gt;dir&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;./demoCA&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;# Where everything is kept&lt;/span&gt;
&lt;span class="na"&gt;certs&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/certs&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="c1"&gt;# Where the issued certs are kept&lt;/span&gt;
&lt;span class="na"&gt;crl_dir&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/crl&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;# Where the issued crl are kept&lt;/span&gt;
&lt;span class="na"&gt;database&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/index.txt&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# database index file.&lt;/span&gt;
&lt;span class="c1"&gt;#unique_subject = no            # Set to &amp;#39;no&amp;#39; to allow creation of&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="c1"&gt;# several certs with same subject.&lt;/span&gt;
&lt;span class="na"&gt;new_certs_dir&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/newcerts&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;# default place for new certs.&lt;/span&gt;

&lt;span class="na"&gt;certificate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/cacert.pem&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;# The CA certificate&lt;/span&gt;
&lt;span class="na"&gt;serial&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/serial&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="c1"&gt;# The current serial number&lt;/span&gt;
&lt;span class="na"&gt;crlnumber&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/crlnumber&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# the current crl number&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="c1"&gt;# must be commented out to leave a V1 CRL&lt;/span&gt;
&lt;span class="na"&gt;crl&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/crl.pem&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;# The current CRL&lt;/span&gt;
&lt;span class="na"&gt;private_key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;$dir/private/cakey.pem&lt;/span&gt;&lt;span class="c1"&gt;# The private key&lt;/span&gt;
&lt;span class="na"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="ca"&gt;建立CA目录&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
`-- myCA/
    |-- index.txt
    |-- newcerts/
    |-- private/
    `-- serial
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;private/ 存放证书私钥&lt;/li&gt;
&lt;li&gt;serial 里面写入序列号，比如可以写入“8101”或其他数字，后期递增
      echo 8101 &amp;gt; serial&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ca_1"&gt;CA自签名证书&lt;/h4&gt;
&lt;p&gt;生成私钥，并放入我们在配置文件中指定的位置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl genrsa -des3 -out myCA\private\cakey.pem 2048
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;生成CA证书请求&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl.exe req -new -days 7300 -key myCA\private\cakey.pem -out myCA\careq.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;签名证书，将其放置到配置文件期望的位置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl.exe ca -selfsign -in myCA\careq.pem -out myCA\cacert.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在该步骤中，配置文件开始起作用了，当前目录结构：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
`-- myCA
    |-- cacert.pem
    |-- careq.pem
    |-- index.txt
    |-- index.txt.attr
    |-- index.txt.old
    |-- newcerts
    |   `-- 8101.pem
    |-- private
    |   `-- cakey.pem
    |-- serial
    `-- serial.old
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;接下来，该CA就可以为其他csr生成证书了。&lt;/p&gt;
&lt;h2 id="openssl"&gt;OpenSSL命令行参数备忘&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;非对称算法：-in -out 默认都是私钥，通过-pubout指定输出公钥；同样通过-pubin指定输入公钥。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;通过s client可以读取网站的证书&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ openssl s_client -connect blog.debao.me:443&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;x509和pkcs12这两个命令可用于操作证书，比如证书格式之间的转换：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;openssl pkcs12 -export -out certificate.pfx -inkey privatekey.key -in cert.crt&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;生成 证书请求文件 (回答它的提问，完成过程)，而后用csr去找CA机构申请正式的证书。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;openssl req -new -key x.key -out x.csr&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="qt-openssl"&gt;Qt 与 OpenSSL&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Qt官方提供的Windows下的安装包，默认不打包OpenSSL。在Qt5.13之前，如果需要QSslScocket功能，需要手动安装OpenSSL。安装时需要注意版本！！！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这块有点乱，先简单记录。要验证的话，可能需要结合Qt源码，以及Qt的bug来看才行&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Qt 从 5.2.0 起，不再官方支持 OpenSSL 低于 1.0.0 的版本。&lt;/li&gt;
&lt;li&gt;Qt 从 5.10起，官方二进制包开始使用OpenSSL 1.1&lt;/li&gt;
&lt;li&gt;Qt 从 5.12.4起，官方二进制包开始使用 OpenSSL1.1.1 的。&lt;/li&gt;
&lt;li&gt;Qt 从 6.2.0 起，开始支持 OpenSSL3.0（自己编译Qt）&lt;/li&gt;
&lt;li&gt;Qt 从 6.5.0 起，官方二进制包开始使用 OpenSSL 3.0。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;简单说：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;OpenSSL 3.0(Qt &amp;gt;= 6.5.0)
OpenSSL 1.1.x(Qt &amp;gt;= 5.10 Qt &amp;lt; 6.5.0)
OpenSSL 1.0.2(Qt &amp;lt; 5.10)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注： Qt 5.13起，在Windows下开始增加schannel作为ssl后端，可作为 openssl 的替代。Qt6.3起，编译Qt时，schannel插件已默认启用。如果不需要OpenSSL的扩展功能的话，新版本的Qt程序可以不用纠结OpenSSL的问题，使用Schannel就行。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_14"&gt;其他&lt;/h2&gt;
&lt;h3 id="git"&gt;Git&lt;/h3&gt;
&lt;p&gt;Windows下安装的Git，会自带 openssl，这个东西功能不全，要避免使用。&lt;/p&gt;
&lt;h3 id="yao-yue"&gt;钥yào yuè&lt;/h3&gt;
&lt;p&gt;密钥中的“钥”，读音争议很大 。&lt;/p&gt;
&lt;p&gt;《现代汉语词典（第7版）》：【密钥】mìyuè （口语中多读mìyào）。&lt;/p&gt;
&lt;h2 id="_15"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://www.openssl.org/docs/man3.0/&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/OpenSSL&lt;/li&gt;
&lt;li&gt;https://www.feistyduck.com/library/openssl-cookbook/online/&lt;/li&gt;
&lt;li&gt;https://blog.csdn.net/zhihao_li/article/details/131068038&lt;/li&gt;
&lt;li&gt;https://unix.stackexchange.com/questions/296697/how-to-encrypt-a-file-with-private-key&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="openssl"></category><category term="crypto"></category></entry><entry><title>Gitlab与Gerrit小记</title><link href="https://blog.debao.me/2023/11/notes-on-gitlab-and-gerrit/" rel="alternate"></link><published>2023-11-23T20:11:00+08:00</published><updated>2023-11-23T20:11:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-23:/2023/11/notes-on-gitlab-and-gerrit/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;9年前在公司内网部署了Gerrit2，一直使用至今。是时候重现看看Gerrit2和GitLab了...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="gerrit-gitlab"&gt;Gerrit 与 GitLab&lt;/h2&gt;
&lt;p&gt;Gerrit在特定领域（如Android开源项目）和特定组织中仍然很受欢迎，&lt;/p&gt;
&lt;p&gt;GitLab的用户群更加广泛。GitLab提供了更全面的功能和工具。&lt;/p&gt;
&lt;h3 id="gerrit"&gt;Gerrit&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.gerritcodereview.com/"&gt;Gerrit Code Review | Gerrit Code Review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerrit： Gerrit是由Google的一位工程师Shawn  Pearce于2008年创建的。最初，Gerrit是为了解决Android开源项目的代码审查需求而开发的。Gerrit提供了一种基于Web的代码审查工作流，允 …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;9年前在公司内网部署了Gerrit2，一直使用至今。是时候重现看看Gerrit2和GitLab了...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="gerrit-gitlab"&gt;Gerrit 与 GitLab&lt;/h2&gt;
&lt;p&gt;Gerrit在特定领域（如Android开源项目）和特定组织中仍然很受欢迎，&lt;/p&gt;
&lt;p&gt;GitLab的用户群更加广泛。GitLab提供了更全面的功能和工具。&lt;/p&gt;
&lt;h3 id="gerrit"&gt;Gerrit&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.gerritcodereview.com/"&gt;Gerrit Code Review | Gerrit Code Review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerrit： Gerrit是由Google的一位工程师Shawn  Pearce于2008年创建的。最初，Gerrit是为了解决Android开源项目的代码审查需求而开发的。Gerrit提供了一种基于Web的代码审查工作流，允许开发人员在代码变更之前进行同行评审和讨论。它的目标是提供一个高效的代码审核平台，以促进团队合作和代码质量的提高。&lt;/p&gt;
&lt;h3 id="gitlab"&gt;GitLab&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://about.gitlab.com/"&gt;The most-comprehensive AI-powered DevSecOps platform | GitLab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GitLab： GitLab是由Dmitriy Zaporozhets和Valery  Sizov于2011年创建的。最初，GitLab只是一个基于Git的代码托管平台，它提供了类似于GitHub的功能，但在自托管方面更加强调。然而，随着时间的推移，GitLab逐渐发展成为一个全面的DevOps平台，为软件开发生命周期的各个阶段提供支持。&lt;/p&gt;
&lt;h2 id="_1"&gt;对比&lt;/h2&gt;
&lt;p&gt;Gerrit2界面简单，专注于代码审核以变更集管理：强调逐行代码审核，基于变更集每个变更都是独立的单元，权限控制更细。&lt;/p&gt;
&lt;p&gt;Gitlab功能更全面，是一个DevOps平台。单就代码审核的话，比Gerrit2逊色。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/th&gt;
&lt;th&gt;Gerrit&lt;/th&gt;
&lt;th&gt;GitLab&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;主要用途&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;代码审查和代码仓库管理&lt;/td&gt;
&lt;td&gt;DevOps 平台，集成代码仓库、CI/CD、项目管理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;代码审查&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;强调逐行代码审查，适用于大规模代码库&lt;/td&gt;
&lt;td&gt;提供代码审查功能，但不如 Gerrit 专注&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CI/CD&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;需要集成其他工具（如 Jenkins）&lt;/td&gt;
&lt;td&gt;内置 CI/CD 功能，支持自动化流水线&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;分支管理&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;基于变更集（Change Set），每个变更都是一个独立的单元&lt;/td&gt;
&lt;td&gt;基于 Git 分支模型，支持分支保护和合并请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;权限控制&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;细粒度权限控制，适合复杂项目&lt;/td&gt;
&lt;td&gt;提供角色和权限管理，适合团队协作&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;用户界面&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;相对简洁，专注于代码审查和变更集管理&lt;/td&gt;
&lt;td&gt;现代化界面，包含丰富的项目管理功能&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;集成工具&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;需要手动集成多种工具和服务&lt;/td&gt;
&lt;td&gt;集成了大量 DevOps 工具，如 Docker、Kubernetes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;易用性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;学习曲线较陡峭，适合有经验的开发团队&lt;/td&gt;
&lt;td&gt;易于上手，适合各种规模的开发团队&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;托管选项&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;主要为自托管&lt;/td&gt;
&lt;td&gt;提供自托管和 GitLab.com 托管服务&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;社区与支持&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;社区支持，企业版需付费支持&lt;/td&gt;
&lt;td&gt;社区版免费，企业版提供商业支持&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;扩展性&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;可通过插件和脚本扩展功能&lt;/td&gt;
&lt;td&gt;丰富的 API 和插件市场，易于扩展&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="_2"&gt;其他人总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://zhangmengpl.gitbooks.io/gitlab-guide/content/gitlabvsgerrit.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;风格&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab的特点是一个人维系一个分支。
gerrit的特点是一个团队维系一个分支。（这里的分支对应一个业务需求）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;权限&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab提供了比较多的选择，可以根据需要创建project，每个团队可以根据自己的需求管理自己的代码，方式更加的灵活。
gerrit比较单一，而且权限配置比较复杂，往往都是要联系管理员做出修改，每个团队很难做到对代码的个性化管理。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;评审&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab是以merge request作为一次review，merge request中可能包含多个 commit，如果review不通过也不需要发起另一次merge request。
gerrit是以commit作为一次review，由于changeId的存在，可以对一次commit反复的进行review。
如果task划分的粒度够细的话，并不会影响各个团队的review习惯。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;团队协作：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab可以选择公开代码，团队间可以看到互相的代码，有利于团队的协作。
gerrit由于权限控制问题，只能在权限范围内公开代码。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;共享&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab 可以提供issues，wiki等功能方便开发者与使用者之间的沟通，并且gitlab可以无缝的与一些项目管理工具集成，比如:jira。
gerrit 这个方面比较欠缺。
gitlab每个项目都有自己的wiki，很方便查看。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="mediawiki-gitlab"&gt;维基（MediaWiki） gitlab迁移&lt;/h2&gt;
&lt;p&gt;2020年，从gerrit迁移到gitalb。他们做了大量评估工作&lt;/p&gt;
&lt;p&gt;操作比较&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://www.mediawiki.org/wiki/GitLab/Gerrit_to_GitLab&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gerrit能够 -2, -1, 0, 1, 2打分。-2可以阻挡后续进行&lt;/li&gt;
&lt;li&gt;gerrit有dashboards看板，待review的change。可以设置email通知&lt;/li&gt;
&lt;li&gt;gerrit方便添加reviewer人员&lt;/li&gt;
&lt;li&gt;gerrit的评审是基于 commit 而不是 branch 的，粒度更细&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;迁移决定：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.mediawiki.org/wiki/GitLab_consultation"&gt;GitLab consultation - MediaWiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[From Gerrit to Gitlab: join the discussion – &lt;a href="https://techblog.wikimedia.org/2020/09/21/from-gerrit-to-gitlab-join-the-discussion/"&gt;[WM:TECHBLOG]] (wikimedia.org)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.mediawiki.org/wiki/GitLab"&gt;GitLab - MediaWiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意：mediawiki不使用 gitlab的 wiki 等功能，只是用git相关的功能以及review&lt;/p&gt;
&lt;h2 id="gerrit_1"&gt;其他人对 gerrit抱怨&lt;/h2&gt;
&lt;p&gt;主要是gerrit与后面主流的github、gitlab、bitbucket工作流不太一样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.reddit.com/r/git/comments/kbn8ri/gerrit_is_insanity_why_should_i_use_it/"&gt;Gerrit is Insanity. Why should I use it? : r/git (reddit.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="Git"></category></entry><entry><title>在WinForm程序中显示Git版本信息的一种方式</title><link href="https://blog.debao.me/2023/11/one-way-to-display-git-version-information-in-a-winforms-program-s-about-dialog/" rel="alternate"></link><published>2023-11-21T19:43:00+08:00</published><updated>2023-11-21T19:43:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-21:/2023/11/one-way-to-display-git-version-information-in-a-winforms-program-s-about-dialog/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;对于一个开发桌面程序的小团队来说，如果 一没有专门人员负责软件打包发布，二没有CI/CD系统进行自动发布，且需要频繁迭代的话，开发工 …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;对于一个开发桌面程序的小团队来说，如果 一没有专门人员负责软件打包发布，二没有CI/CD系统进行自动发布，且需要频繁迭代的话，开发工程师最好保证每次代码提交后，生成的产物自动生成附带不同的版本号。不然在迭代过程中，和测试人员或用户交流会有一定困难。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对于使用qmake或cmake等构建工具的工程，可以直接：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在工程文件中通过git获取仓库信息，而后通过宏定义传递到源码；&lt;/li&gt;
&lt;li&gt;或者构建过程中生成一个临时文件，作为源码一部分使用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;那么对于一个C#的WinForm程序，如何在Visual Studio下每次构建时自动调用git来获取仓库信息呢？&lt;/p&gt;
&lt;p&gt;其实也简单，只需要一个.tt文件进行了。接下来，我们使用Visual Studio 2019自带 T4 功能，一步一步实现如下效果：&lt;/p&gt;
&lt;p&gt;&lt;img alt="c-sharp-about-dialog" src="https://blog.debao.me/images/c-sharp-about-dialog.png"&gt;&lt;/p&gt;
&lt;p&gt;即：在C#程序 &lt;strong&gt;About对话框&lt;/strong&gt; 以及在程序 &lt;strong&gt;属性对话框&lt;/strong&gt; 中显示版本信息。那么：&lt;/p&gt;
&lt;h2 id="_1"&gt;如何确定版本号？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;其实，版本号定义本身比较随意的，比如大佬 高德纳 使用圆周率 &lt;code&gt;π&lt;/code&gt;和自然底数&lt;code&gt;e&lt;/code&gt;作为他软件作品的版本号。截至目前Tex的版本号是3.141592653。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;语义化版本（&lt;strong&gt;SemVer&lt;/strong&gt;）在开源社区用的比较广，文档中&lt;a href="https://semver.org/lang/zh-CN/"&gt;各字段定义&lt;/a&gt;也很详细。简单说，版本号一般由三部分构成：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;MAJOR.MINOR.PATCH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而微软的定义是这样的（一直不清楚它的Build number是怎么用的）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Major.Minor.Build.Revision
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在本文中，我们使用4个数字来表示版本号，比如 1.0.0.2。&lt;/p&gt;
&lt;p&gt;其中，前三位是代码中或配置文件中写死的(有重大改动时可手动升版)，最后一位是自动生成的，只需要保证最后一位单调增加就行（当然，不同人在不同时间编译同一个版本，最后一位也要保持一致）。&lt;/p&gt;
&lt;p&gt;老的SVN干这个事情很简单，反而Git作为分布式源码控制系统，做这个事情还真不擅长，它只保证每次提交生成一个长长的SHA1值，但是这个值又对用户没什么用。简单起见，我们可以使用git仓库的提交数或者距离上一个tag的提交数作为版本号的最后一位。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;尽管代码每次提交生成的长长的SHA1值对客户没有用，但是对偷懒的程序员来说，实在太有用了，依靠它，随时可以找到这个版本对应的源码。所以这个东西我们此次也显示出来了，不过SHA1也不用全显示，一般显示开头的几个数字就够了。如果仓库中有tag，使用describe获取描述信息也是不错选择。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_2"&gt;信息放什么地方？&lt;/h2&gt;
&lt;p&gt;在C#中，版本信息一般都存放在一个名为 AssemblyInfo.cs的文件中。文件内容大致如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

[assembly: AssemblyTitle(&amp;quot;Debao&amp;#39;s C# Demo&amp;quot;)]
[assembly: AssemblyDescription(&amp;quot;All right reserved.&amp;quot;)]
[assembly: AssemblyConfiguration(&amp;quot;&amp;quot;)]
[assembly: AssemblyCompany(&amp;quot;&amp;quot;)]
[assembly: AssemblyProduct(&amp;quot;Demo&amp;quot;)]
[assembly: AssemblyCopyright(&amp;quot;Copyright © 2023&amp;quot;)]
[assembly: AssemblyTrademark(&amp;quot;&amp;quot;)]
[assembly: AssemblyCulture(&amp;quot;&amp;quot;)]
[assembly: AssemblyInformationalVersion(&amp;quot;&amp;quot;)]
[assembly: AssemblyVersion(&amp;quot;1.0.0.2&amp;quot;)]
[assembly: AssemblyFileVersion(&amp;quot;1.0.0.2&amp;quot;)]
[assembly: AssemblyMetadata(&amp;quot;BuildDate&amp;quot;, &amp;quot;11/21/2023 12:50:42&amp;quot;)]
[assembly: AssemblyMetadata(&amp;quot;GitSHA1&amp;quot;, &amp;quot;4f3935e&amp;quot;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;如果只想在About对话框显示版本信息，用不用 AssemblyInfo.cs 是无所谓的，随便创建一个文件，写入需要的信息，让About对话框调用就可以了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但使用这个文件可以同时解决版本显示的两个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在属性对话框中显示（在程序图标上点击右键）&lt;/li&gt;
&lt;li&gt;在About 对话框中显示&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;代码每次变化，都需要这个文件信息发生变化，该怎么办...&lt;/p&gt;
&lt;h2 id="assemblyinfocs"&gt;如何自动更新AssemblyInfo.cs？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;既然需要自动更新，那么这个文件就不适合放进代码仓库。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;创建一个 AssemblyInfo.tt 文件，在构建过程中，使用T4 自动将其转成对应的 .cs文件。&lt;/p&gt;
&lt;h3 id="_3"&gt;准备&lt;/h3&gt;
&lt;p&gt;首先，删除AsemblyInfo.cs这个文件&lt;/p&gt;
&lt;p&gt;其次，保证 git 不管控这个文件，在 &lt;code&gt;.gitignore&lt;/code&gt;中添加：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Properties/AssemblyInfo.cs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="t4"&gt;主角 T4&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;T4（Text Template Transformation Toolkit）文本模板转换工具，是一个开源的基于模板的文本生成框架。T4 源文件的后缀通常使用 .tt。&lt;/p&gt;
&lt;p&gt;T4 文本模板是可生成文本文件的文字块和控制逻辑的混合。控制逻辑可以用Visual C# 或 Visual Basic的程序代码段书写。生成的文件可以是文本，资源文件，或程序源文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.tt文件 本身和 .cs 很像，如下所示，只有最后几行不同。在这几行中，我们调用自定义的函数，用来获取源码仓库信息：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle(&amp;quot;Debao&amp;#39;s Demo&amp;quot;)]
[assembly: AssemblyDescription(&amp;quot;All right reserved.&amp;quot;)]
[assembly: AssemblyConfiguration(&amp;quot;&amp;quot;)]
[assembly: AssemblyCompany(&amp;quot;&amp;quot;)]
[assembly: AssemblyProduct(&amp;quot;Demo&amp;quot;)]
[assembly: AssemblyCopyright(&amp;quot;Copyright © 2023&amp;quot;)]
[assembly: AssemblyTrademark(&amp;quot;&amp;quot;)]
[assembly: AssemblyCulture(&amp;quot;&amp;quot;)]
[assembly: AssemblyInformationalVersion(&amp;quot;&amp;quot;)]
[assembly: AssemblyVersion(&amp;quot;1.0.0.&amp;lt;#= GetCommitsCount() #&amp;gt;&amp;quot;)]
[assembly: AssemblyFileVersion(&amp;quot;1.0.0.&amp;lt;#= GetCommitsCount() #&amp;gt;&amp;quot;)]
[assembly: AssemblyMetadata(&amp;quot;BuildDate&amp;quot;, &amp;quot;&amp;lt;#= DateTime.Now #&amp;gt;&amp;quot;)]
[assembly: AssemblyMetadata(&amp;quot;GitSHA1&amp;quot;, &amp;quot;&amp;lt;#= GetSha1().Substring(0,7) #&amp;gt;&amp;quot;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这两个函数的意图很明显，只需要将其也定义在这个文件中就行了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;#&lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nv"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;GetCommitsCount&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;{
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Process&lt;/span&gt;&lt;span class="ss"&gt;())&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;{
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;FileName&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git&amp;quot;&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;Arguments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rev-list --count HEAD&amp;quot;&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;UseShellExecute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;false&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;WorkingDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Path&lt;/span&gt;.&lt;span class="nv"&gt;GetDirectoryName&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;this&lt;/span&gt;.&lt;span class="nv"&gt;Host&lt;/span&gt;.&lt;span class="nv"&gt;TemplateFile&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;RedirectStandardOutput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;true&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;try&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;{
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;Start&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;StreamReader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;reader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StandardOutput&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;output&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;reader&lt;/span&gt;.&lt;span class="nv"&gt;ReadToEnd&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;int&lt;/span&gt;.&lt;span class="nv"&gt;Parse&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;output&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;}
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;catch&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ex&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;{
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;fail&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;command&lt;/span&gt;.
&lt;span class="w"&gt;                &lt;/span&gt;}
&lt;span class="w"&gt;            &lt;/span&gt;}
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;}


&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nv"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;GetSha1&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;{
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;sha1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nv"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Process&lt;/span&gt;&lt;span class="ss"&gt;())&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;{
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;FileName&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git&amp;quot;&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;Arguments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rev-parse HEAD&amp;quot;&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;UseShellExecute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;false&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;WorkingDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Path&lt;/span&gt;.&lt;span class="nv"&gt;GetDirectoryName&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;this&lt;/span&gt;.&lt;span class="nv"&gt;Host&lt;/span&gt;.&lt;span class="nv"&gt;TemplateFile&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StartInfo&lt;/span&gt;.&lt;span class="nv"&gt;RedirectStandardOutput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;true&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;try&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;{
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;Start&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;StreamReader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;reader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;process&lt;/span&gt;.&lt;span class="nv"&gt;StandardOutput&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="nv"&gt;sha1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;reader&lt;/span&gt;.&lt;span class="nv"&gt;ReadToEnd&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;}
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;catch&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ex&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;{
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;fail&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;command&lt;/span&gt;.
&lt;span class="w"&gt;                &lt;/span&gt;}
&lt;span class="w"&gt;            &lt;/span&gt;}
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;sha1&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;}
#&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;通过直接调用git获取所需的信息，代码有些简单粗暴，就不解释了。&lt;/p&gt;
&lt;p&gt;只不过，这几个函数，使用了.net一些标准库，所以使用之前需要通过 import 引入进来，如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ template debug=&amp;quot;false&amp;quot; hostspecific=&amp;quot;true&amp;quot; language=&amp;quot;C#&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ assembly name=&amp;quot;System.Core&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Linq&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Text&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.IO&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Diagnostics&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Collections.Generic&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这三部分合起来，就是完整的所需要的文件...&lt;/p&gt;
&lt;h3 id="assemblytt"&gt;Assembly.tt 文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;
&lt;span class="normal"&gt;36&lt;/span&gt;
&lt;span class="normal"&gt;37&lt;/span&gt;
&lt;span class="normal"&gt;38&lt;/span&gt;
&lt;span class="normal"&gt;39&lt;/span&gt;
&lt;span class="normal"&gt;40&lt;/span&gt;
&lt;span class="normal"&gt;41&lt;/span&gt;
&lt;span class="normal"&gt;42&lt;/span&gt;
&lt;span class="normal"&gt;43&lt;/span&gt;
&lt;span class="normal"&gt;44&lt;/span&gt;
&lt;span class="normal"&gt;45&lt;/span&gt;
&lt;span class="normal"&gt;46&lt;/span&gt;
&lt;span class="normal"&gt;47&lt;/span&gt;
&lt;span class="normal"&gt;48&lt;/span&gt;
&lt;span class="normal"&gt;49&lt;/span&gt;
&lt;span class="normal"&gt;50&lt;/span&gt;
&lt;span class="normal"&gt;51&lt;/span&gt;
&lt;span class="normal"&gt;52&lt;/span&gt;
&lt;span class="normal"&gt;53&lt;/span&gt;
&lt;span class="normal"&gt;54&lt;/span&gt;
&lt;span class="normal"&gt;55&lt;/span&gt;
&lt;span class="normal"&gt;56&lt;/span&gt;
&lt;span class="normal"&gt;57&lt;/span&gt;
&lt;span class="normal"&gt;58&lt;/span&gt;
&lt;span class="normal"&gt;59&lt;/span&gt;
&lt;span class="normal"&gt;60&lt;/span&gt;
&lt;span class="normal"&gt;61&lt;/span&gt;
&lt;span class="normal"&gt;62&lt;/span&gt;
&lt;span class="normal"&gt;63&lt;/span&gt;
&lt;span class="normal"&gt;64&lt;/span&gt;
&lt;span class="normal"&gt;65&lt;/span&gt;
&lt;span class="normal"&gt;66&lt;/span&gt;
&lt;span class="normal"&gt;67&lt;/span&gt;
&lt;span class="normal"&gt;68&lt;/span&gt;
&lt;span class="normal"&gt;69&lt;/span&gt;
&lt;span class="normal"&gt;70&lt;/span&gt;
&lt;span class="normal"&gt;71&lt;/span&gt;
&lt;span class="normal"&gt;72&lt;/span&gt;
&lt;span class="normal"&gt;73&lt;/span&gt;
&lt;span class="normal"&gt;74&lt;/span&gt;
&lt;span class="normal"&gt;75&lt;/span&gt;
&lt;span class="normal"&gt;76&lt;/span&gt;
&lt;span class="normal"&gt;77&lt;/span&gt;
&lt;span class="normal"&gt;78&lt;/span&gt;
&lt;span class="normal"&gt;79&lt;/span&gt;
&lt;span class="normal"&gt;80&lt;/span&gt;
&lt;span class="normal"&gt;81&lt;/span&gt;
&lt;span class="normal"&gt;82&lt;/span&gt;
&lt;span class="normal"&gt;83&lt;/span&gt;
&lt;span class="normal"&gt;84&lt;/span&gt;
&lt;span class="normal"&gt;85&lt;/span&gt;
&lt;span class="normal"&gt;86&lt;/span&gt;
&lt;span class="normal"&gt;87&lt;/span&gt;
&lt;span class="normal"&gt;88&lt;/span&gt;
&lt;span class="normal"&gt;89&lt;/span&gt;
&lt;span class="normal"&gt;90&lt;/span&gt;
&lt;span class="normal"&gt;91&lt;/span&gt;
&lt;span class="normal"&gt;92&lt;/span&gt;
&lt;span class="normal"&gt;93&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ template debug=&amp;quot;false&amp;quot; hostspecific=&amp;quot;true&amp;quot; language=&amp;quot;C#&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ assembly name=&amp;quot;System.Core&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Linq&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Text&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.IO&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Diagnostics&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#@ import namespace=&amp;quot;System.Collections.Generic&amp;quot; #&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;//---------------------------------------------------------------------------&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;generated&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;T4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;AssemblyInfo.tt&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Changes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;may&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cause&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;incorrect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;behavior&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;regenerated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;
&lt;span class="o"&gt;//---------------------------------------------------------------------------&lt;/span&gt;

&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Reflection&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CompilerServices&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;InteropServices&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;General&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Information&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;controlled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;through&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;following&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;attributes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;these&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;attribute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;modify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;information&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;associated&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyTitle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Debao&amp;#39;s Demo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyDescription&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;All right reserved.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyConfiguration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyCompany&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyProduct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Demo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyCopyright&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Copyright © 2023&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyTrademark&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyCulture&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyInformationalVersion&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyVersion&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1.0.0.&amp;lt;#= GetCommitsCount() #&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyFileVersion&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1.0.0.&amp;lt;#= GetCommitsCount() #&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyMetadata&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;BuildDate&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;#= DateTime.Now #&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AssemblyMetadata&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;GitSHA1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;#= GetSha1().Substring(0,7) #&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ComVisible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;following&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GUID&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;typelib&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exposed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;COM&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Guid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;14b8063a-65bf-4794-84d0-e6b61ee99ebb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;


&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="c1"&gt;#+&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetCommitsCount&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FileName&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Arguments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rev-list --count HEAD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UseShellExecute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WorkingDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetDirectoryName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Host&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TemplateFile&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RedirectStandardOutput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;StreamReader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StandardOutput&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ReadToEnd&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;catch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fail&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetSha1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sha1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FileName&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Arguments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rev-parse HEAD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UseShellExecute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WorkingDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetDirectoryName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Host&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TemplateFile&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StartInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RedirectStandardOutput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;StreamReader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StandardOutput&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="n"&gt;sha1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ReadToEnd&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;catch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fail&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sha1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;确保文件属性中，Custom Tool 选择：TextTemplatingFileGenerator
&lt;img alt="c-sharp-assembly-tt-property" src="https://blog.debao.me/images/c-sharp-assembly-tt-property.png"&gt;&lt;/p&gt;
&lt;p&gt;至此，任务完成。每次重新构建项目时，AssemblyInfo.cs 都会自动生成出来，如果不重新构建项目，也可以在AssemblyInfo.tt上点击右键，选择"Run Custom Tool"。&lt;/p&gt;
&lt;h2 id="_4"&gt;题外&lt;/h2&gt;
&lt;p&gt;如果要在没有git的机器上进行构建，或者不想直接调用git。可以搜索到 .git 文件夹，直接解析它。比如，上面用到的GetSha1()函数，也可以像下面这样写：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetHeadSha1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DirectoryInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb nb-Type"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ReadAllText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;HEAD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;First&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FullName&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Substring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Trim&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;headRef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Combine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FullName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ReadAllText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;headRef&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Trim&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb nb-Type"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;DirectoryInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SearchForGitDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;DirectoryInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;di&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DirectoryInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directories&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;di&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetDirectories&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.git&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directories&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FirstOrDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.git&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb nb-Type"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;di&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb nb-Type"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SearchForGitDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;di&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parent&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FullName&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb nb-Type"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetSha1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SearchForGitDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetDirectoryName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Host&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TemplateFile&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;headSha1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetHeadSha1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gitDirectory&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;headSha1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;当然，如果真要在没有安装git的机器上使用git仓库，就真有点自虐了...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_5"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://semver.org/&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Software_versioning"&gt;Software versioning - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Text_Template_Transformation_Toolkit"&gt;Text Template Transformation Toolkit - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/visualstudio/modeling/code-generation-and-t4-text-templates?view=vs-2022"&gt;Code Generation and T4 Text Templates - Visual Studio (Windows) | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/visualstudio/modeling/code-generation-in-a-build-process?view=vs-2022"&gt;Code Generation in a Build Process - Visual Studio (Windows) | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="Git"></category></entry><entry><title>SASS 小记</title><link href="https://blog.debao.me/2023/11/notes-for-sass/" rel="alternate"></link><published>2023-11-18T21:58:00+08:00</published><updated>2023-11-18T21:58:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-18:/2023/11/notes-for-sass/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;碰到了，稍微整理一下，看起来以后应该不会用了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;格式&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#scsssassy-css"&gt;SCSS（Sassy CSS），主流&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sass"&gt;SASS（缩进语法）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;特性&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_3"&gt;注释&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#variables"&gt;变量（Variables）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#nesting"&gt;嵌套规则（Nesting）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mixins"&gt;混合（Mixins）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#inheritance"&gt;继承（Inheritance …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;碰到了，稍微整理一下，看起来以后应该不会用了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;格式&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#scsssassy-css"&gt;SCSS（Sassy CSS），主流&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sass"&gt;SASS（缩进语法）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;特性&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_3"&gt;注释&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#variables"&gt;变量（Variables）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#nesting"&gt;嵌套规则（Nesting）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mixins"&gt;混合（Mixins）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#inheritance"&gt;继承（Inheritance）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#math-operations"&gt;数学运算（Math Operations）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#control-directives-and-loops"&gt;条件与循环（Control Directives and Loops）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#partials-and-imports"&gt;模块化与导入（Partials and Imports）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;历史&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#ruby-sass"&gt;ruby sass&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#libsass"&gt;libsass&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#libsass-python"&gt;libsass-python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#dart-sass"&gt;dart sass&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#sass_1"&gt;Sass使用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;SASS名字来自 Syntactically Awesome Style Sheets的缩写。它是一种用于生成级联样式表CSS的预处理脚本语言。&lt;/p&gt;
&lt;h2 id="_1"&gt;格式&lt;/h2&gt;
&lt;p&gt;SASS 文件通常以 .scss 或 .sass 为扩展名，需要通过 SASS 编译器编译成标准 CSS。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sass&lt;span class="w"&gt; &lt;/span&gt;styles.scss&lt;span class="w"&gt; &lt;/span&gt;styles.css
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;它有两种语法格式，一种采用缩进的格式（原始格式），另一种采用类似CSS的块格式（新式格式）。后缀分别采用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;.sass&lt;/li&gt;
&lt;li&gt;.scss&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scsssassy-css"&gt;SCSS（Sassy CSS），主流&lt;/h3&gt;
&lt;p&gt;接近标准的CSS（是CSS的超集），兼容CSS代码，使用大括号和分号。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;$primary-color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;#3498db&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;color&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;primary-color&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="sass"&gt;SASS（缩进语法）&lt;/h3&gt;
&lt;p&gt;不适用大括号和分号，通过缩进层次&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="na"&gt;$primary-color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;#3498db&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$primary-color&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_2"&gt;特性&lt;/h3&gt;
&lt;h4 id="_3"&gt;注释&lt;/h4&gt;
&lt;p&gt;SCSS支持两种方式注释（多行注释可以在生成的css中保留）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;// 这是一个单行注释&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;color&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;#333&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;行内注释&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 这是一个多行&lt;/span&gt;
&lt;span class="cm"&gt;注释 */&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;CSS3 只支持 多行注释。&lt;/p&gt;
&lt;h4 id="variables"&gt;变量（Variables）&lt;/h4&gt;
&lt;p&gt;SCSS 提供了 &lt;code&gt;$&lt;/code&gt; 符号定义变量，用于存储颜色、字体、间距等常量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;$primary-color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;#3498db&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$font-size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;color&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;primary-color&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;font-size&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;font-size&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在CSS3中，自定义属性（Custom Properties）可实现类似效果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;--primary-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;#3498db&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;--font-size&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;var&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;--primary-color&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;font-size&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;var&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;--font-size&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="nesting"&gt;嵌套规则（Nesting）&lt;/h4&gt;
&lt;p&gt;SCSS 支持选择器嵌套，让代码更简洁，结构更加清晰。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;nav&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;list-style&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;none&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;text-decoration&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;none&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;CSS3的嵌套，浏览器支持还不充分。&lt;/p&gt;
&lt;h4 id="mixins"&gt;混合（Mixins）&lt;/h4&gt;
&lt;p&gt;Mixins 是SCSS提供的一种代码复用机制，类似于函数。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;@mixin&lt;/span&gt;&lt;span class="nf"&gt; rounded&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$radius&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;border-radius&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nt"&gt;button&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;@include&lt;/span&gt;&lt;span class="nd"&gt; rounded&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="inheritance"&gt;继承（Inheritance）&lt;/h4&gt;
&lt;p&gt;SCSS使用 &lt;code&gt;@extend&lt;/code&gt; 来共享样式，减少重复&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;%&lt;/span&gt;&lt;span class="nt"&gt;button-styles&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;padding&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;10px&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;border&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;none&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nt"&gt;button&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;@extend&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;%&lt;/span&gt;&lt;span class="nt"&gt;button-styles&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="math-operations"&gt;数学运算（Math Operations）&lt;/h4&gt;
&lt;p&gt;SCSS 支持基本的数学运算，方便计算宽度、高度、间距等&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nc"&gt;.container&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;width&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;100&lt;/span&gt;&lt;span class="err"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;20px&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;padding&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;10px&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;现代 CSS3 原生支持数学运算，可以直接使用 calc()：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;container&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;calc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="kt"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;calc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="control-directives-and-loops"&gt;条件与循环（Control Directives and Loops）&lt;/h4&gt;
&lt;p&gt;SCSS 支持条件语句（&lt;code&gt;@if&lt;/code&gt;）、循环（&lt;code&gt;@for&lt;/code&gt;、&lt;code&gt;@each&lt;/code&gt;），用于生成动态样式&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;@for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;through&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nc"&gt;.box-&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;width&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;10px&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="partials-and-imports"&gt;模块化与导入（Partials and Imports）&lt;/h4&gt;
&lt;p&gt;SCSS 允许使用 &lt;code&gt;@import&lt;/code&gt; 和 &lt;code&gt;@use&lt;/code&gt; 管理模块化样式，支持分文件组织代码。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;// _buttons.scss&lt;/span&gt;
&lt;span class="nc"&gt;.button&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;background&lt;/span&gt;&lt;span class="nd"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;primary-color&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// main.scss&lt;/span&gt;
&lt;span class="k"&gt;@use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;buttons&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;现代 CSS3 支持 &lt;code&gt;@import&lt;/code&gt;，但不支持变量隔离，模块化的能力有限&lt;/p&gt;
&lt;h2 id="_4"&gt;历史&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;网上信息比较杂，还是先看历史。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ruby sass =&amp;gt; libsass =&amp;gt; dart sass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="ruby-sass"&gt;ruby sass&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://sass-lang.com/ruby-sass/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最早的sass开源版本，是2006年采用ruby语言开发的。需要安装ruby才能使用，且不能被node调用。&lt;/p&gt;
&lt;p&gt;2019年3月26日，ruby sass生命期结束。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ruby Sass was the original implementation of Sass, but it reached its  end of life as of 26 March 2019. It’s no longer supported, and Ruby Sass users should migrate to another implementation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Compass经常和ruby sass一块出镜，使用compass创建的项目中，会有一个配置文件 &lt;code&gt;config.rb&lt;/code&gt;。这个需要移植。&lt;/p&gt;
&lt;p&gt;https://github.com/sass/libsass/issues/78&lt;/p&gt;
&lt;h3 id="libsass"&gt;libsass&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://sass-lang.com/libsass/&lt;/li&gt;
&lt;li&gt;https://sass-lang.com/blog/libsass-is-deprecated/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2012年，libSass 发布了1.0版本，它是用C++开发的一个开源库。它的设计目标：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;性能（是ruby版本的10倍以上）&lt;/li&gt;
&lt;li&gt;易于集成（有Node-sass, libsass-python 等等各种封装）&lt;/li&gt;
&lt;li&gt;兼容性 (libsass 3.3 已经实现与ruby 版本 sass的完全兼容)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;libasss以及基于它的的Node-sass等顺应前端工程化潮流出现，速度块。但是node-sass和node的版本对应比较麻烦。&lt;/p&gt;
&lt;p&gt;2020年，libSass及其封装标记为过时，不建议在新项目中使用。&lt;/p&gt;
&lt;h4 id="libsass-python"&gt;libsass-python&lt;/h4&gt;
&lt;p&gt;libsass有各种封装，比如python：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://sass.github.io/libsass-python/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;安装方式&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install libsass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="dart-sass"&gt;dart sass&lt;/h3&gt;
&lt;p&gt;Dart Sass 是 Sass 官网力推的工具，它包括了基于 Dart VM 的命令行工具，以及基于 Node 的纯 Javascript 实现。&lt;/p&gt;
&lt;p&gt;注意：dart sass是习惯称呼，最早在npm上也是以 dart-sass名字发布的，但是，现在已经更名为 sass。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采用dart sass编写的sass编译器，不需要像node-sass一样和node版本需要对应。&lt;/li&gt;
&lt;li&gt;对CSS新特性支持更全。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Dart 是一种Google开发的编程语言，它与2011年10月首次亮相，是一种基于类的可选类型化编程语言，设计用于创建 Web 应用程序。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="sass_1"&gt;Sass使用&lt;/h2&gt;
&lt;p&gt;SCSS应该越来越不流行了。&lt;/p&gt;
&lt;p&gt;如果项目样式逻辑不复杂（如只有几个页面、少量组件），直接用原生 CSS 或现代 CSS（变量、自定义属性、嵌套等）即可。&lt;/p&gt;
&lt;p&gt;使用前端框架（如 React、Vue、Angular）时，通常推荐 CSS Modules 或 框架自带的样式解决方案，这时 SCSS 的模块化优势不再明显。&lt;/p&gt;
&lt;h2 id="_5"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://sasscss.org/&lt;/li&gt;
&lt;li&gt;https://sass-lang.com/&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Sass_(style_sheet_language)&lt;/li&gt;
&lt;li&gt;https://github.com/sass/libsass/issues/78&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="css"></category><category term="scss"></category></entry><entry><title>GitLab Runners安装小记</title><link href="https://blog.debao.me/2023/11/notes-for-gitlab-self-hosted-runners/" rel="alternate"></link><published>2023-11-14T23:26:00+08:00</published><updated>2023-11-14T23:26:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-14:/2023/11/notes-for-gitlab-self-hosted-runners/</id><summary type="html">&lt;p&gt;GitLab Runners可以安装在Linux、Windows、macOS 等系统上。此处只关注Ubuntu和Windows两个系统。&lt;/p&gt;
&lt;p&gt;根据Runner使用范围，可以分为&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;shared：所有人可用&lt;/li&gt;
&lt;li&gt;group：供某个组使用&lt;/li&gt;
&lt;li&gt;project：仅供特定仓库使用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;区别体现在runner向 gitlab …&lt;/p&gt;</summary><content type="html">&lt;p&gt;GitLab Runners可以安装在Linux、Windows、macOS 等系统上。此处只关注Ubuntu和Windows两个系统。&lt;/p&gt;
&lt;p&gt;根据Runner使用范围，可以分为&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;shared：所有人可用&lt;/li&gt;
&lt;li&gt;group：供某个组使用&lt;/li&gt;
&lt;li&gt;project：仅供特定仓库使用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;区别体现在runner向 gitlab 的 register过程中。作为测试，此处只涉及project 类别。&lt;/p&gt;
&lt;h2 id="_1"&gt;准备&lt;/h2&gt;
&lt;p&gt;先准备两台主机，一台Windows10，一台Ubuntu22.04，因为Runner主动连接GitLab，所以在NAT内部没问题。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;两台主机中都提前安装了python3，且在PATH路径中。&lt;/p&gt;
&lt;p&gt;特别注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu下，需要&lt;code&gt;apt install python-is-python3 python3.10-venv&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Windows下，需要powershell 6及以上（即 pwsh）&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;在gitlab上准备一个代码仓库，在项目仓库中，依次：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Settings =&amp;gt; CI/CD =&amp;gt; Runners =&amp;gt; New project runner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;它会提示选择：操作系统(Linux/Windows/MacOS)或容器(Docker/Kubernetes)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;选择 Linux，设置 Tags（为db-ubuntu2204)，点击 &lt;code&gt;Create runner&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;它生成一个 &lt;code&gt;runner authentication token&lt;/code&gt;。注意保存，稍后会用到，不然用时就找不回来了。&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;注：
1. Windows下的runner添加方式相同。
2. 该页面下 能看到所有可用的shared的runners。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="ubutnu-runner"&gt;Ubutnu 下安装 runner&lt;/h2&gt;
&lt;p&gt;GitLab为生命期内的Ubuntu Lts版本提供deb包&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.gitlab.com/runner/install/linux-repository.html&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;安装&lt;/h3&gt;
&lt;p&gt;添加源：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;curl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;L&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;sudo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;bash&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;安装：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt-get install gitlab-runner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_3"&gt;注册 ：&lt;/h3&gt;
&lt;p&gt;使用一开始提到的 runner authentication token。执行 register命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;gitlab&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;https:&lt;/span&gt;&lt;span class="c1"&gt;//gitlab.com  --token ******&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;没有加sudo，它会运行在用户模式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;按提示
* 输入Gitlab地址：
* 输入name：db-ubuntu
* 选择executor：shell&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;executor有好多选择，比如ssh/shell/virtualbox/docker/k8s等，选择 shell 是因为它最简单，不过shell也有多种。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="shell"&gt;关于shell&lt;/h4&gt;
&lt;p&gt;https://docs.gitlab.com/runner/shells/index.html&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bash： Unix下默认&lt;/li&gt;
&lt;li&gt;sh&lt;/li&gt;
&lt;li&gt;powershell&lt;/li&gt;
&lt;li&gt;pwsh： Windows下默认&lt;/li&gt;
&lt;li&gt;cmd&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;配置存放在：/home/debao/.gitlab-runner/config.toml&lt;/p&gt;
&lt;h3 id="_4"&gt;启动&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;gitlab-runner run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;gitlab后台可以看到：&lt;/p&gt;
&lt;p&gt;&lt;img alt="gitlab-self-hosted-runner-dbubuntu2204" src="https://blog.debao.me/images/gitlab-self-hosted-runner-dbubuntu2204.png"&gt;&lt;/p&gt;
&lt;h2 id="windows-runner"&gt;Windows下安装 runner&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.gitlab.com/runner/install/windows.html&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pwsh-powershell"&gt;pwsh 与 powershell&lt;/h3&gt;
&lt;p&gt;https://github.com/powershell/powershell&lt;/p&gt;
&lt;p&gt;从PowerShell  6开始，可执行程序的名字改为&lt;strong&gt;pwsh&lt;/strong&gt;， 它使用 .NET Core，可以运行在Windows、Linux和macOS系统。&lt;/p&gt;
&lt;p&gt;之前版本的PowerShell 只运行在Windows平台，叫做Window PowerShell，可执行程序的名字却为 &lt;strong&gt;powershell.exe&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;我们需要使用pwsh，跑CI时会有如下问题：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gitlab&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;16.5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;853330&lt;/span&gt;&lt;span class="n"&gt;f9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db_win32&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Fa_m2p1b6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;s_71882a7b232a&lt;/span&gt;
&lt;span class="n"&gt;Preparing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;shell&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;executor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;span class="n"&gt;Using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Shell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pwsh&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;executor&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;Preparing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;environment&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Job&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;failed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;failure&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;prepare&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;failed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pwsh&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;executable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;found&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Check&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gitlab&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shells&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="c1"&gt;#shell-profile-loading for more information&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_5"&gt;安装&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;创建一个文件夹 &lt;code&gt;C:\GitLab-Runner&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载64-bit的exe包，将其名字改为 gitlab-runner.exe&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;使用管理员权限运行Powershell&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_6"&gt;注册&lt;/h3&gt;
&lt;p&gt;使用一开始提到的 runner authentication token。执行 register命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;\gitlab-runner.exe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;https:&lt;/span&gt;&lt;span class="c1"&gt;//gitlab.com  --token ******&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;按提示
* 输入Gitlab地址：
* 输入name：db-win32
* 选择executor：shell【它最简单】&lt;/p&gt;
&lt;p&gt;配置存放在：C:\GitLab-Runner\config.toml&lt;/p&gt;
&lt;h3 id="_7"&gt;运行&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.\gitlab-runner.exe run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;gitlab后台可以看到：&lt;/p&gt;
&lt;p&gt;&lt;img alt="gitlab-self-hosted-runner-windows10" src="https://blog.debao.me/images/gitlab-self-hosted-runner-windows10.png"&gt;&lt;/p&gt;
&lt;h2 id="_8"&gt;测试&lt;/h2&gt;
&lt;p&gt;看看CI能否跑通&lt;/p&gt;
&lt;h3 id="1"&gt;测试1&lt;/h3&gt;
&lt;p&gt;先空跑一下，在仓库中根目录中添加一个&lt;code&gt;.gitlab-ci.yml&lt;/code&gt; 文件，创建两个job：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;test_linux&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu2204&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;import sys; print(sys.version)&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;test_win32&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db_window10&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;import sys; print(sys.version)&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在GitLab可以看到结果:&lt;/p&gt;
&lt;p&gt;&lt;img alt="gitlab-self-hosted-runner-result1" src="https://blog.debao.me/images/gitlab-self-hosted-runner-result1.png"&gt;&lt;/p&gt;
&lt;h3 id="2"&gt;测试2&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;写一个小的python程序，再试试。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;仓库中放置一个python文件 ： test_1.py&lt;/p&gt;
&lt;p&gt;该文件需要满足pytest基本要求，即&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文件以 &lt;code&gt;test_&lt;/code&gt;开头，或者以 &lt;code&gt;_test.py&lt;/code&gt;结尾&lt;/li&gt;
&lt;li&gt;文件内待测函数以 &lt;code&gt;test_&lt;/code&gt; 开头&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;pytest&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;test_hello&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Hello GitLab Self-hosted Runners!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;修改ci文件：.gitlab-ci.yml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;test_linux_runner&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu2204&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;debugging&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;venv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;venv&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;venv&lt;/span&gt;&lt;span class="sr"&gt;/bin/&lt;/span&gt;&lt;span class="n"&gt;activate&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pytest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pytest&lt;/span&gt;

&lt;span class="n"&gt;test_win32_runner&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db_window10&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;debugging&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;venv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;venv&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;venv&lt;/span&gt;&lt;span class="sr"&gt;/Scripts/&lt;/span&gt;&lt;span class="n"&gt;Activate&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ps1&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pytest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pytest&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;结果还算满意：&lt;/p&gt;
&lt;p&gt;&lt;img alt="gitlab-self-hosted-runner-result2" src="https://blog.debao.me/images/gitlab-self-hosted-runner-result2.png"&gt;&lt;/p&gt;
&lt;h2 id="_9"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.gitlab.com/runner/install/&lt;/li&gt;
&lt;li&gt;https://docs.gitlab.com/runner/register/index.html&lt;/li&gt;
&lt;li&gt;https://docs.gitlab.com/runner/executors/&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="CI"></category><category term="gitlab"></category></entry><entry><title>Hello Pelican Again</title><link href="https://blog.debao.me/2023/11/hello-pelican-again/" rel="alternate"></link><published>2023-11-13T21:16:00+08:00</published><updated>2023-11-13T21:16:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-13:/2023/11/hello-pelican-again/</id><summary type="html">&lt;p&gt;Again，为什么说again？？早在2015年接触了到Pelican和GitHub Pages，结果架子搭好了，见：&lt;a href="https://blog.debao.me/2015/04/hello-pelican/"&gt;Hello Pelican&lt;/a&gt;，但8年间却一直没写东西。希望这次能坚持住。&lt;/p&gt;
&lt;p&gt;OK，先升级pelican使得 blog重新工作。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：只关注在pelican下的markdown的使用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="pelican"&gt;安装Pelican&lt;/h2&gt;
&lt;p&gt;好在pelican从python2到python3基本没有变化。&lt;/p&gt;
&lt;p&gt;直接 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Again，为什么说again？？早在2015年接触了到Pelican和GitHub Pages，结果架子搭好了，见：&lt;a href="https://blog.debao.me/2015/04/hello-pelican/"&gt;Hello Pelican&lt;/a&gt;，但8年间却一直没写东西。希望这次能坚持住。&lt;/p&gt;
&lt;p&gt;OK，先升级pelican使得 blog重新工作。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：只关注在pelican下的markdown的使用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="pelican"&gt;安装Pelican&lt;/h2&gt;
&lt;p&gt;好在pelican从python2到python3基本没有变化。&lt;/p&gt;
&lt;p&gt;直接安装安装python3，并启用创建虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;venv&lt;span class="w"&gt; &lt;/span&gt;.venv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;激活虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.venv&lt;span class="se"&gt;\S&lt;/span&gt;cripts&lt;span class="se"&gt;\a&lt;/span&gt;ctivate.bat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;安装软件包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pelican[markdown]&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;安装后记得生成新的 requirements.txt 文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;freeze&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;requirements.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;以便于后期使用(比如GitHub Actions中)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;requirements.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="pelican_1"&gt;Pelican常用命令&lt;/h2&gt;
&lt;p&gt;直接执行pelican即可让它工作(生成静态页面)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pelican
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;它默认加载当前目录下的 &lt;code&gt;pelicanconf.py&lt;/code&gt;文件。如果要使用其他配置文件，可以通过命令行选项 &lt;code&gt;-s&lt;/code&gt;指定&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pelican&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;publishconf.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;运行结束后，用浏览器直接打开生成目录(output)下的文件即可看到效果。&lt;/p&gt;
&lt;p&gt;也可以启动一个http server：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pelican&lt;span class="w"&gt; &lt;/span&gt;--listen
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后用浏览器访问 http://localhost:8000/&lt;/p&gt;
&lt;p&gt;如果从头开始创建一个blog，可以使用quickstart命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pelican-quickstart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;它生成的文件中包含makefile（供make使用）和task.py文件（供invoke使用），都可以直接删掉。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="pelican_2"&gt;Pelican配置&lt;/h2&gt;
&lt;p&gt;Pelican默认生成2个配置文件pelicanconf.py和publicconf.py。前者默认使用，后者需要通过命令行使用（用于生成发布用的站点）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;详见 https://docs.getpelican.com/en/latest/settings.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;后者一般基于前者进行些改动，比如，它一般都包含：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pelicanconf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_1"&gt;插件&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：Pelican 老的插件位于 https://github.com/getpelican/pelican-plugins。如果别的文章，介绍插件时直接指向这个东西，需要注意内容其是否过时。 2023-11-13。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;新的插件(位于 https://github.com/pelican-plugins )，可以直接使用 pip 安装，比如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;pelican-search
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;安装后，pelican会自动识别它，也无需在pelicanconf.py中配置PLUGINS变量。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意pelican-search 依赖另外一个名为Stork的东西（Stork作者声明不再更新，但是pelican-search作者认为短期没有替换必要）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;执行如下命令，查看当前安装的插件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pelican-plugins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="articlepage"&gt;Article与Page&lt;/h3&gt;
&lt;p&gt;Blog的内容，一般都有时间属性，pelican将其归类于 article；而"关于"，“联系方式” 等页面则不常变化，归于pages。&lt;/p&gt;
&lt;h2 id="pelican-markdown"&gt;Pelican Markdown 语法&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/stable/content.html&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;链接格式&lt;/h3&gt;
&lt;p&gt;主要关注下内部链接的语法，它支持变量。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;filename&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要在一篇博客中引用另外的站内博客，需要使用 filename&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[a link relative to the current file]({filename}category/debao.md)
[a link relative to the content root]({filename}/category/article1.md)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;static&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要在博客中显示静态资源中的图像，需要指定static 。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Alt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;]({&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;images&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;han&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jpg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Our&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Menu&lt;/span&gt;&lt;span class="p"&gt;]({&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pdfs&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;menu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;attach&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Icon&lt;/span&gt;&lt;span class="p"&gt;]({&lt;/span&gt;&lt;span class="n"&gt;attach&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="n"&gt;icons&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;icon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;png&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Photo&lt;/span&gt;&lt;span class="p"&gt;]({&lt;/span&gt;&lt;span class="n"&gt;attach&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="n"&gt;photo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jpg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Downloadable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;]({&lt;/span&gt;&lt;span class="n"&gt;attach&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;downloads&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;archive&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意：pelican的变量格式，和常规的各个markdown编辑器支持的格式不一样。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;建议方案：编写 Python Markdown 的 ProProcesser扩展，在内存中自动添加这些变量，以便于让pelican满意。&lt;/p&gt;
&lt;h3 id="meta"&gt;Meta信息&lt;/h3&gt;
&lt;p&gt;需要在文件头部添加一些信息，比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Github&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Actions从0到1笔记&lt;/span&gt;&lt;span class="err"&gt;（基于&lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="err"&gt;）&lt;/span&gt;
&lt;span class="n"&gt;slug&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;examples&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;
&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2023&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;31&lt;/span&gt;
&lt;span class="n"&gt;category&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CI&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或者用yaml格式【需要使用相应扩展】&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;---
title:  Github Actions从0到1笔记（基于Python）
slug: python-examples-with-github-actions
date: 2023-11-12 22:31
category: python
tags: [python, github, CI]
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;可用的 MetaData列表：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;MetaData&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;title&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;标题（Article 或 Page)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;date&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;发布日期， (&lt;code&gt;YYYY-MM-DD HH:SS&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;modified&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;修改日期 (&lt;code&gt;YYYY-MM-DD HH:SS&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;逗号分隔&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;keywords&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;逗号分隔 (HTML content only)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;category&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;每个article只能指定一个类别)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;slug&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ID，当title有中文时，最好指定它（不然url中会用拼音）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;author&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;authors&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者们&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;summary&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Brief description of content for index pages&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;lang&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;语言 (&lt;code&gt;en&lt;/code&gt;, &lt;code&gt;fr&lt;/code&gt;, etc.)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;translation&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;当前article是否是另一个的翻译 (&lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;status&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;状态:&lt;code&gt;draft&lt;/code&gt;, &lt;code&gt;hidden&lt;/code&gt;, or &lt;code&gt;published&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;template&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Name of template to use to generate content (without extension)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;save_as&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Save content to this relative file path&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;url&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;URL to use for this article/page&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：title必须出现在第一行，不然会有下面这样的错误：&lt;code&gt;could not find information about 'title'&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="katex"&gt;katex 支持&lt;/h3&gt;
&lt;p&gt;getpelican使用的python-markdown，理论上用其扩展markdown-katex就行了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;markdown_katex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;安装后，在getpelican下的启用方式：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# pelicanconf.py&lt;/span&gt;
&lt;span class="n"&gt;MARKDOWN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;extension_configs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;markdown.extensions.codehilite&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;css_class&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;highlight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;markdown.extensions.extra&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;markdown.extensions.meta&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;markdown_katex&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;no_inline_svg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;insert_fonts_css&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;output_format&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;html5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;注意，此处只添加了 &lt;code&gt;markdown_katex&lt;/code&gt;，之所以写这么多，是因为其他的是getplican的默认值，不能直接覆盖MARKDOWN变量，不然table、code 都会解析不正常。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="20241024"&gt;20241024更新&lt;/h4&gt;
&lt;p&gt;当前blog 自己编写Markdown插件，不进行离线转换。速度只需数秒。&lt;/p&gt;
&lt;p&gt;配置文件内容如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;current_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;current_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;plugins&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;debaomdkatex&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;debaomdkatex&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DebaoMdKatexExtension&lt;/span&gt;

&lt;span class="n"&gt;MARKDOWN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;extensions&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;DebaoMdKatexExtension&lt;/span&gt;&lt;span class="p"&gt;()],&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;extension_configs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;extra&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;codehilite&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;css_class&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;highlight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;linenums&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;meta&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;toc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
        &lt;span class="c1"&gt;#&amp;#39;markdown_katex&amp;#39;: {&amp;#39;no_inline_svg&amp;#39;: False, &amp;#39;insert_fonts_css&amp;#39;: True},&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;markdown_mermaidjs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;output_format&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;html5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;EXTRA_HEADER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css&amp;quot; integrity=&amp;quot;sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+&amp;quot; crossorigin=&amp;quot;anonymous&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;lt;script defer src=&amp;quot;https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js&amp;quot; integrity=&amp;quot;sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg&amp;quot; crossorigin=&amp;quot;anonymous&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;lt;script defer src=&amp;quot;https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js&amp;quot; integrity=&amp;quot;sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk&amp;quot; crossorigin=&amp;quot;anonymous&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;    onload=&amp;quot;renderMathInElement(document.body);&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="mermaid"&gt;mermaid 支持&lt;/h3&gt;
&lt;p&gt;同katex类似，python中的markdown有对merimad的扩展支持&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;markdown-mermaidjs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;https://pypi.org/project/markdown-mermaidjs/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;getpelican下，配置pelicanconf.py进行启用：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# pelicanconf.py&lt;/span&gt;
&lt;span class="n"&gt;MARKDOWN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;extension_configs&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;markdown_mermaidjs&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="github-action"&gt;使用GitHub Action发布&lt;/h2&gt;
&lt;p&gt;目标：自动将生成的静态站点，发布到另外一个仓库中。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GitHub actions的market中有一些其他人些的action，用于发布pelican站点到pages。使用它会大大简化workflow文件，不过这儿用最原始的方式，希望可控性好一些。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在当前仓库中添加一个workflow文件：&lt;code&gt;.github/workflows/pelican.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;内容如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;
&lt;span class="normal"&gt;22&lt;/span&gt;
&lt;span class="normal"&gt;23&lt;/span&gt;
&lt;span class="normal"&gt;24&lt;/span&gt;
&lt;span class="normal"&gt;25&lt;/span&gt;
&lt;span class="normal"&gt;26&lt;/span&gt;
&lt;span class="normal"&gt;27&lt;/span&gt;
&lt;span class="normal"&gt;28&lt;/span&gt;
&lt;span class="normal"&gt;29&lt;/span&gt;
&lt;span class="normal"&gt;30&lt;/span&gt;
&lt;span class="normal"&gt;31&lt;/span&gt;
&lt;span class="normal"&gt;32&lt;/span&gt;
&lt;span class="normal"&gt;33&lt;/span&gt;
&lt;span class="normal"&gt;34&lt;/span&gt;
&lt;span class="normal"&gt;35&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CI&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;debao&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blog&lt;/span&gt;

&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Trigger&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;workflow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;branches&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;

&lt;span class="n"&gt;jobs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;runs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uses&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkout&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;v4&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;submodules&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;true&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;uses&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;v5&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3.11&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requirements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;txt&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;depoly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gh&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pages&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;working&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;remote&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blog&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;token&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;{{&lt;/span&gt;&lt;span class="n"&gt;secrets&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MYBLOG_TOKEN&lt;/span&gt;&lt;span class="o"&gt;}}&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;&lt;span class="sr"&gt;/dbzhang800/&lt;/span&gt;&lt;span class="n"&gt;myrepoXxxxxxx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;git&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Debao Zhang&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;email&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hello@debao.me&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Automated deployment to github pages&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blog&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HEAD&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;force&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;rm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;git&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;为了将代码推送进另一个仓库，创建一个用于目标仓库的&lt;code&gt;Access Token&lt;/code&gt;，而后将其作为secrets变量设置到当前仓库中&lt;code&gt;MYBLOG_TOKEN&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;Access Token创建方式（点击账户头像）：&lt;code&gt;&amp;lt;Avatar&amp;gt; =&amp;gt; Settings =&amp;gt; Developer settings =&amp;gt; Personal access tokens&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.getpelican.com/en/latest/index.html
*&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="pelican"></category><category term="CI"></category><category term="python"></category><category term="markdown"></category><category term="katex"></category></entry><entry><title>基于GitHub Actions 的 Self Hosted Runner 搭建小记</title><link href="https://blog.debao.me/2023/11/notes-for-github-self-hosted-runner/" rel="alternate"></link><published>2023-11-13T12:38:00+08:00</published><updated>2023-11-13T12:38:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-13:/2023/11/notes-for-github-self-hosted-runner/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;如何在自己电脑中搭建Runners，以便于让Github Actions来调用？个人觉得很有意义的东西，但是网上相关介绍很少，看来要么是太简单了，要么是 …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;如何在自己电脑中搭建Runners，以便于让Github Actions来调用？个人觉得很有意义的东西，但是网上相关介绍很少，看来要么是太简单了，要么是不实用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先准备两台主机，一台Windows10，一台Ubuntu22.04，不需要公网IP（Runner主动连接GitHub，所以主机在NAT内部，没有公网IP是没问题的）。&lt;/p&gt;
&lt;h2 id="_1"&gt;按文档走&lt;/h2&gt;
&lt;p&gt;官方有详细文档 &lt;a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/adding-self-hosted-runners"&gt;Adding self-hosted runners - GitHub Docs&lt;/a&gt; ，只需要照着走一遍...&lt;/p&gt;
&lt;h3 id="_2"&gt;创建仓库&lt;/h3&gt;
&lt;p&gt;创建一个 private 仓库（public仓库会暴露个人搭建的 Runner，不安全）&lt;/p&gt;
&lt;p&gt;仓库名：dbzhang800/test-self-hosted-runner&lt;/p&gt;
&lt;h3 id="_3"&gt;设置仓库&lt;/h3&gt;
&lt;p&gt;依次点击：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Settings =&amp;gt; Actions =&amp;gt; Runners =&amp;gt; New self-hosted runner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在这儿，可以选择Runner运行的系统：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;macOS&lt;/li&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;选中后，它在页面上会给出对应平台所需要的操作指令（很详细，照做即可），主要做两件事情：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载并解压 Runner 程序： actions-runner-xxxx.tar.gz&lt;/li&gt;
&lt;li&gt;解压后执行config脚本&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ubunturunner"&gt;Ubuntu下安装配置Runner&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;手边是台Ubuntu22.04主机，先用它试试看。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;按Github给出的指令，逐条输入。&lt;/p&gt;
&lt;p&gt;首先，下载当前最新版的actions-runner-xxxx.tar.gz程序，并解压&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mkdir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;
&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;curl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.311&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;releases&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;311.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.311&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xzf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.311&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;然后，执行config脚本进行配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;./config.sh&lt;span class="w"&gt; &lt;/span&gt;--url&lt;span class="w"&gt; &lt;/span&gt;https://github.com/dbzhang800/test-self-hosted-runner&lt;span class="w"&gt; &lt;/span&gt;--token&lt;span class="w"&gt; &lt;/span&gt;******
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;配置过程中，它会连接到GitHub，并会提示输入Runner group名字（默认即可），Runner名字（我叫它db-ubuntu2204)，工作文件夹名字（默认&lt;code&gt;_work&lt;/code&gt;)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;配置完成后，在仓库的Setttings中即可看到自己的Runner，如下图所示（Offline状态）：&lt;/p&gt;
&lt;p&gt;&lt;img alt="github-self-hosted-runner-dbubuntu2204" src="https://blog.debao.me/images/github-self-hosted-runner-dbubuntu2204.png"&gt;&lt;/p&gt;
&lt;p&gt;要激活它，只需要运行如下命令（变为Idle状态）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;./run.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="windowsrunner"&gt;Windows下安装配置Runner&lt;/h3&gt;
&lt;p&gt;流程和上面一样，按官方建议，使用管理员权限，并将目录设置为C:\actions-runner。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;配置过程中，它会连接到GitHub，并会提示输入Runner group名字（默认即可），Runner名字（我叫它db-windows10)，工作文件夹名字（默认&lt;code&gt;_work&lt;/code&gt;)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;配置完成后，在仓库的Setttings中即可看到自己的Runner，如下图所示（Offline状态）：&lt;/p&gt;
&lt;p&gt;&lt;img alt="github-self-hosted-runner-dbwindows10" src="https://blog.debao.me/images/github-self-hosted-runner-dbwindows10.png"&gt;&lt;/p&gt;
&lt;p&gt;执行如下命令，激活它&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;./run.cmd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_4"&gt;测试&lt;/h3&gt;
&lt;p&gt;在Github后台，可以看到Runner处于Idle状态，在Runner控制台，可以看到如下输出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;2023&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;11&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;13&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;06&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;49&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;30&lt;/span&gt;&lt;span class="n"&gt;Z&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;List&lt;/span&gt;&lt;span class="n"&gt;ening&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Jobs&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;表明Runner配置成功。要证明其工作，还是需要在仓库中添加workflow....&lt;/p&gt;
&lt;h2 id="workflowrunnerubuntu"&gt;workflow使用自己的Runner(Ubuntu)&lt;/h2&gt;
&lt;p&gt;在开始创建的仓库中，添加workflow文件：&lt;code&gt;.github/workflows/self-hosted-ubuntu.yml&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Self&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Hosted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runners&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt;

&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;runs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hosted&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Linux&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkout&lt;/span&gt;&lt;span class="nd"&gt;@v3&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Display&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;import sys; print(sys.version)&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;考虑到连接Github速度实在太慢，只试试代码拉取，并执行系统python的命令。&lt;/p&gt;
&lt;p&gt;我的Windows和Linux上都安装有Python3.x，且在环境变量PATH中。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_5"&gt;测试结果&lt;/h3&gt;
&lt;p&gt;网速还是太感人了，连一个actions都没下载成功：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Action&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://api.github.com/repos/actions/checkout/tarball/f43a0e5ff2bd294095638e18286ca9a3d1956744&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;timed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;was&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;canceled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;due&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;configured&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HttpClient&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Timeout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seconds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;elapsing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;不管怎样，流程反正是通了。看来在国内也只能做这种demo了，没有使用性。要跑完流程，看来需要找台国外的主机试试...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;不过反复尝试三次，Linux下面总算跑通一次&lt;/strong&gt; 。&lt;/p&gt;
&lt;h2 id="workflowrunnerwindows"&gt;workflow使用自己的Runner（Windows）&lt;/h2&gt;
&lt;p&gt;同Linux下一样，创建一个使用与Windows下runner的workflow文件：&lt;code&gt;.github/workflows/self-hosted-ubuntu.yml&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Self&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Hosted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runners&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;

&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;runs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hosted&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkout&lt;/span&gt;&lt;span class="nd"&gt;@v3&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Display&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;import sys; print(sys.version)&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_6"&gt;权限问题&lt;/h3&gt;
&lt;p&gt;上面的workflow遇到如下权限问题：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;import sys; print(sys.version)&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;\&lt;/span&gt;&lt;span class="n"&gt;actions&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;runner&lt;/span&gt;&lt;span class="w"&gt;\&lt;/span&gt;&lt;span class="n"&gt;_work&lt;/span&gt;&lt;span class="w"&gt;\&lt;/span&gt;&lt;span class="n"&gt;_temp&lt;/span&gt;&lt;span class="w"&gt;\&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="n"&gt;a4a880&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b37a&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;c97&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bc6b&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f0a76e18e7b5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ps1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cannot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;loaded&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;because&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disabled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;more&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;see&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;about_Execution_Policies&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fwlink&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="n"&gt;Lin&lt;/span&gt;
&lt;span class="n"&gt;kID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;135170.&lt;/span&gt;
&lt;span class="n"&gt;At&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;char&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\a&lt;/span&gt;&lt;span class="s1"&gt;ctions-runner\_work\_temp&lt;/span&gt;&lt;span class="se"&gt;\04&lt;/span&gt;&lt;span class="s1"&gt;a4a880-b37a-4c97-bc6b-f0a76e18e7b5 ...&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CategoryInfo&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SecurityError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(:)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PSSecurityException&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;FullyQualifiedErrorId&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;UnauthorizedAccess&lt;/span&gt;
&lt;span class="nb"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;completed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;因为runner运行在Windows10上面，而不是Windows Server上，二者默认的执行策略不同。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Restricted&lt;/strong&gt;（适用于 Windows 客户端）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RemoteSigned&lt;/strong&gt;（适用于 Windows 服务器）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;解决方案：在PowerShell中执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Set-ExecutionPolicy RemoteSigned
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;作用：允许本地运行未签名的脚本，但是通过网络传输的脚本必须经过数字签名。&lt;/p&gt;
&lt;h2 id="demo"&gt;demo完成&lt;/h2&gt;
&lt;p&gt;最终结果如下：&lt;/p&gt;
&lt;p&gt;&lt;img alt="github-self-hosted-runner-result" src="https://blog.debao.me/images/github-self-hosted-runner-result.png"&gt;&lt;/p&gt;
&lt;h2 id="_7"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/adding-self-hosted-runners"&gt;Adding self-hosted runners - GitHub Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://jessicadeen.com/posts/2020/github-actions-self-hosted-runner/&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/orgs/community/discussions/25107"&gt;Which IPs do I need to allow for a self-hosted runner? · community · Discussion #25107 (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="github"></category><category term="CI"></category></entry><entry><title>GitHub Pages 随手小记</title><link href="https://blog.debao.me/2023/11/notes-on-gh-pages/" rel="alternate"></link><published>2023-11-12T16:11:00+08:00</published><updated>2023-11-12T16:11:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2023-11-12:/2023/11/notes-on-gh-pages/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;点开之前用GitHub Pages搭建的项目页面qtlsx.debao.me，看到上次更新还是在9年前。长时间没写博客，有点不清楚从哪儿开始了。或许先把GH Pages捡起来看看，毕竟10年来发生了很多变化。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;GitHub Pages 是 GitHub …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;点开之前用GitHub Pages搭建的项目页面qtlsx.debao.me，看到上次更新还是在9年前。长时间没写博客，有点不清楚从哪儿开始了。或许先把GH Pages捡起来看看，毕竟10年来发生了很多变化。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;GitHub Pages 是 GitHub 提供的一项免费服务，它允许用户创建和托管个人博客、项目文档、演示页面等静态网站。无需外部服务器或复杂的配置，就快速创建并发布自己的博客。&lt;/p&gt;
&lt;p&gt;GitHub Pages的官网地址： https://pages.github.com/&lt;/p&gt;
&lt;h2 id="_1"&gt;站点类别&lt;/h2&gt;
&lt;p&gt;GH Pages站点有两种(三种)：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户级，每个用户一个：仓库名必须为 &lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;组织级，每个组织一个：仓库名必须为 &lt;code&gt;&amp;lt;orgname&amp;gt;.github.io&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;项目级，每个项目一个：仓库名不限制，访问地址为 &lt;code&gt;&amp;lt;userororgname&amp;gt;.github.io/&amp;lt;projectname&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;用户级和组织级其实是一样的，属于一类，都需要放置到一个特定名字的仓库中；而项目级不同，它名字随意，
但是它必须属于一个用户或一个组织。一个用户可以有数量不限的项目级站点。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_2"&gt;注意点&lt;/h2&gt;
&lt;h3 id="_3"&gt;私有与免费&lt;/h3&gt;
&lt;p&gt;对于GitHub的免费用户，只能在公有仓库中开启 GitHub Pages。&lt;/p&gt;
&lt;p&gt;如果要在私有仓库中开启 GitHub Pages，需要升级到收费用户。&lt;/p&gt;
&lt;h3 id="gh-pages"&gt;gh-pages分支不是必须&lt;/h3&gt;
&lt;p&gt;在2016年之前，项目站点内容需要推送到gh-pages分支才能生效。这个限制早已不存在。&lt;/p&gt;
&lt;p&gt;现在可以在master或其他分支的根目录或docs目录下，只需要在仓库的settings中做一下配置即可。&lt;/p&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://github.blog/2016-08-17-simpler-github-pages-publishing/&lt;/li&gt;
&lt;li&gt;https://stackoverflow.com/questions/35978862/github-pages-why-do-i-need-a-gh-pages&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="https"&gt;https 支持&lt;/h3&gt;
&lt;p&gt;对于使用自定义域名的公有仓库，只需要在Settings中勾选Enforce HTTPS即可。&lt;/p&gt;
&lt;h2 id="_4"&gt;自定义域名&lt;/h2&gt;
&lt;p&gt;如果自己有域名的话，配置子域名来指向GH Pages站点比较简单&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;仓库中添加一个名为CNAME文件（必须这个名字），里面包含自定义的域名（只能包含一个域名，且占据一行）&lt;/li&gt;
&lt;li&gt;配置DNS，使其指向 &lt;code&gt;&amp;lt;userororgname&amp;gt;.github.io&lt;/code&gt;（不管是项目级别站点还是用户级站点）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="jekyll"&gt;Jekyll&lt;/h2&gt;
&lt;p&gt;Github Pages内置了Jekyll（音标 &lt;code&gt;/'dʒiːk əl/&lt;/code&gt;）这一静态站点生成器的支持。通过&lt;code&gt;_config.yml&lt;/code&gt;可以对Jekyll进行配置。&lt;/p&gt;
&lt;p&gt;Jekyll是采用Ruby编写的，博客形态的静态站点生成器。它有一个模版目录，其中包含原始文本格式的文档，
通过一个转换器（如 Markdown）和的 Liquid 渲染器转化成一个完整的可发布的静态网站，以便发布在任何服务器上。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如何要禁用Jekyll，可以在根目录下创建一个名为&lt;code&gt;.nojekyll&lt;/code&gt;的空文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/about-github-pages-and-jekyll&lt;/li&gt;
&lt;li&gt;https://jekyllrb.com/docs/github-pages/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="jekyllgh-pages"&gt;最简的支持Jekyll的GH Pages站点&lt;/h3&gt;
&lt;p&gt;本地不安装 Jekyll 这套Ruby的东西，做一个最简单的支持Jekyll的GitHub Pages站点。&lt;/p&gt;
&lt;p&gt;创建一个代码仓库，按如下设置，并放置一个index.md文件。站点完成！&lt;/p&gt;
&lt;h4 id="_5"&gt;仓库设置&lt;/h4&gt;
&lt;p&gt;Settings =&amp;gt; Pages =&amp;gt; Buid and deployment&lt;/p&gt;
&lt;p&gt;Source: 选择 Depoly from a branch&lt;/p&gt;
&lt;p&gt;Branch：选择 main root&lt;/p&gt;
&lt;h4 id="_6"&gt;仓库文件&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;需要存在一个 index.md 文件，文件头部需要有三个中横线构成的头部&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;---
title: Home
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;很多人说如果没有index.md的话，会使用README.md文件，个人试过不行，不知道是否姿势不对造成的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/dbzhang800/jekyll-test&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="github-actions"&gt;GitHub Actions&lt;/h2&gt;
&lt;p&gt;GH Pages除了支持传统的 Depoly from a branch 方式，还支持GitHub Actions方式。&lt;/p&gt;
&lt;p&gt;借助 Github Actions，不仅可以使用Jekyll，还可以使用其他站点生成器。如果不想使用GitHub pages，也可以使用Actions将生成的站点推送到其他免费主机，比如 Kinsta或 azure 等。&lt;/p&gt;</content><category term="tools"></category><category term="github"></category><category term="markdown"></category><category term="Git"></category></entry><entry><title>Joomla!扩展笔记</title><link href="https://blog.debao.me/2015/06/notes-on-joomla-extension/" rel="alternate"></link><published>2015-06-18T15:57:00+08:00</published><updated>2015-06-18T15:57:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-06-18:/2015/06/notes-on-joomla-extension/</id><summary type="html">&lt;p&gt;Joomla! 的扩展分：组件、模块、插件、模板&lt;/p&gt;
&lt;p&gt;简单了解一下&lt;/p&gt;
&lt;h2 id="component"&gt;组件(Component)&lt;/h2&gt;
&lt;p&gt;组件是Joomla!的一种扩展，是Joomla!的主要功能单元。大部分组件都包含administrator和site两部分，它 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Joomla! 的扩展分：组件、模块、插件、模板&lt;/p&gt;
&lt;p&gt;简单了解一下&lt;/p&gt;
&lt;h2 id="component"&gt;组件(Component)&lt;/h2&gt;
&lt;p&gt;组件是Joomla!的一种扩展，是Joomla!的主要功能单元。大部分组件都包含administrator和site两部分，它们分别装在Joomla!根目录下的 administrator/components 和 components目录中。&lt;/p&gt;
&lt;p&gt;当用户通过类似如下的&lt;code&gt;http://example.com/index.php?option=com_&amp;lt;name&amp;gt;&lt;/code&gt;的url请求页面时，Joomla!平台将试图加载组件文件&lt;code&gt;components/com_&amp;lt;name&amp;gt;/&amp;lt;name&amp;gt;.php&lt;/code&gt;。在该文件中，可以决定：直接返回HTML代码，还是使用模型-视图-控制器(MVC)模式。&lt;/p&gt;
&lt;p&gt;组件的控制流程见 &lt;a href="https://docs.joomla.org/Component_Program_Flow"&gt;Component_Program_Flow&lt;/a&gt; 。&lt;/p&gt;
&lt;h3 id="old-flat-modelhtml"&gt;Old-Flat-Model(直接返回HTML代码)&lt;/h3&gt;
&lt;p&gt;假定我们创建一个名为 hello 的组件，在网站components目录下创建 com_hello 子目录，在该目录下创建一个 hello.php 的文件，该文件内输入&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    Hello from my first component.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后创建一个空的 hello.xml 文件。这样，一个简单的组件就完成了，在 扩展=》扩展管理器=》检测 中点击检测按钮。即可发现该组件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;com_hello\&lt;/span&gt;
&lt;span class="n"&gt;    |--  hello.php &lt;/span&gt;
&lt;span class="n"&gt;    \--  hello.xml &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h4 id="_1"&gt;组件后台&lt;/h4&gt;
&lt;p&gt;在网站 administrator/components/com_hello目录下创建 hello.php 文件，内容简单包含&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    Hello administratation from my first component.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;该页面通过 &lt;code&gt;administrator/index.php?option=com_hello&lt;/code&gt; 访问&lt;/p&gt;
&lt;h4 id="_2"&gt;安装包&lt;/h4&gt;
&lt;p&gt;如果不是直接放置在网站目录下让jommla!去检测，而是直接制作安装包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;com_hello\&lt;/span&gt;
&lt;span class="n"&gt;    |--  site\&lt;/span&gt;
&lt;span class="n"&gt;    |      |-- hello.php &lt;/span&gt;
&lt;span class="n"&gt;    |&lt;/span&gt;
&lt;span class="n"&gt;    |--  admin\&lt;/span&gt;
&lt;span class="n"&gt;    |      |-- hello.php &lt;/span&gt;
&lt;span class="n"&gt;    |&lt;/span&gt;
&lt;span class="n"&gt;    \--  hello.xml &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;关键的是一个名为 hello.xml 的文件，内容大致如下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;component&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;3.2.0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;hello&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.2&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;folder=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;site&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;filename&amp;gt;&lt;/span&gt;hello.php&lt;span class="nt"&gt;&amp;lt;/filename&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/files&amp;gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;administration&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;menu&amp;gt;&lt;/span&gt;hello&lt;span class="nt"&gt;&amp;lt;/menu&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;folder=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;filename&amp;gt;&lt;/span&gt;hello.php&lt;span class="nt"&gt;&amp;lt;/filename&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/files&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/administration&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/extension&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注：一般子目录下都会放置一个空的index.html的文件，以避免用户看到目录下内容。&lt;/p&gt;
&lt;p&gt;关于该xml文件的信息，见&lt;a href="https://docs.joomla.org/Manifest_files"&gt;Manifest_files&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="mvc"&gt;MVC模式&lt;/h3&gt;
&lt;p&gt;Joomla!3 第三方组件通常都分为三部分：模型、视图、控制器。
基本结构：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;com_mycomponent\
    |--  mycomponent.php 
    |--  controller.php
    |--  views\
    |       |--  mycomponent\
    |       |       |-- view.html.php
    |       |       |-- tmpl\
    |       |             |-- default.php
    |...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;现在网上的例子基本上都是 JControllerLegacy/JViewLegacy/JModelLegal，它们都加了Legal，说明有更新的和推荐的替代品：
JControllerBase/JViewBase/JModelBase。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;url&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;index.php?option=com_&amp;lt;name&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Joomla!将加载 &lt;code&gt;components/com_&amp;lt;name&amp;gt;/&amp;lt;name&amp;gt;.php&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;index.php?option=com_&amp;lt;name&amp;gt;&amp;amp;view=&amp;lt;myview&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Joomla!会导入&lt;code&gt;components/com_&amp;lt;name&amp;gt;/views/&amp;lt;myview&amp;gt;/view.html.php&lt;/code&gt;，默认&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;index.php?option=com_&amp;lt;name&amp;gt;[&amp;amp;task=&amp;lt;mytask&amp;gt;]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;默认Task是display&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;index.php?option=com_&amp;lt;name&amp;gt;&amp;amp;format=pdf&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;默认Format是html&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;东西太多了，本文跳过&lt;/p&gt;
&lt;h3 id="_3"&gt;参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Portal:Component_Development&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Absolute_Basics_of_How_a_Component_Functions&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/J3.x:Developing_a_MVC_Component/Developing_a_Basic_Component&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/J3.x:Developing_a_MVC_Component/Adding_a_view_to_the_site_part&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="module"&gt;模块(Module)&lt;/h2&gt;
&lt;p&gt;模块用来在页面的某部位添加一些内容。在典型的页面中，它们通常是围绕组件的方盒子，比如Login Form等。&lt;/p&gt;
&lt;p&gt;简单的组件通常包含4个文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mod_mymodule\&lt;/span&gt;
&lt;span class="n"&gt;    |--  mod_mymodule.php &lt;/span&gt;
&lt;span class="n"&gt;    |--  mod_mymodule.xml &lt;/span&gt;
&lt;span class="n"&gt;    |--  helper.php&lt;/span&gt;
&lt;span class="n"&gt;    |--  tmpl\&lt;/span&gt;
&lt;span class="n"&gt;    |      |-- default.php&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;mod_mymodule.php&lt;/code&gt; 是模块的入口，&lt;code&gt;mod_mymodule.xml&lt;/code&gt;包含安装信息以及配置参数信息等。&lt;/p&gt;
&lt;h3 id="_4"&gt;参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Portal:Module_Development&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/J3.x:Creating_a_simple_module/Developing_a_Basic_Module&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="plugin"&gt;插件(Plugin)&lt;/h2&gt;
&lt;p&gt;插件是Joomla!的一种扩展，它提供与事件相关联的函数功能。Joomla提供了一套核心的插件事件，但是其他扩展也可以发射(fire)
自定义事件。当某一个特定事件发生时，所有与该事件关联的插件函数都会被依次调用。Joomla插件架构遵循观察者模式。&lt;/p&gt;
&lt;p&gt;子类化 JPlugin&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;plg&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;PluginGroup&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;PluginName&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="nx"&gt;JPlugin&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;EventName&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
     &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;而后 创建一个安装文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;3.1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;plugin&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;group=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;system&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;plg_system_example&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;files&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;filename&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;plugin=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;example&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;example.php&lt;span class="nt"&gt;&amp;lt;/filename&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/files&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;config&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/config&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/extension&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;里面关键的是extension 中的group属性，以及 files 中的 filename。&lt;/p&gt;
&lt;h3 id="_5"&gt;参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Portal:Plugin_Development&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Administration_of_a_Plugin_in_Joomla&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Creating_a_Plugin_for_Joomla&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Plugin_Developer_Overview&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Plugin/Events&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="template"&gt;模板(Template)&lt;/h2&gt;
&lt;h3 id="_6"&gt;参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Portal:Template_Development&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Understanding_Joomla!_templates&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="language-package"&gt;语言包(language package)&lt;/h2&gt;
&lt;p&gt;只关注非核心扩展的语言包。&lt;/p&gt;
&lt;p&gt;在Joomla!1.5之前，通过安装文件中的languages元素进行安装&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;languages&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;folder=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;lang&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;language&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;tag=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;zh-CN&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;zh-CN.com_example.ini&lt;span class="nt"&gt;&amp;lt;/language&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/languages&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这将会把扩展的语言文件安装进Joomla!的核心语言文件存放位置：Joomla根目录下的language或administrator/language。&lt;/p&gt;
&lt;p&gt;该做法在3.x中仍然被支持，但推荐将语言文件和扩展的其他文件直接放一块，目录结构有一定要求&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;files&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;filename&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;plugin=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;example&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;example.php&lt;span class="nt"&gt;&amp;lt;/filename&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;folder&amp;gt;&lt;/span&gt;language&lt;span class="nt"&gt;&amp;lt;/folder&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/files&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;注意：语言文件保存成不带BOM的UTF8格式&lt;/p&gt;
&lt;h3 id="_7"&gt;参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Making_a_Language_Pack_for_Joomla_3.x&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Creating_language_packs_for_extensions_in_Joomla_2.5&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/J2.5:Making_non-core_language_packs&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Specification_of_language_files&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Creating_a_language_definition_file&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_8"&gt;其他&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Manifest_files&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tools"></category><category term="Joomla"></category></entry><entry><title>Jooomla!笔记</title><link href="https://blog.debao.me/zh/2015/06/notes-on-joomla/" rel="alternate"></link><published>2015-06-04T13:50:00+08:00</published><updated>2015-06-04T13:50:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-06-04:/zh/2015/06/notes-on-joomla/</id><summary type="html">&lt;h2 id="_1"&gt;问题&lt;/h2&gt;
&lt;h3 id="googleapiscom"&gt;googleapis.com 加载问题&lt;/h3&gt;
&lt;p&gt;不少扩展都使用了 googleapis.com 中的 fonts 和 jQuery ，而google的服务在国内无法访问。需要换成360提供的镜像 http://libs.useso.com/  &lt;/p&gt;
&lt;p&gt;NoNumber ReReplacer 比较好的解决这个问题。&lt;/p&gt;
&lt;p&gt;创建两条 …&lt;/p&gt;</summary><content type="html">&lt;h2 id="_1"&gt;问题&lt;/h2&gt;
&lt;h3 id="googleapiscom"&gt;googleapis.com 加载问题&lt;/h3&gt;
&lt;p&gt;不少扩展都使用了 googleapis.com 中的 fonts 和 jQuery ，而google的服务在国内无法访问。需要换成360提供的镜像 http://libs.useso.com/  &lt;/p&gt;
&lt;p&gt;NoNumber ReReplacer 比较好的解决这个问题。&lt;/p&gt;
&lt;p&gt;创建两条规则：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用 ajax.useso.com 替换 ajax.googleapis.com&lt;/li&gt;
&lt;li&gt;用 fonts.useso.com 替换 fonts.googleapis.com&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果模板用的 https 而不是 http。 用 http://fonts.useso.com 替换 https://fonts.googleapis.com&lt;/p&gt;
&lt;p&gt;一些扩展比如 K2 也提供了选项，可以选择用本地的，还是远程的。&lt;/p&gt;
&lt;h3 id="twitterfacebook"&gt;twitter，facebook链接等&lt;/h3&gt;
&lt;p&gt;这些东西在国内无法访问，一般是模板提供的，需要在模板的设置中去除。&lt;/p&gt;
&lt;h3 id="menu"&gt;调整Menu的顺序&lt;/h3&gt;
&lt;p&gt;直接拖动前面的竖着的3个点的图标即可。&lt;/p&gt;
&lt;h3 id="module"&gt;module的位置&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;自定义Module的位置：在Module的Position属性处，可以一个自定义的字符串作为位置名；而后
在文章中&lt;code&gt;{loadposition myModulePosition}&lt;/code&gt; 或模板中，可以直接使用该位置。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;预览模板中Module的位置：首先在模板管理器的选项中，启用预览；而后在网站网址后面加&lt;code&gt;?tp=1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;百度地图&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;http://api.map.baidu.com/lbsapi/creatmap/index.html&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;扩展&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;名字&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Admin Tools&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;jSecure&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://www.akeebabackup.com/products/akeeba-backup.html"&gt;Akeeba Backup&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Backup, restore and transfer your site in a snap!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://www.nonumber.nl/extensions/emailprotector"&gt;Email Protector&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Safely cloak email addresses in Joomla!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://dj-extensions.com/dj-imageslider"&gt;DJ Image Slider&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://www.nonumber.nl/extensions/rereplacer"&gt;ReReplacer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Advanced search and replace for Joomla!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://getk2.org/"&gt;K2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;The powerful content extension for Joomla!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.joomshaper.com/joomla-extensions/sp-page-builder-free"&gt;SP Page Builder&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;SP Page Builder is an Intuitive Drag and Drop Builder component suited for everyone.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Tabs&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.joomshaper.com/joomla-extensions/sp-tab"&gt;Sp Tab&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.joomshaper.com/joomla-extensions/quick-contact"&gt;SP Quick Contact&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;joombig slider effects with navigation images&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.xingzai.org/extensions/baidu-map-module-for-joomla.html"&gt;Baidu Map&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.richeyweb.com/development/joomla-plugins/121-system-offline"&gt;Offline&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;test Guest functionality when site is offline&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://www.joomlashowroom.com/products/site-lock"&gt;Site Lock&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;http://extensions.joomla.org/&lt;/li&gt;
&lt;li&gt;http://extensions.joomla.org/category/official-extensions&lt;/li&gt;
&lt;li&gt;http://www.joomshaper.com/joomla-extensions&lt;/li&gt;
&lt;li&gt;https://www.nonumber.nl/extensions/&lt;/li&gt;
&lt;li&gt;https://dj-extensions.com/extensions&lt;/li&gt;
&lt;li&gt;https://www.rsjoomla.com/joomla-extensions.html&lt;/li&gt;
&lt;li&gt;http://www.joomlaserviceprovider.com/extensions/joomla&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;模板&lt;/h2&gt;
&lt;p&gt;Framework: Helix T3 ...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://www.joomshaper.com/joomla-templates&lt;/li&gt;
&lt;li&gt;http://www.joomlart.com/joomla/templates&lt;/li&gt;
&lt;li&gt;http://yootheme.com/themes/joomla &lt;/li&gt;
&lt;li&gt;http://www.rockettheme.com/joomla/templates&lt;/li&gt;
&lt;li&gt;https://www.gavick.com/joomla-templates&lt;/li&gt;
&lt;li&gt;http://www.templatemonster.com/joomla-templates.php&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;http://www.joomlabamboo.com/joomla-templates/&lt;/li&gt;
&lt;li&gt;http://joomlatemplates.me/&lt;/li&gt;
&lt;li&gt;http://thegrue.org/joomla/templates/&lt;/li&gt;
&lt;li&gt;http://www.freshjoomlatemplates.com/&lt;/li&gt;
&lt;li&gt;......&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;可能比较重要的链接&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Copying_a_Joomla_website&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/How_do_you_recover_or_reset_your_admin_password%3F&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/Taking_the_website_temporarily_offline&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joomla.org/Developers&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_6"&gt;入门教程&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://www.inmotionhosting.com/support/edu/joomla-3&lt;/li&gt;
&lt;li&gt;https://docs.joomla.org/J3.x:Creating_a_simple_module/Developing_a_Basic_Module&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="Joomla"></category></entry><entry><title>Notes on MySQL</title><link href="https://blog.debao.me/2015/04/notes-on-mysql/" rel="alternate"></link><published>2015-04-25T13:33:00+08:00</published><updated>2015-04-25T13:33:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-04-25:/2015/04/notes-on-mysql/</id><summary type="html">&lt;h2 id="mysql-vs-mysql"&gt;MySQL vs mysql&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MySQL ==&amp;gt; the entire MySQL package&lt;ul&gt;
&lt;li&gt;The MySQL server (mysqld)&lt;/li&gt;
&lt;li&gt;MySQL client programs&lt;/li&gt;
&lt;li&gt;MySQL client library&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;mysql ==&amp;gt; a client program of the MySQL package&lt;ul&gt;
&lt;li&gt;The MySQL Command-Line Tool&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="connecting-to-server"&gt;Connecting to server&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;shell&amp;gt; mysql -h host -u user -p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If mysqld is running on the same machine:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1 …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</summary><content type="html">&lt;h2 id="mysql-vs-mysql"&gt;MySQL vs mysql&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MySQL ==&amp;gt; the entire MySQL package&lt;ul&gt;
&lt;li&gt;The MySQL server (mysqld)&lt;/li&gt;
&lt;li&gt;MySQL client programs&lt;/li&gt;
&lt;li&gt;MySQL client library&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;mysql ==&amp;gt; a client program of the MySQL package&lt;ul&gt;
&lt;li&gt;The MySQL Command-Line Tool&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="connecting-to-server"&gt;Connecting to server&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;shell&amp;gt; mysql -h host -u user -p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If mysqld is running on the same machine:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;shell&amp;gt; mysql -u user -p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If mysqld is running on the same machine and permit anonymous users.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;shell&amp;gt; mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="disconnecting-from-server"&gt;Disconnecting from server&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; quit;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Note, semicolon of this command can be omitted.&lt;/p&gt;
&lt;h2 id="entering-queries"&gt;Entering Queries&lt;/h2&gt;
&lt;p&gt;We can do some query operations even without any database to work with.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; select version()&lt;/span&gt;&lt;span class="nt"&gt;,&lt;/span&gt;&lt;span class="c"&gt; current_date&lt;/span&gt;&lt;span class="nt"&gt;,&lt;/span&gt;&lt;span class="c"&gt; (4&lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="c"&gt;1)*5&lt;/span&gt;&lt;span class="nt"&gt;,&lt;/span&gt;&lt;span class="c"&gt; user();&lt;/span&gt;
&lt;span class="nb"&gt;+-------------------------+--------------+---------+----------------+&lt;/span&gt;
&lt;span class="c"&gt;| version()               | current_date | (4&lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="c"&gt;1)*5 | user()         |&lt;/span&gt;
&lt;span class="nb"&gt;+-------------------------+--------------+---------+----------------+&lt;/span&gt;
&lt;span class="c"&gt;| 5&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;5&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;43&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;0ubuntu0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;14&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;1 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;05   |      25 | root@localhost |&lt;/span&gt;
&lt;span class="nb"&gt;+-------------------------+--------------+---------+----------------+&lt;/span&gt;
&lt;span class="c"&gt;1 row in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Type &lt;code&gt;\c&lt;/code&gt; if we want to cancel current command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; select user() \c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="meaning-of-prompts"&gt;Meaning of prompts&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Prompt&lt;/th&gt;
&lt;th&gt;Meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;mysql&amp;gt;&lt;/td&gt;
&lt;td&gt;Ready for new command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Waiting for next line of multiple-line command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Waiting for next line, waiting for completion of a string that began with a single quote (').&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;"&lt;/code&gt;&amp;gt;&lt;/td&gt;
&lt;td&gt;Waiting for next line, waiting for completion of a string that began with a double quote (").&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;`&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Waiting for next line, waiting for completion of an identifier that began with a backtick (`).&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;/*&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Waiting for next line, waiting for completion of a comment that began with &lt;code&gt;/*&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="creating-and-selecting-a-database"&gt;Creating and Selecting a Database&lt;/h2&gt;
&lt;p&gt;Creating a database called db_debao&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; create database db_debao;
Query OK, 1 row affected (0.05 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;View databases&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; show databases;&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;| Database           |&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;| information_schema |&lt;/span&gt;
&lt;span class="c"&gt;| db_debao           |&lt;/span&gt;
&lt;span class="c"&gt;| mysql              |&lt;/span&gt;
&lt;span class="c"&gt;| performance_schema |&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;4 rows in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Create a database does not select it for use, so we must make it the current
database explicitly.(Note, semicolon of this command can be omitted.)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; use db_debao
Database changed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;To find out which database currently used&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; select database();
+------------+
| database() |
+------------+
| db_debao   |
+------------+
1 row in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Important Note&lt;/strong&gt;, this database is created by the root and will not be accessible to any other user unless permitted by the root.
The following command will create a new user call "test" on localhost with the password "password".&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;grant&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db_debao&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="nv"&gt;@localhost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;identified&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;Query&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;affected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.79&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="create-a-table"&gt;Create a Table&lt;/h2&gt;
&lt;p&gt;List tables in current database&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;tables&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;Empty&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;sec&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Create a table called &lt;code&gt;pet&lt;/code&gt; with three columns: name, sex, birth&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;table&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pet&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;birth&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DATE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Query&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;affected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.19&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;View tables now&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; show tables;&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;| Tables_in_db_debao |&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;| pet                |&lt;/span&gt;
&lt;span class="nb"&gt;+--------------------+&lt;/span&gt;
&lt;span class="c"&gt;1 row in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;describe&lt;/code&gt; can be called at any time to view table column names and types.    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; describe pet;&lt;/span&gt;
&lt;span class="nb"&gt;+-------+-------------+------+-----+---------+-------+&lt;/span&gt;
&lt;span class="c"&gt;| Field | Type        | Null | Key | Default | Extra |&lt;/span&gt;
&lt;span class="nb"&gt;+-------+-------------+------+-----+---------+-------+&lt;/span&gt;
&lt;span class="c"&gt;| name  | varchar(20) | YES  |     | NULL    |       |&lt;/span&gt;
&lt;span class="c"&gt;| sex   | char(1)     | YES  |     | NULL    |       |&lt;/span&gt;
&lt;span class="c"&gt;| birth | date        | YES  |     | NULL    |       |&lt;/span&gt;
&lt;span class="nb"&gt;+-------+-------------+------+-----+---------+-------+&lt;/span&gt;
&lt;span class="c"&gt;3 rows in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="loading-data-into-a-table"&gt;Loading Data into a Table&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;load_data&lt;/code&gt; and &lt;code&gt;insert&lt;/code&gt; can be used for this task.&lt;/p&gt;
&lt;p&gt;Create a plain text file called pet_raw_txt:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;at1    f       2015-01-01
cat2    m       2015-02-02
cat3    \N      2015-03-03
cat4    f       \N
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Try load this file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;load&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;infile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;~/pet_raw.txt&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;table&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pet&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1148&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;42000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;used&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allowed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MySQL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;How to fix this? Add the &lt;code&gt;--local-infile=1&lt;/code&gt; option when start mysql&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;infile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;db_debao&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;load&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;infile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;~/pet_raw.txt&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;table&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pet&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;Query&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;affected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.06&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Records&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Deleted&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Skipped&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Warnings&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If we use insert instead of load data&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; insert into pet values (&amp;#39;dog1&amp;#39;, &amp;#39;f&amp;#39;, &amp;#39;2015-04-01&amp;#39;);
Query OK, 1 row affected (0.11 sec)
mysql&amp;gt; insert into pet values (&amp;#39;dog2&amp;#39;, &amp;#39;f&amp;#39;, NULL);
Query OK, 1 row affected (0.05 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If we want to empty the table pet:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; delete from pet;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="retrieving-information-from-a-table"&gt;Retrieving Information from a Table&lt;/h2&gt;
&lt;p&gt;Selecting all data&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; select * from pet;&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| name | sex  | birth      |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| cat1 | f    | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| cat2 | m    | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02 |&lt;/span&gt;
&lt;span class="c"&gt;| cat3 | NULL | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03 |&lt;/span&gt;
&lt;span class="c"&gt;| cat4 | f    | NULL       |&lt;/span&gt;
&lt;span class="c"&gt;| dog1 | f    | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| dog2 | f    | NULL       |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;6 rows in set (1&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;13 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;If we want to change something, &lt;code&gt;update&lt;/code&gt; can be used.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; update pet set birth = &amp;#39;2015-04-02&amp;#39; where name = &amp;#39;dog2&amp;#39;;
Query OK, 1 row affected (0.08 sec)
Rows matched: 1  Changed: 1  Warnings: 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Selecting particular rows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;
&lt;span class="normal"&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; select * from pet where birth &lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt;= &amp;#39;2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01&amp;#39;;&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| name | sex  | birth      |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| cat3 | NULL | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03 |&lt;/span&gt;
&lt;span class="c"&gt;| dog1 | f    | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| dog2 | f    | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02 |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;3 rows in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;02 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Selecting particular columns:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; select name&lt;/span&gt;&lt;span class="nt"&gt;,&lt;/span&gt;&lt;span class="c"&gt; birth from pet;&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| name | birth      |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| cat1 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| cat2 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02 |&lt;/span&gt;
&lt;span class="c"&gt;| cat3 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03 |&lt;/span&gt;
&lt;span class="c"&gt;| cat4 | NULL       |&lt;/span&gt;
&lt;span class="c"&gt;| dog1 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| dog2 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;04&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02 |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;6 rows in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Pattern Matching:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;mysql&lt;/span&gt;&lt;span class="nv"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt; select name&lt;/span&gt;&lt;span class="nt"&gt;,&lt;/span&gt;&lt;span class="c"&gt; birth from pet where name like &amp;#39;cat%&amp;#39;;&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| name | birth      |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;| cat1 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;01 |&lt;/span&gt;
&lt;span class="c"&gt;| cat2 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;02 |&lt;/span&gt;
&lt;span class="c"&gt;| cat3 | 2015&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03&lt;/span&gt;&lt;span class="nb"&gt;-&lt;/span&gt;&lt;span class="c"&gt;03 |&lt;/span&gt;
&lt;span class="c"&gt;| cat4 | NULL       |&lt;/span&gt;
&lt;span class="nb"&gt;+------+------------+&lt;/span&gt;
&lt;span class="c"&gt;4 rows in set (0&lt;/span&gt;&lt;span class="nt"&gt;.&lt;/span&gt;&lt;span class="c"&gt;00 sec)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Sorting rows: (order by)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql&amp;gt; select name, birth from pet order by birth;
+------+------------+
| name | birth      |
+------+------------+
| cat4 | NULL       |
| cat1 | 2015-01-01 |
| cat2 | 2015-02-02 |
| cat3 | 2015-03-03 |
| dog1 | 2015-04-01 |
| dog2 | 2015-04-02 |
+------+------------+
6 rows in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://dev.mysql.com/doc/refman/5.6/en/index.html&lt;/li&gt;
&lt;li&gt;http://www.webdevelopersnotes.com/tutorials/sql/mysql_database_introduction_mysql_beginners_tutorial.php3&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry><entry><title>Install MediaWiki on Windows</title><link href="https://blog.debao.me/2015/04/install-mediawiki-on-windows/" rel="alternate"></link><published>2015-04-24T10:33:00+08:00</published><updated>2015-04-24T10:33:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-04-24:/2015/04/install-mediawiki-on-windows/</id><summary type="html">&lt;p&gt;MediaWiki + Apache + php + MySQL&lt;/p&gt;
&lt;h2 id="mysql"&gt;MySQL&lt;/h2&gt;
&lt;p&gt;Download and install the msi installer of MySQL 5.6 from http://dev.mysql.com/downloads/installer/&lt;/p&gt;
&lt;h2 id="apache"&gt;Apache&lt;/h2&gt;
&lt;p&gt;Download and install Apache 2.4 from http://www.apachelounge.com/download/&lt;/p&gt;
&lt;h2 id="php"&gt;PHP&lt;/h2&gt;
&lt;p&gt;Download and install php 5.8.6 from http://windows.php.net/download/&lt;/p&gt;
&lt;p&gt;Rename …&lt;/p&gt;</summary><content type="html">&lt;p&gt;MediaWiki + Apache + php + MySQL&lt;/p&gt;
&lt;h2 id="mysql"&gt;MySQL&lt;/h2&gt;
&lt;p&gt;Download and install the msi installer of MySQL 5.6 from http://dev.mysql.com/downloads/installer/&lt;/p&gt;
&lt;h2 id="apache"&gt;Apache&lt;/h2&gt;
&lt;p&gt;Download and install Apache 2.4 from http://www.apachelounge.com/download/&lt;/p&gt;
&lt;h2 id="php"&gt;PHP&lt;/h2&gt;
&lt;p&gt;Download and install php 5.8.6 from http://windows.php.net/download/&lt;/p&gt;
&lt;p&gt;Rename &lt;code&gt;php.ini-production&lt;/code&gt; to  &lt;code&gt;php.ini&lt;/code&gt;, then enable mysql extension&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;extension_dir = &amp;quot;c:/php-5.6.8/ext&amp;quot;
extension = php_mysql.dll
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Enable intl extension&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;extension = php_intl.dll
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;To make &lt;code&gt;intl&lt;/code&gt; really works, the following files which sit in the PHP directory&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;icudt54.dll&lt;/li&gt;
&lt;li&gt;icuio54.dll&lt;/li&gt;
&lt;li&gt;iculx54.dll&lt;/li&gt;
&lt;li&gt;icutu54.dll&lt;/li&gt;
&lt;li&gt;icuin54.dll&lt;/li&gt;
&lt;li&gt;icule54.dll&lt;/li&gt;
&lt;li&gt;icutest54.dll&lt;/li&gt;
&lt;li&gt;icuuc54.dll&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Should be copied to the bin path of Apache, or one of the path in system environment variant &lt;code&gt;PATH&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Add following line to the conf file of apache to enable php.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;LoadModule php5_module &amp;quot;c:/php-5.6.8/php5apache2_4.dll&amp;quot;
AddHandler application/x-httpd-php .php
&lt;span class="gh"&gt;#&lt;/span&gt; configure the path to php.ini
PHPIniDir &amp;quot;C:/php-5.6.8&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Add index.php to DirectoryIndex&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;DirectoryIndex index.html index.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Create a simple .php file for test.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="nb"&gt;phpinfo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="mediawiki"&gt;MediaWiki&lt;/h2&gt;
&lt;p&gt;Download MediaWiki 1.24.2 from http://www.mediawiki.org/wiki/Download&lt;/p&gt;
&lt;p&gt;Add following line to the conf file of Apache.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;
&lt;span class="normal"&gt;12&lt;/span&gt;
&lt;span class="normal"&gt;13&lt;/span&gt;
&lt;span class="normal"&gt;14&lt;/span&gt;
&lt;span class="normal"&gt;15&lt;/span&gt;
&lt;span class="normal"&gt;16&lt;/span&gt;
&lt;span class="normal"&gt;17&lt;/span&gt;
&lt;span class="normal"&gt;18&lt;/span&gt;
&lt;span class="normal"&gt;19&lt;/span&gt;
&lt;span class="normal"&gt;20&lt;/span&gt;
&lt;span class="normal"&gt;21&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;#&lt;span class="w"&gt; &lt;/span&gt;MediaWiki
Alias&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;/wiki&amp;quot;&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;d:/www/mediawiki-1.24.2&amp;quot;
&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;quot;d:/www/mediawiki-1.24.2&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ScriptInterpreterSource&lt;span class="w"&gt; &lt;/span&gt;Registry-Strict
&lt;span class="w"&gt;    &lt;/span&gt;Options&lt;span class="w"&gt; &lt;/span&gt;+ExecCGI&lt;span class="w"&gt; &lt;/span&gt;+FollowSymLinks
&lt;span class="w"&gt;    &lt;/span&gt;DirectoryIndex&lt;span class="w"&gt; &lt;/span&gt;index.php&lt;span class="w"&gt; &lt;/span&gt;index.html
&lt;span class="w"&gt;    &lt;/span&gt;AllowOverride&lt;span class="w"&gt; &lt;/span&gt;Limit&lt;span class="w"&gt; &lt;/span&gt;FileInfo&lt;span class="w"&gt; &lt;/span&gt;Indexes&lt;span class="w"&gt; &lt;/span&gt;Options
&lt;span class="w"&gt;    &lt;/span&gt;Require&lt;span class="w"&gt; &lt;/span&gt;all&lt;span class="w"&gt; &lt;/span&gt;granted
&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;quot;d:/www/mediawiki-1.24.2/images&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;Ignore&lt;span class="w"&gt; &lt;/span&gt;.htaccess&lt;span class="w"&gt; &lt;/span&gt;files
&lt;span class="w"&gt;   &lt;/span&gt;AllowOverride&lt;span class="w"&gt; &lt;/span&gt;None

&lt;span class="w"&gt;   &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;Serve&lt;span class="w"&gt; &lt;/span&gt;HTML&lt;span class="w"&gt; &lt;/span&gt;as&lt;span class="w"&gt; &lt;/span&gt;plaintext,&lt;span class="w"&gt; &lt;/span&gt;don&amp;#39;t&lt;span class="w"&gt; &lt;/span&gt;execute&lt;span class="w"&gt; &lt;/span&gt;SHTML
&lt;span class="w"&gt;   &lt;/span&gt;AddType&lt;span class="w"&gt; &lt;/span&gt;text/plain&lt;span class="w"&gt; &lt;/span&gt;.html&lt;span class="w"&gt; &lt;/span&gt;.htm&lt;span class="w"&gt; &lt;/span&gt;.shtml&lt;span class="w"&gt; &lt;/span&gt;.php

&lt;span class="w"&gt;   &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;Don&amp;#39;t&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;arbitrary&lt;span class="w"&gt; &lt;/span&gt;PHP&lt;span class="w"&gt; &lt;/span&gt;code.
&lt;span class="w"&gt;   &lt;/span&gt;php_admin_flag&lt;span class="w"&gt; &lt;/span&gt;engine&lt;span class="w"&gt; &lt;/span&gt;off

&lt;span class="w"&gt;   &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;If&lt;span class="w"&gt; &lt;/span&gt;you&amp;#39;ve&lt;span class="w"&gt; &lt;/span&gt;other&lt;span class="w"&gt; &lt;/span&gt;scripting&lt;span class="w"&gt; &lt;/span&gt;languages,&lt;span class="w"&gt; &lt;/span&gt;disable&lt;span class="w"&gt; &lt;/span&gt;them&lt;span class="w"&gt; &lt;/span&gt;too.
&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;http://localhost/wiki/mw-config/index.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</content><category term="tools"></category></entry><entry><title>Install Bugzilla on Windows</title><link href="https://blog.debao.me/2015/04/install-bugzilla-on-windows/" rel="alternate"></link><published>2015-04-23T10:11:00+08:00</published><updated>2015-04-23T10:11:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-04-23:/2015/04/install-bugzilla-on-windows/</id><summary type="html">&lt;p&gt;According to the &lt;a href="http://bugzilla.readthedocs.org/en/5.0/installing/windows.html"&gt;documentation&lt;/a&gt; of Bugzilla 5.0, the following applications should be installed first:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ActiveState Perl 5.18.2 (5.12.4 or higher)&lt;/li&gt;
&lt;li&gt;Apache 2.4 (2.2.x or higher)&lt;/li&gt;
&lt;li&gt;MySql 5.6 (5.0.15 or higher)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="download-bugzilla"&gt;Download Bugzilla&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone --branch 5.0 https …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;According to the &lt;a href="http://bugzilla.readthedocs.org/en/5.0/installing/windows.html"&gt;documentation&lt;/a&gt; of Bugzilla 5.0, the following applications should be installed first:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ActiveState Perl 5.18.2 (5.12.4 or higher)&lt;/li&gt;
&lt;li&gt;Apache 2.4 (2.2.x or higher)&lt;/li&gt;
&lt;li&gt;MySql 5.6 (5.0.15 or higher)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="download-bugzilla"&gt;Download Bugzilla&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone --branch 5.0 https://git.mozilla.org/bugzilla/bugzilla bugzilla
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;or (when 5.0 is released)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone --branch bugzilla-5.0-stable https://git.mozilla.org/bugzilla/bugzilla bugzilla
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="install-required-perl-modules"&gt;Install required perl modules&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;ppm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;CGI&lt;/span&gt;.&lt;span class="nv"&gt;pm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Digest&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;TimeDate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DateTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DateTime&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;TimeZone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DBI&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Template&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;Toolkit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Email&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;Sender&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Email&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;MIME&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;URI&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;List&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;MoreUtils&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;Random&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;ISAAC&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;File&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;Slurp&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;XS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Win32&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Win32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;API&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DBD&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;mysql&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DateTime&lt;/span&gt;::&lt;span class="nv"&gt;TimeZone&lt;/span&gt;::&lt;span class="nv"&gt;Local&lt;/span&gt;::&lt;span class="nv"&gt;Win32&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Note, Don't forget &lt;code&gt;DateTime::TimeZone::Local::Win32&lt;/code&gt;, otherwise, following error will occur when we try to use bugzilla.&lt;/p&gt;
&lt;p&gt;The following modules are needed if want to use bugzilla to sent mails through smtp.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ppm install Authen-SASL Net-SMTP-SSL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;Cannot determine local time zone   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="mysql-configuration"&gt;MySQL Configuration&lt;/h2&gt;
&lt;h3 id="add-a-user"&gt;Add a user&lt;/h3&gt;
&lt;p&gt;Connect to mysqld&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql -u root -p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Then add a new user call &lt;strong&gt;bugs&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;GRANT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="k"&gt;UPDATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DELETE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOCK&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TABLES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TEMPORARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TABLES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DROP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;REFERENCES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bugs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;
&lt;span class="k"&gt;TO&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bugs&lt;/span&gt;&lt;span class="nv"&gt;@localhost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;IDENTIFIED&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mypassword&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;FLUSH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;PRIVILEGES&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="configuration-file"&gt;Configuration File&lt;/h3&gt;
&lt;p&gt;On my system, the conf file is at &lt;code&gt;C:\ProgramData\MySQL\MySQL Server 5.6\my.ini&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Add following lines&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[mysqld]&lt;/span&gt;
&lt;span class="c1"&gt;# Allow packets up to 16M&lt;/span&gt;
&lt;span class="na"&gt;max_allowed_packet&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;16M&lt;/span&gt;
&lt;span class="c1"&gt;# Allow small words in full-text indexes&lt;/span&gt;
&lt;span class="na"&gt;ft_min_word_len&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="apache-configuration"&gt;Apache Configuration&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Enable CGI Support by uncommenting following line&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    AddHandler cgi-script .cgi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;Config Bugzilla&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;    &lt;/span&gt;Alias&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;/bugzilla&amp;quot;&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;d:/www/Bugzilla&amp;quot;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;quot;d:/www/Bugzilla&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;ScriptInterpreterSource&lt;span class="w"&gt; &lt;/span&gt;Registry-Strict
&lt;span class="w"&gt;        &lt;/span&gt;Options&lt;span class="w"&gt; &lt;/span&gt;+ExecCGI&lt;span class="w"&gt; &lt;/span&gt;+FollowSymLinks
&lt;span class="w"&gt;        &lt;/span&gt;DirectoryIndex&lt;span class="w"&gt; &lt;/span&gt;index.cgi&lt;span class="w"&gt; &lt;/span&gt;index.html
&lt;span class="w"&gt;        &lt;/span&gt;AllowOverride&lt;span class="w"&gt; &lt;/span&gt;Limit&lt;span class="w"&gt; &lt;/span&gt;FileInfo&lt;span class="w"&gt; &lt;/span&gt;Indexes&lt;span class="w"&gt; &lt;/span&gt;Options
&lt;span class="w"&gt;        &lt;/span&gt;Require&lt;span class="w"&gt; &lt;/span&gt;all&lt;span class="w"&gt; &lt;/span&gt;granted
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Note: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In order for ScriptInterpreterSource Registry-Strict to work, create a key HKEY_CLASSES_ROOT.cgi\Shell\ExecCGI\Command with the default value of the full path of perl.exe with a -T parameter. For example C:\Perl64\bin\perl.exe -T.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="checksetuppl"&gt;checksetup.pl&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Run checksetup.pl to generate &lt;code&gt;localconfig&lt;/code&gt; file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Edit the &lt;code&gt;localconfig&lt;/code&gt; file, in our case, only &lt;code&gt;$db_pass&lt;/code&gt; is needed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Run checksetup.pl again&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Database tables will be created.&lt;/p&gt;
&lt;p&gt;Administrator account (user name and password) will be created at the same time.&lt;/p&gt;
&lt;h2 id="ok"&gt;OK&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;http://127.0.0.1/bugzilla&lt;/code&gt; should works now.&lt;/p&gt;
&lt;h2 id="links"&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://bugzilla.readthedocs.org/en/5.0/installing/windows.html&lt;/li&gt;
&lt;li&gt;http://search.cpan.org/dist/DateTime-TimeZone/lib/DateTime/TimeZone.pm&lt;/li&gt;
&lt;li&gt;http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry><entry><title>Hello Pelican</title><link href="https://blog.debao.me/2015/04/hello-pelican/" rel="alternate"></link><published>2015-04-22T14:18:00+08:00</published><updated>2015-04-22T14:18:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2015-04-22:/2015/04/hello-pelican/</id><content type="html">&lt;p&gt;Octopress is a great blog system, but it's not easy to maintain for users who don't familiar with ruby. So I switch to Pelican, which is written in Python.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Pelican” is an anagram for &lt;em&gt;calepin&lt;/em&gt;, which means “notebook” in French. ;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="links"&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://jakevdp.github.io/blog/2013/05/07/migrating-from-octopress-to-pelican/"&gt;Migrating from Octopress to Pelican&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="pelican"></category></entry><entry><title>screen.css used by octopress</title><link href="https://blog.debao.me/2013/06/screencss-used-by-octopress/" rel="alternate"></link><published>2013-06-18T15:48:00+08:00</published><updated>2013-06-18T15:48:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2013-06-18:/2013/06/screencss-used-by-octopress/</id><summary type="html">&lt;h2 id="screencss"&gt;screen.css&lt;/h2&gt;
&lt;p&gt;The css file used by octopress blog with the default theme is called &lt;code&gt;screen.css&lt;/code&gt;, which locates in source/stylesheets/screen.css.&lt;/p&gt;
&lt;h2 id="screenscss"&gt;screen.scss&lt;/h2&gt;
&lt;p&gt;The screen.scss file, which locates in sass/screen.scss, is used to generate the above css file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6 …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</summary><content type="html">&lt;h2 id="screencss"&gt;screen.css&lt;/h2&gt;
&lt;p&gt;The css file used by octopress blog with the default theme is called &lt;code&gt;screen.css&lt;/code&gt;, which locates in source/stylesheets/screen.css.&lt;/p&gt;
&lt;h2 id="screenscss"&gt;screen.scss&lt;/h2&gt;
&lt;p&gt;The screen.scss file, which locates in sass/screen.scss, is used to generate the above css file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;compass&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@include&lt;/span&gt;&lt;span class="nd"&gt; global-reset&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@include&lt;/span&gt;&lt;span class="nd"&gt; reset-html5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;custom/colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;custom/fonts&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;custom/layout&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;base&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;partials&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;@import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;custom/styles&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;In the first line, &lt;code&gt;compass&lt;/code&gt;, which is an open-source CSS Authoring Framework, is imported.&lt;/p&gt;
&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://octopress.org/docs/theme/template/"&gt;http://octopress.org/docs/theme/template/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://octopress.org/docs/theme/styles/"&gt;http://octopress.org/docs/theme/styles/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29"&gt;http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://sass-lang.com/tutorial.html"&gt;http://sass-lang.com/tutorial.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://compass-style.org/reference/compass/reset/utilities/"&gt;http://compass-style.org/reference/compass/reset/utilities/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry><entry><title>Sandbox: For Octopress Usage and Markdown Syntax Test</title><link href="https://blog.debao.me/2012/08/sandbox-for-octopress-usage-and-markdown-syntax-test/" rel="alternate"></link><published>2012-08-28T17:32:00+08:00</published><updated>2012-08-28T17:32:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2012-08-28:/2012/08/sandbox-for-octopress-usage-and-markdown-syntax-test/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;Note: I had switched from Octopress to Pelican since 2015, so this page is not valid any more.
Contents in this pages had been changed in order to make pelican happy.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="table-test"&gt;Table Test&lt;/h2&gt;
&lt;p&gt;Source Code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Left&lt;/span&gt; &lt;span class="nv"&gt;Aligned&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Center&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Right&lt;/span&gt; &lt;span class="nv"&gt;Aligned&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt;
&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="s s-Atom"&gt;------------------&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="s s-Atom"&gt;------------:&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="s s-Atom"&gt;--------------------:&lt;/span&gt;
&lt;span class="nv"&gt;Cell …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;Note: I had switched from Octopress to Pelican since 2015, so this page is not valid any more.
Contents in this pages had been changed in order to make pelican happy.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="table-test"&gt;Table Test&lt;/h2&gt;
&lt;p&gt;Source Code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Left&lt;/span&gt; &lt;span class="nv"&gt;Aligned&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Center&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Right&lt;/span&gt; &lt;span class="nv"&gt;Aligned&lt;/span&gt; &lt;span class="nv"&gt;Header&lt;/span&gt;
&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="s s-Atom"&gt;------------------&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="s s-Atom"&gt;------------:&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="s s-Atom"&gt;--------------------:&lt;/span&gt;
&lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Cell&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="s s-Atom"&gt;…&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="s s-Atom"&gt;…&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="s s-Atom"&gt;…&lt;/span&gt;
&lt;span class="nv"&gt;Long&lt;/span&gt; &lt;span class="nv"&gt;Long&lt;/span&gt; &lt;span class="nv"&gt;Long&lt;/span&gt; &lt;span class="nv"&gt;Long&lt;/span&gt; &lt;span class="nv"&gt;Line&lt;/span&gt; &lt;span class="s s-Atom"&gt;…&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Not&lt;/span&gt; &lt;span class="s s-Atom"&gt;so&lt;/span&gt; &lt;span class="s s-Atom"&gt;long&lt;/span&gt; &lt;span class="nv"&gt;Line&lt;/span&gt; &lt;span class="s s-Atom"&gt;…&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;Short&lt;/span&gt; &lt;span class="nv"&gt;Line&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Preview:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left;"&gt;Left Aligned Header&lt;/th&gt;
&lt;th style="text-align: center;"&gt;Center Header&lt;/th&gt;
&lt;th style="text-align: right;"&gt;Right Aligned Header&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left;"&gt;Cell 0 0&lt;/td&gt;
&lt;td style="text-align: center;"&gt;Cell 0 1&lt;/td&gt;
&lt;td style="text-align: right;"&gt;Cell 0 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left;"&gt;Cell 1 0&lt;/td&gt;
&lt;td style="text-align: center;"&gt;Cell 1 1&lt;/td&gt;
&lt;td style="text-align: right;"&gt;Cell 1 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left;"&gt;…&lt;/td&gt;
&lt;td style="text-align: center;"&gt;…&lt;/td&gt;
&lt;td style="text-align: right;"&gt;…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left;"&gt;Long Long Long Long Line …&lt;/td&gt;
&lt;td style="text-align: center;"&gt;Not so long Line …&lt;/td&gt;
&lt;td style="text-align: right;"&gt;Short Line&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="code-highlight"&gt;Code Highlight&lt;/h2&gt;
&lt;p&gt;Source Code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;```&lt;/span&gt;&lt;span class="n"&gt;cpp&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;First&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Code&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="kr"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;dbzhang800&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="err"&gt;```&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Preview:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cout&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;dbzhang800&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Source Code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;```&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;pass&lt;/span&gt;
&lt;span class="err"&gt;```&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Preview:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://octopress.org/docs"&gt;http://octopress.org/docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://daringfireball.net/projects/markdown/syntax"&gt;http://daringfireball.net/projects/markdown/syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://programus.github.com/blog/2012/03/07/add-table-data-css-for-octopress/"&gt;http://programus.github.com/blog/2012/03/07/add-table-data-css-for-octopress/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="octopress"></category><category term="markdown"></category></entry><entry><title>Setup and Configure My Octopress Blog</title><link href="https://blog.debao.me/2012/08/setup-and-configure-my-octopress-blog/" rel="alternate"></link><published>2012-08-27T21:44:00+08:00</published><updated>2012-08-27T21:44:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2012-08-27:/2012/08/setup-and-configure-my-octopress-blog/</id><summary type="html">&lt;p&gt;I am using Mac OS X 10.8, Ubuntu 12.10 and Windows Vista at present. I want to have a simple blog which can be coutrolled by myself …&lt;/p&gt;
&lt;h2 id="install-ruby-193"&gt;Install Ruby 1.9.3&lt;/h2&gt;
&lt;p&gt;Octopress depends on Ruby 1.9.2 or newer.&lt;/p&gt;
&lt;h3 id="mac-x-108"&gt;Mac X 10.8&lt;/h3&gt;
&lt;p&gt;The Ruby provided …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I am using Mac OS X 10.8, Ubuntu 12.10 and Windows Vista at present. I want to have a simple blog which can be coutrolled by myself …&lt;/p&gt;
&lt;h2 id="install-ruby-193"&gt;Install Ruby 1.9.3&lt;/h2&gt;
&lt;p&gt;Octopress depends on Ruby 1.9.2 or newer.&lt;/p&gt;
&lt;h3 id="mac-x-108"&gt;Mac X 10.8&lt;/h3&gt;
&lt;p&gt;The Ruby provided by mac is 1.8.7, so we need to install the latest one by ourself.&lt;/p&gt;
&lt;p&gt;The missing package manager for OS X - &lt;strong&gt;Homebrew&lt;/strong&gt;, provides ruby 1.9.3.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;ruby&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;curl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fsSk&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;raw&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mxcl&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;homebrew&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;go&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;brew&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;brew&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ruby&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ruby&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rbenv&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Edit ~/.bash_login and add following line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Cellar&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ruby&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;1.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p194&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;PATH&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="ubuntu-1210"&gt;Ubuntu 12.10&lt;/h3&gt;
&lt;p&gt;Nothing special, apt-get is enough.&lt;/p&gt;
&lt;h3 id="windows"&gt;Windows&lt;/h3&gt;
&lt;p&gt;Download &lt;a href="http://rubyforge.org/frs/?group_id=167"&gt;RubyInstaller&lt;/a&gt; and &lt;a href="https://github.com/oneclick/rubyinstaller/downloads/"&gt;DevKit&lt;/a&gt;, then install them.&lt;/p&gt;
&lt;p&gt;"Start Command Prompt with Ruby", and changed to the directory where DevKit extracted, and run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ruby dk.rb init
ruby dk.rb install
gem install rdiscount --platform=ruby
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Set environment variable&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;set LANG=zh_CN.UTF-8
set LC_ALL=zh_CN.UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="install-octopress"&gt;Install octopress&lt;/h2&gt;
&lt;p&gt;Download the octopress&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$git clone git://github.com/imathis/octopress.git octopress
$cd octopress
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Install some stuff.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$gem install bundler
$bindle install
$rake install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="configure-octopress"&gt;Configure octopress&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Open &lt;strong&gt;_config.yml&lt;/strong&gt;, then edit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;url&lt;/code&gt;, &lt;code&gt;title&lt;/code&gt;, &lt;code&gt;subtitle&lt;/code&gt;, and &lt;code&gt;author&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open &lt;strong&gt;source/_include/custom/head.html&lt;/strong&gt;,&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;then comment&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;lt;link href=&amp;quot;http://fonts.googleapis.com/...&amp;quot;
&amp;lt;link href=&amp;quot;http://fonts.googleapis.com/...&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;As they has been blocked in China, which make the blog take too long time to load.&lt;/p&gt;
&lt;h2 id="write-and-view-blog"&gt;Write and View Blog&lt;/h2&gt;
&lt;p&gt;To add a new post&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$rake new_post[&amp;quot;My first blog&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Then&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$rake generate
$rake preview
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="deploy"&gt;Deploy&lt;/h2&gt;
&lt;p&gt;Create a repository called username.github.com&lt;/p&gt;
&lt;p&gt;Run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$rake setup_github_pages
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Produce HTML and Deploy it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$rake generate
$rake deploy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Push source to the source branch, or other private place.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git add .
git commit -a -m &amp;#39;comment&amp;#39;
git push origin source
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="custom-domain"&gt;Custom Domain&lt;/h2&gt;
&lt;p&gt;I want to use &lt;code&gt;blog.debao.me&lt;/code&gt; for my pages. So create a file called &lt;code&gt;CNAME&lt;/code&gt; under &lt;code&gt;source&lt;/code&gt; directory. Then put the subdomain into the file&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;blog.debao.me
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Next, I need to setup my DNS. Add a &lt;em&gt;CNAME record&lt;/em&gt; pointing to the pages is enough.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;blog.debao.me IN CNAME xxxxxx.github.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="redirect"&gt;Redirect?&lt;/h3&gt;
&lt;p&gt;At present, I hope that following two domains can be redirected to the pages too.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;debao.me
www.debao.me
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;This is very easy, isn't it?&lt;/p&gt;
&lt;p&gt;Though many &lt;em&gt;Sponsoring Registrars&lt;/em&gt; such as &lt;code&gt;godaddy&lt;/code&gt; have provided such function for us. But it doesn't work in China.&lt;/p&gt;
&lt;p&gt;So I need to create another site, then let such too domains point to it.&lt;/p&gt;
&lt;p&gt;Project pages provided by github can be used in such cases. What we need is a &lt;em&gt;index.html&lt;/em&gt; file, such as&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="cp"&gt;&amp;lt;!DOCTYPE HTML PUBLIC &amp;quot;-//W3C//DTD HTML 4.0 Transitional//EN&amp;quot;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;1+1=2&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;http-equiv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;REFRESH&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0;url=http://blog.debao.me/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      Please visit &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;herf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://blog.debao.me&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;http://blog.debao.me&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt; ... .
      &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Then, create a &lt;em&gt;CNAME&lt;/em&gt; file&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;debao.me
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Push above files to gh-pages branch.&lt;/p&gt;
&lt;p&gt;Next, I need to setup my DNS. Add two &lt;em&gt;A records&lt;/em&gt; pointing to the pages.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;debao.me IN A 204.232.175.78
www.debao.me IN A 204.232.175.78
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note that&lt;/strong&gt;, github will automaticly generate redirect from www.xxxx.me to xxxx.me for us.&lt;/p&gt;
&lt;h2 id="remove-blog-from-url-path"&gt;Remove blog from url path&lt;/h2&gt;
&lt;p&gt;The urls of my blog look like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;http://blog.debao.me/blog/...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;which seems not good. So I want to move evertything to the root directory.&lt;/p&gt;
&lt;p&gt;First, &lt;code&gt;_config.yml&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;permalink:/:year/:month/:title/
category_dir: categories
pagination_dir:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Second, &lt;code&gt;source/_include/custon/navigation.html&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;root_url&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;/archives&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Archives&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;And &lt;code&gt;source/index.html&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/archives&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Blog&lt;span class="w"&gt; &lt;/span&gt;Archives&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;Finally, Move &lt;code&gt;archives&lt;/code&gt; from directory &lt;code&gt;source/blog&lt;/code&gt; to &lt;code&gt;source&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://octopress.org/docs"&gt;http://octopress.org/docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.moncefbelyamani.com/how-to-install-and-configure-octopress-on-a-mac/"&gt;http://www.moncefbelyamani.com/how-to-install-and-configure-octopress-on-a-mac/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://shanewfx.github.com/blog/2012/02/16/bulid-blog-by-octopress/"&gt;http://shanewfx.github.com/blog/2012/02/16/bulid-blog-by-octopress/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://daringfireball.net/projects/markdown/syntax"&gt;http://daringfireball.net/projects/markdown/syntax&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category><category term="octopress"></category></entry><entry><title>VirtualBox的网络设置</title><link href="https://blog.debao.me/zh/2011/11/networking-settings-in-virtualbox/" rel="alternate"></link><published>2011-11-20T16:25:00+08:00</published><updated>2015-04-28T20:00:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2011-11-20:/zh/2011/11/networking-settings-in-virtualbox/</id><summary type="html">&lt;p&gt;VirtualBox 可以为每一个Guest分配多达8个网卡(界面上只显示了4个，其他需要通过VBoxManager modifyvm进行配置)，每个网卡的连接方式可以选为下列之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Not attached&lt;/li&gt;
&lt;li&gt;NAT&lt;/li&gt;
&lt;li&gt;NAT Network&lt;/li&gt;
&lt;li&gt;Bridged Adapter&lt;/li&gt;
&lt;li&gt;Internal Network …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;VirtualBox 可以为每一个Guest分配多达8个网卡(界面上只显示了4个，其他需要通过VBoxManager modifyvm进行配置)，每个网卡的连接方式可以选为下列之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Not attached&lt;/li&gt;
&lt;li&gt;NAT&lt;/li&gt;
&lt;li&gt;NAT Network&lt;/li&gt;
&lt;li&gt;Bridged Adapter&lt;/li&gt;
&lt;li&gt;Internal Network&lt;/li&gt;
&lt;li&gt;Host-only Adapter&lt;/li&gt;
&lt;li&gt;Generic Driver&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;Not attached&lt;/th&gt;
&lt;th&gt;NAT&lt;/th&gt;
&lt;th&gt;NAT Network&lt;/th&gt;
&lt;th&gt;Bridged Adapter&lt;/th&gt;
&lt;th&gt;Internal Network&lt;/th&gt;
&lt;th&gt;Host-only Adapter&lt;/th&gt;
&lt;th&gt;Generic Driver&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Guest-&amp;gt;Host&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Host-&amp;gt;Guest&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest&amp;lt;-&amp;gt;Other Guest&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest-&amp;gt;Other Host&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Other Host-&amp;gt;Guest&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;√&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;×&lt;/td&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;以下假定Host位于一个192.168.1.0/24 的局域网中。&lt;/p&gt;
&lt;h2 id="not-attached"&gt;Not attached (未指定)&lt;/h2&gt;
&lt;p&gt;在该模式下，Guest的网卡存在，但是没有有效网络连接。在选项卡中，如果&lt;code&gt;Cable Connected&lt;/code&gt;被选中，那么Guest会试图连接网路，但最终也会报告：受限制或无连接。&lt;/p&gt;
&lt;h2 id="nat"&gt;NAT (网络地址转换)&lt;/h2&gt;
&lt;p&gt;这个是虚拟机的默认模式。对于“Client”类型的Guest，该模式在大部分情况下都能很好地工作。
当Guest启动时，它通常使用DHCP获取一个IP地址。VirtualBox 响应DHCP请求并为其指定一个IP地址(10.0.2.15)，网关地址(10.0.2.2)。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Host&lt;/th&gt;
&lt;th&gt;192.168.1.3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;10.0.2.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest1&lt;/td&gt;
&lt;td&gt;10.0.2.15&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest2&lt;/td&gt;
&lt;td&gt;10.0.2.15&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;10.0.2.15&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;但由于Guest连接的是VirtualBox内部的私有网络，使得guest对其他guest, host以及网络上的其他计算机都是不可见的。为了使其某些端口对外部可见，需要使用端口转发(port forwarding)。&lt;/p&gt;
&lt;h2 id="nat-network-nat"&gt;NAT Network (NAT网络)&lt;/h2&gt;
&lt;p&gt;和NAT类似基本一样，只是所有的Guest都在同一个NAT网络内，彼此间可以通讯。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Host&lt;/th&gt;
&lt;th&gt;192.168.1.3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;10.0.2.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest1&lt;/td&gt;
&lt;td&gt;10.0.2.15&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest2&lt;/td&gt;
&lt;td&gt;10.0.2.16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;10.0.2.*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;需要先通过VirtualBox设置一个NAT网络(网络IP段，端口转发等都在此处可以设置)，而后在各个guest的网络设置中才能选择该模式。&lt;/p&gt;
&lt;h2 id="bridged-adapter"&gt;Bridged Adapter (桥接网卡)&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Host&lt;/th&gt;
&lt;th&gt;192.168.1.3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Guest1&lt;/td&gt;
&lt;td&gt;192.168.1.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest2&lt;/td&gt;
&lt;td&gt;192.168.1.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;192.168.1.*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;它可以满足虚拟机中更高级的网络需求，比如运行servers等。它通过host的网卡，直接连入到host网络中。因此，虚拟机能被分配到一个中独立的IP，所有网络功能完全和在网络中的真实机器一样。&lt;/p&gt;
&lt;p&gt;缺点：需要占用局域网中的IP地址。&lt;/p&gt;
&lt;h2 id="internal-network"&gt;Internal Network (内部网络)&lt;/h2&gt;
&lt;p&gt;用来创建guest的完全隔离的网络，对host以及外部的计算机不可见。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Host&lt;/th&gt;
&lt;th&gt;192.168.1.3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Guest1&lt;/td&gt;
&lt;td&gt;169.254.75.244&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest2&lt;/td&gt;
&lt;td&gt;169.254.75.245&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;169.254.&lt;em&gt;.&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;在该模式下，VirtualBox 不提供DHCP/Name service 等服务。&lt;/li&gt;
&lt;li&gt;多个Internal Network 是可能的（需要使用VBoxManager modifyvm命令）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="host-only-adapter"&gt;Host-only Adapter (仅主机适配器)&lt;/h2&gt;
&lt;p&gt;类似 Internal Network，但是所有的guest位于一个 &lt;code&gt;vboxnet0&lt;/code&gt;的网络中且提供DHCP服务。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Host&lt;/th&gt;
&lt;th&gt;192.168.1.3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;192.168.56.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest1&lt;/td&gt;
&lt;td&gt;192.168.56.101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Guest2&lt;/td&gt;
&lt;td&gt;192.168.56.102&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;192.168.56.*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;VirtualBox在Host中模拟出一个虚拟网卡(类似于loopback)，所有的guest都连接到该网卡上。&lt;/li&gt;
&lt;li&gt;Host和guest之间都可以互相访问，其他主机不能访问该网络，guest也不能访问其他主机。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;据说该模式非常强，通过配置可以实现前面所有的模式的功能（但是我不知道怎么弄）。&lt;/p&gt;
&lt;h2 id="generic-driver"&gt;Generic Driver (通用驱动)&lt;/h2&gt;
&lt;p&gt;极少使用的模式所共享的网络接口&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UDP Tunnel&lt;/li&gt;
&lt;li&gt;VDE networking&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.virtualbox.org/manual/ch06.html"&gt;Chapter 6. Virtual networking&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blogs.oracle.com/fatbloke/entry/networking_in_virtualbox1"&gt;Networking in VirtualBox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://penpenguanguan.com/997.html"&gt;快速理解VirtualBox的四种网络连接方式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry><entry><title>Apache配置入门笔记</title><link href="https://blog.debao.me/zh/2011/10/apache-config-basic/" rel="alternate"></link><published>2011-10-23T17:32:00+08:00</published><updated>2011-10-23T17:32:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2011-10-23:/zh/2011/10/apache-config-basic/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;随便记录一下，不求严谨，但求无原则性错误。-- DebaoZhang 20111023&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Apache是一个http服务器，在无连接的时候，它除了监听配置文件中指定的IP地址和TCP端口号外不做任何工作；当一个请求出现在 …&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;随便记录一下，不求严谨，但求无原则性错误。-- DebaoZhang 20111023&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Apache是一个http服务器，在无连接的时候，它除了监听配置文件中指定的IP地址和TCP端口号外不做任何工作；当一个请求出现在一个有效的端口时，Apache接受HTTP请求并分析其头部，然后它根据配置文件中设定的规则，做出某种合适的动作。&lt;/p&gt;
&lt;p&gt;Apache通过一个配置文件进行设置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;配置文件是编译期被指定的(通常叫 httpd.conf)&lt;/li&gt;
&lt;li&gt;两个例子：&lt;ul&gt;
&lt;li&gt;C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf&lt;/li&gt;
&lt;li&gt;/etc/apache2/apache2.conf&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;可以通过命令行参数 -f 指定&lt;/li&gt;
&lt;li&gt;配置文件内通过include可以包含其他的配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt;绑定端口与虚拟主机&lt;/h2&gt;
&lt;p&gt;用 Listen 指定要绑定的端口号&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以指定具体的IP&lt;/li&gt;
&lt;li&gt;可以用多条命令指定多个端口号&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Listen 80
Listen 127.0.0.1:8080
Listen 10.0.2.15:8081
Listen [fe80::222:5fff:feb9:82d0]:8888
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不同的IP和端口组合可以用来做虚拟主机，这需要通过VirtualHost进一步配置(必须先用Listen设置监听地址)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt; 1&lt;/span&gt;
&lt;span class="normal"&gt; 2&lt;/span&gt;
&lt;span class="normal"&gt; 3&lt;/span&gt;
&lt;span class="normal"&gt; 4&lt;/span&gt;
&lt;span class="normal"&gt; 5&lt;/span&gt;
&lt;span class="normal"&gt; 6&lt;/span&gt;
&lt;span class="normal"&gt; 7&lt;/span&gt;
&lt;span class="normal"&gt; 8&lt;/span&gt;
&lt;span class="normal"&gt; 9&lt;/span&gt;
&lt;span class="normal"&gt;10&lt;/span&gt;
&lt;span class="normal"&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;VirtualHost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;127.0.0.1:8080&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
...
&lt;span class="nt"&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;VirtualHost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;10.0.2.15:8081&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
ServerNname&lt;span class="w"&gt; &lt;/span&gt;host.example.com
...
&lt;span class="nt"&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;VirtualHost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;10.0.2.15:8081&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
ServerNname&lt;span class="w"&gt; &lt;/span&gt;host.example2.com
...
&lt;span class="nt"&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;虚拟主机可以基于&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP地址&lt;/li&gt;
&lt;li&gt;端口号&lt;/li&gt;
&lt;li&gt;域名(通过HTTP请求header中的Host字段)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;路径转换？&lt;/h2&gt;
&lt;p&gt;我们在浏览器中打交道的是一堆url：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.example.com/index.html&lt;/span&gt;
&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.example.com/faq.html?#question10&lt;/span&gt;
&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.example.com:8080/cgi-bin/draw.cgi?type=rect&lt;/span&gt;
&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//user:pass@www.example.com/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;浏览器通过GET或POST想服务器发送请求&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;GET /index.html HTTP/1.1 Host:www.example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;服务器此时需要根据这个路径发送一个合适的文件给浏览器。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果请求的是磁盘上的静态文件，此时需要的是到磁盘文件系统的映射&lt;/li&gt;
&lt;li&gt;如果请求的是动态生成的文件，仍需要能找到脚本或程序才行&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="documentroot"&gt;DocumentRoot&lt;/h3&gt;
&lt;p&gt;比如，前面请求的 /index.html 对应磁盘的哪个文件。则需要DocumentRoot指定一个目录作为根目录。&lt;/p&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;DocumentRoot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;或&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;DocumentRoot &amp;quot;C:/Program Files/Apache Software Foundation/Apache2.2/htdocs&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;注：结尾不再加一个斜杠&lt;/li&gt;
&lt;li&gt;每一个虚拟主机也都该指定自己的DocumentRoot&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有一个ServerRoot的东西，是用来配置服务器的配置文件、日志文件等所在目录的，与这儿没什么关系。&lt;/p&gt;
&lt;h3 id="alias"&gt;Alias?&lt;/h3&gt;
&lt;p&gt;可能还需要访问位于DocumentRoot之外的文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Alias&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这样一来，http://www.exemaple.com/docs/... 被映射到该目录&lt;/p&gt;
&lt;p&gt;还有一个ScriptAlias，功能类似，只是其内容均被视为脚本。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ScriptAlias /cgi-bin/ &amp;quot;C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin/&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;这两个命令还有两个对应的支持正则匹配的版本&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AliasMatch&lt;/li&gt;
&lt;li&gt;ScriptAliasMatch&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_3"&gt;其他&lt;/h3&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;linux 可以使用soft link方式（并在Option中设置FollowSymLinks）&lt;/li&gt;
&lt;li&gt;使用mod_userdir模块的UserDir指令&lt;/li&gt;
&lt;li&gt;使用重定向功能 Redirct&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当然实在不存在的东西，只能404错误了&lt;/p&gt;
&lt;h2 id="_4"&gt;文件和目录设置&lt;/h2&gt;
&lt;p&gt;对目录的单独设置是通过Directory进行的&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/var/web/dir1&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
Options&lt;span class="w"&gt; &lt;/span&gt;+Indexes
&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;对文件的单独设置是通过Files进行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;private.html&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
Order&lt;span class="w"&gt; &lt;/span&gt;allow,deny
Deny&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;all
&lt;span class="nt"&gt;&amp;lt;/Files&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;在路径上，尽管它们都可以接受shell风格通配符，但更复杂的匹配则需要使用相应的支持正则的版本&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DirectoryMatch&lt;/li&gt;
&lt;li&gt;FilesMath&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="htaccess"&gt;.htaccess&lt;/h3&gt;
&lt;p&gt;可以通过在目录下放置一个.htaccess文件对该目录进行控制。&lt;/p&gt;
&lt;p&gt;主配置文件内的：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/www/htdocs/example&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
AddType&lt;span class="w"&gt; &lt;/span&gt;text/example&lt;span class="w"&gt; &lt;/span&gt;.exm
&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;等价于在该目录下的.htaccess文件中放入：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;AddType text/example .exm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;但这个不建议被使用(除非没有主配置文件的设置权限)了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;.htaccess 文件的名字可以改成其他的，通过 AccessFileName指令&lt;/li&gt;
&lt;li&gt;该文件内可以使用哪些指令，可通过AllowOverride进行设置&lt;/li&gt;
&lt;li&gt;AllowOverride 设置为None(默认值是All) 可完全禁止 .htaccess的使用&lt;/li&gt;
&lt;li&gt;这个文件与授权控制无关！！&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="location"&gt;Location&lt;/h3&gt;
&lt;p&gt;与前面的Directory和Files针对的磁盘文件路径不同，Location设置的是URL地址中路径部分。&lt;/p&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Location&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/private&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
Order&lt;span class="w"&gt; &lt;/span&gt;Allow,Deny
Deny&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;all
&lt;span class="nt"&gt;&amp;lt;/Location&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;将禁止访问http://www.example.com/private123等所有以 /private 开头的路径&lt;/p&gt;
&lt;h2 id="_5"&gt;认证与授权&lt;/h2&gt;
&lt;p&gt;这个东西会3组模块(真的比较繁...，使用LoadModule加载):&lt;/p&gt;
&lt;p&gt;首先设置认证类型（使用AuthType指令，目前只支持两种？）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Basic&lt;/li&gt;
&lt;li&gt;Digest&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;根据认证类型选择认证支持模块(通过AuthBasicProvider或AuthDigestProvider)设置，提供密码等验证信息&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AuthBasicProvider&lt;ul&gt;
&lt;li&gt;file (默认值)&lt;/li&gt;
&lt;li&gt;dbm&lt;/li&gt;
&lt;li&gt;dbd&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;AuthDigestProvider&lt;ul&gt;
&lt;li&gt;file&lt;/li&gt;
&lt;li&gt;dbm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;设置授权支持模块(参考Require指令?)，意图是：如何使用前面的密码信息？&lt;/p&gt;
&lt;h3 id="_6"&gt;简单例子&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;AuthType Basic
AuthName &amp;quot;From Example.com&amp;quot;
#AuthBasicProvider file
AuthUserFile /usr/apache2/passwd/passwords
Require user debao
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;AuthType 选择basic认证方式&lt;/li&gt;
&lt;li&gt;AuthName 是用户看到的信息(同一个name的浏览器也可以自动处理)&lt;/li&gt;
&lt;li&gt;AuthBasicProvider 选择 file，这是默认值&lt;/li&gt;
&lt;li&gt;AuthUserFile 设置密码文件&lt;/li&gt;
&lt;li&gt;Require user 控制密码文件中哪些用户可以通过授权(使用Require valid-user可是使得所有密码正确的用户通过授权)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;密码文件通过htpasswd来生成，对于digest方式，则需要使用htdigest来生成密码文件。&lt;/p&gt;
&lt;h3 id="deny-allow"&gt;Deny Allow&lt;/h3&gt;
&lt;p&gt;这二者可以提供简单的基于IP地址的访问控制&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Order deny,allow
Deny from all
Allow from 192.168.0.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="_7"&gt;文件类型&lt;/h3&gt;
&lt;p&gt;当浏览器请求一个文件时，服务器一般都需要同时提供mime信息&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TypesConfig 指令指定一个包含扩展名和mime对应关系的文件&lt;/li&gt;
&lt;li&gt;使用 AddType 指令添加新的对应关系&lt;/li&gt;
&lt;li&gt;MimeMagicFile 指定一个包含文件开头的魔串和mime对应关系的文件&lt;/li&gt;
&lt;li&gt;DefaultType 指定默认类型&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于纯文本文件，如果让服务器提供编码信息。AddDefaultCharset指令可以做到，不过这会覆盖html等文件自身提供的编码信息。
CGI&lt;/p&gt;
&lt;p&gt;使用 ScriptAlias指令可以设置cgi目录&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ScriptAlias /cgi-bin/ /usr/local/apache2/cgi-bin/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;如果在该目录之外的以某种后缀结尾(.py)的文件作为脚本，则需要使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/home/*/public_html&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
Options&lt;span class="w"&gt; &lt;/span&gt;+ExecCGI
AddHandler&lt;span class="w"&gt; &lt;/span&gt;cgi-script&lt;span class="w"&gt; &lt;/span&gt;.py
&lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;首先是Options中允许CGI脚本执行，然后使用AddHandler设置。&lt;/p&gt;
&lt;p&gt;如果某个目录下全是cgi脚本，则可以使用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;SetHandler cgi-script
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h3 id="wsgi"&gt;wsgi&lt;/h3&gt;
&lt;p&gt;对于python来说，CGI方式应该不怎么使用了吧。主要是wsgi这种方式了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载 wsgi ： http://code.google.com/p/modwsgi/&lt;/li&gt;
&lt;li&gt;在apache配置文件中使用&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    LoadModule wsgi_module modules/mod_wsgi.so
    WSGIScriptAlias /wiki &amp;quot;F:/Moin/mywiki/moin.wsgi&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_8"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://lamp.linux.gov.cn/Apache/ApacheMenu/urlmapping.html&lt;/li&gt;
&lt;li&gt;http://lamp.linux.gov.cn/Apache/ApacheMenu/urlmapping.html&lt;/li&gt;
&lt;li&gt;http://docstore.mik.ua/orelly/linux/apache/ch01_01.htm&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry><entry><title>Mercurial小记</title><link href="https://blog.debao.me/2010/09/mercurial-note/" rel="alternate"></link><published>2010-09-28T06:58:00+08:00</published><updated>2010-09-28T06:58:00+08:00</updated><author><name>Debao Zhang</name></author><id>tag:blog.debao.me,2010-09-28:/2010/09/mercurial-note/</id><summary type="html">&lt;p&gt;和Git类似，Mercurial 是一个分布式的源代码&lt;/p&gt;
&lt;h2 id="_1"&gt;配置文件&lt;/h2&gt;
&lt;p&gt;位于：&lt;code&gt;~/.hgrc&lt;/code&gt; 或 &lt;code&gt;%USERPROFILE%\Mercurial.ini&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;首先配置用户名(注意格式，这样，google code等会为我们将email地址隐藏掉)：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[ui]&lt;/span&gt;
&lt;span class="na"&gt;username&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;John Doe &amp;lt;john@example.com&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;记住 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;和Git类似，Mercurial 是一个分布式的源代码&lt;/p&gt;
&lt;h2 id="_1"&gt;配置文件&lt;/h2&gt;
&lt;p&gt;位于：&lt;code&gt;~/.hgrc&lt;/code&gt; 或 &lt;code&gt;%USERPROFILE%\Mercurial.ini&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;首先配置用户名(注意格式，这样，google code等会为我们将email地址隐藏掉)：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[ui]&lt;/span&gt;
&lt;span class="na"&gt;username&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;John Doe &amp;lt;john@example.com&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;记住用户名和密码：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[auth]&lt;/span&gt;
&lt;span class="na"&gt;example.prefix&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;https://hg.example.net/&lt;/span&gt;
&lt;span class="na"&gt;example.username&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;foo&lt;/span&gt;
&lt;span class="na"&gt;example.password&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;bar&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;

&lt;h2 id="_2"&gt;操作&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;Mercurial&lt;/th&gt;
&lt;th&gt;Subversion&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;仓库克隆&lt;/td&gt;
&lt;td&gt;hg clone url dir&lt;/td&gt;
&lt;td&gt;svn co url dir&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;创建&lt;/td&gt;
&lt;td&gt;hg init&lt;/td&gt;
&lt;td&gt;svnadmin create dir&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;提交到远端&lt;/td&gt;
&lt;td&gt;hg commit &lt;BR/&gt; hg push&lt;/td&gt;
&lt;td&gt;svn commit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;更新&lt;/td&gt;
&lt;td&gt;hg pull &lt;BR/&gt; hg update&lt;/td&gt;
&lt;td&gt;svn update&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;获取版本号&lt;/td&gt;
&lt;td&gt;hg -q id &lt;BR/&gt; hg parent&lt;/td&gt;
&lt;td&gt;svnversion -n&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_3"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://mercurial.selenic.com/wiki/QuickStart&lt;/li&gt;
&lt;li&gt;http://mercurial.selenic.com/wiki/FAQ&lt;/li&gt;
&lt;/ul&gt;</content><category term="tools"></category></entry></feed>