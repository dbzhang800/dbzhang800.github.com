<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

  <title>Notes on OpenSSL and Qt &mdash; 1+1=10</title>
  <meta charset="utf-8" />
  <meta name="generator" content="Pelican" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Debao Zhang">
    <meta name="description" content="记记笔记，放松一下..." />
    <link href="https://blog.debao.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Full Atom Feed" />
    <link href="https://blog.debao.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Atom Feed" />
    <link href="https://blog.debao.me/feeds/qt.atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Categories Atom Feed" />

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
    <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN" || mathElements[i].tagName === "DIV") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
    </script>





  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://blog.debao.me/favicon.png" rel="icon">

  <link href="https://blog.debao.me/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://blog.debao.me/">1+1=10</a></h1>
    <h2>记记笔记，放松一下...</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="https://blog.debao.me/feeds/atom.xml" rel="subscribe-atom">Atom</a></li>
</ul>

<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="blog.debao.me">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Notes on OpenSSL and Qt</h1>
    <p class="meta">
<time datetime="2013-12-06T16:55:00+08:00" pubdate>Fri 06 December 2013</time>    </p>
</header>

  <div class="entry-content"><p>In Qt, working with SSL can be frustrating because of the inconsistent naming of the corresponding binary dynamic libraries, and Qt defaults to dynamically loading them, without providing any indication if they are missing.</p>
<h2 id="libraries-name-of-openssl">Libraries name of openssl?</h2>
<p>The "library" portion of OpenSSL consists of two libraries.</p>
<p>On posix system they are named:</p>
<ul>
<li>libssl</li>
<li>libcrypto</li>
</ul>
<p>while on Windows(32bit) they are named completely different:</p>
<ul>
<li>libeay32</li>
<li>ssleay32</li>
</ul>
<h2 id="qsslocket_openssl_symbolscpp"><code>qsslocket_openssl_symbols.cpp</code></h2>
<p>In this file, we can figure out how ssl libries are found and loaded.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">static</span><span class="w"> </span><span class="n">QPair</span><span class="o">&lt;</span><span class="n">QSystemLibrary</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">QSystemLibrary</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">loadOpenSslWin32</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">QPair</span><span class="o">&lt;</span><span class="n">QSystemLibrary</span><span class="o">*</span><span class="p">,</span><span class="n">QSystemLibrary</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">pair</span><span class="p">;</span>
<span class="w">    </span><span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// When OpenSSL is built using MSVC then the libraries are named &#39;ssleay32.dll&#39; and &#39;libeay32&#39;dll&#39;.</span>
<span class="w">    </span><span class="c1">// When OpenSSL is built using GCC then different library names are used (depending on the OpenSSL version)</span>
<span class="w">    </span><span class="c1">// The oldest version of a GCC-based OpenSSL which can be detected by the code below is 0.9.8g (released in 2007)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tryToLoadOpenSslWin32Library</span><span class="p">(</span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;ssleay32&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libeay32&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">pair</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tryToLoadOpenSslWin32Library</span><span class="p">(</span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libssl-10&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libcrypto-10&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">pair</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tryToLoadOpenSslWin32Library</span><span class="p">(</span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libssl-8&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libcrypto-8&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">pair</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">tryToLoadOpenSslWin32Library</span><span class="p">(</span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libssl-7&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">QLatin1String</span><span class="p">(</span><span class="s">&quot;libcrypto-7&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">pair</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pair</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>

<h2 id="sslpri">ssl.pri</h2>
<p>In this file, we can found how to link open at Qt-itself config time.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>    # Add optional SSL libs
    # Static linking of OpenSSL with msvc:
    #   - Binaries http://slproweb.com/products/Win32OpenSSL.html
    #   - also needs -lUser32 -lAdvapi32 -lGdi32 -lCrypt32
    #   - libs in &lt;OPENSSL_DIR&gt;\lib\VC\static
    #   - configure: -openssl -openssl-linked -I &lt;OPENSSL_DIR&gt;\include -L &lt;OPENSSL_DIR&gt;\lib\VC\static OPENSSL_LIBS=&quot;-lUser32 -lAdvapi32 -lGdi32&quot; OPENSSL_LIBS_DEBUG=&quot;-lssleay32MDd -llibeay32MDd&quot; OPENSSL_LIBS_RELEASE=&quot;-lssleay32MD -llibeay32MD&quot;
</code></pre></div></td></tr></table></div>

<h3 id="configure-option">configure option</h3>
<p>Options list here:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="o">-</span><span class="nv">no</span><span class="o">-</span><span class="nv">openssl</span><span class="w"> </span>........<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">compile</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">OpenSSL</span>.
<span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="o">-</span><span class="nv">openssl</span><span class="w"> </span>...........<span class="w"> </span><span class="nv">Enable</span><span class="w"> </span><span class="nv">run</span><span class="o">-</span><span class="nv">time</span><span class="w"> </span><span class="nv">OpenSSL</span><span class="w"> </span><span class="nv">support</span>.
<span class="w">    </span><span class="o">-</span><span class="nv">openssl</span><span class="o">-</span><span class="nv">linked</span><span class="w"> </span>....<span class="w"> </span><span class="nv">Enabled</span><span class="w"> </span><span class="nv">linked</span><span class="w"> </span><span class="nv">OpenSSL</span><span class="w"> </span><span class="nv">support</span>.
</code></pre></div></td></tr></table></div>

<h2 id="reference">Reference</h2>
<ul>
<li>http://www.ski-epic.com/2007_notes_on_openssl/index.html</li>
</ul></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Debao Zhang
    </span>
  </span>
<time datetime="2013-12-06T16:55:00+08:00" pubdate>Fri 06 December 2013</time>  <span class="categories">
    <a class='category' href='https://blog.debao.me/categories/qt.html'>Qt</a>
  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://blog.debao.me/2025/02/notes-on-bpm/">BPM 小记</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/a-brief-note-on-semiconductor-memory-terminology/">半导体存储器术语小记</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/notes-on-yizhuang-bda-and-e-town/">亦庄、经开区、亦庄新城备忘</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/freecad-learning-notes-2/">FreeCAD学习小记（二）</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/what-is-document-no.-37/">37号文是个啥？</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="https://blog.debao.me/categories/c.html">C++</a></li>
        <li><a href="https://blog.debao.me/categories/cax.html">CAx</a></li>
        <li><a href="https://blog.debao.me/categories/ee.html">EE</a></li>
        <li><a href="https://blog.debao.me/categories/esl.html">ESL</a></li>
        <li><a href="https://blog.debao.me/categories/javascript.html">JavaScript</a></li>
        <li><a href="https://blog.debao.me/categories/legal.html">Legal</a></li>
        <li><a href="https://blog.debao.me/categories/python.html">Python</a></li>
        <li><a href="https://blog.debao.me/categories/qt.html">Qt</a></li>
        <li><a href="https://blog.debao.me/categories/science.html">Science</a></li>
        <li><a href="https://blog.debao.me/categories/sem.html">SEM</a></li>
        <li><a href="https://blog.debao.me/categories/tools.html">Tools</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="https://blog.debao.me/tags/python.html">Python</a>,    <a href="https://blog.debao.me/tags/pyside.html">pyside</a>,    <a href="https://blog.debao.me/tags/qt.html">Qt</a>,    <a href="https://blog.debao.me/tags/c.html">C++</a>,    <a href="https://blog.debao.me/tags/pelican.html">pelican</a>,    <a href="https://blog.debao.me/tags/vtk.html">vtk</a>,    <a href="https://blog.debao.me/tags/sem.html">SEM</a>,    <a href="https://blog.debao.me/tags/cmake.html">cmake</a>,    <a href="https://blog.debao.me/tags/qmake.html">qmake</a>,    <a href="https://blog.debao.me/tags/cax.html">CAx</a>,    <a href="https://blog.debao.me/tags/latex.html">latex</a>,    <a href="https://blog.debao.me/tags/markdown.html">markdown</a>,    <a href="https://blog.debao.me/tags/pandoc.html">pandoc</a>,    <a href="https://blog.debao.me/tags/katex.html">katex</a>,    <a href="https://blog.debao.me/tags/vscode.html">vscode</a>,    <a href="https://blog.debao.me/tags/cad.html">cad</a>,    <a href="https://blog.debao.me/tags/stm32.html">STM32</a>,    <a href="https://blog.debao.me/tags/git.html">Git</a>,    <a href="https://blog.debao.me/tags/arm.html">ARM</a>,    <a href="https://blog.debao.me/tags/fpga.html">FPGA</a>,    <a href="https://blog.debao.me/tags/questa.html">Questa</a>,    <a href="https://blog.debao.me/tags/quartus.html">Quartus</a>,    <a href="https://blog.debao.me/tags/eda.html">EDA</a>,    <a href="https://blog.debao.me/tags/opengl.html">opengl</a>,    <a href="https://blog.debao.me/tags/coroutine.html">coroutine</a>,    <a href="https://blog.debao.me/tags/ui.html">ui</a>,    <a href="https://blog.debao.me/tags/javascript.html">javascript</a>,    <a href="https://blog.debao.me/tags/nodejs.html">nodejs</a>,    <a href="https://blog.debao.me/tags/web.html">web</a>,    <a href="https://blog.debao.me/tags/crypto.html">crypto</a>,    <a href="https://blog.debao.me/tags/rsa.html">rsa</a>,    <a href="https://blog.debao.me/tags/der.html">der</a>,    <a href="https://blog.debao.me/tags/openssl.html">openssl</a>,    <a href="https://blog.debao.me/tags/css.html">css</a>,    <a href="https://blog.debao.me/tags/scss.html">scss</a>,    <a href="https://blog.debao.me/tags/ci.html">CI</a>,    <a href="https://blog.debao.me/tags/github.html">github</a>,    <a href="https://blog.debao.me/tags/gitlab.html">gitlab</a>,    <a href="https://blog.debao.me/tags/joomla.html">Joomla</a>,    <a href="https://blog.debao.me/tags/qthread.html">QThread</a>,    <a href="https://blog.debao.me/tags/sdl.html">SDL</a>,    <a href="https://blog.debao.me/tags/qt-macros.html">Qt-Macros</a>,    <a href="https://blog.debao.me/tags/octopress.html">octopress</a>,    <a href="https://blog.debao.me/tags/qt4.html">Qt4</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://blog.debao.me/feeds/atom.xml" type="application/atom+xml" rel="alternate">Atom</a></li>
            <li><a href="https://github.com/dbzhang800" target="_blank">github</a></li>
            <li><a href="https://www.zhihu.com/people/dbzhang800" target="_blank">zhihu</a></li>
            <li><a href="https://blog.csdn.net/dbzhang800" target="_blank">csdn</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2010&ndash;2025  Debao Zhang &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://blog.debao.me/theme/js/modernizr-2.0.js"></script>
  <script src="https://blog.debao.me/theme/js/ender.js"></script>
  <script src="https://blog.debao.me/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>