<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

  <title>Intel Quartus Prime Lite 小记（三） &mdash; 1+1=10</title>
  <meta charset="utf-8" />
  <meta name="generator" content="Pelican" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Debao Zhang">
    <meta name="description" content="记记笔记，放松一下..." />
    <link href="https://blog.debao.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Full Atom Feed" />
    <link href="https://blog.debao.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Atom Feed" />
    <link href="https://blog.debao.me/feeds/ee.atom.xml" type="application/atom+xml" rel="alternate" title="1+1=10 Categories Atom Feed" />

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
    <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN" || mathElements[i].tagName === "DIV") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
    </script>





  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://blog.debao.me/favicon.png" rel="icon">

  <link href="https://blog.debao.me/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://blog.debao.me/">1+1=10</a></h1>
    <h2>记记笔记，放松一下...</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="https://blog.debao.me/feeds/atom.xml" rel="subscribe-atom">Atom</a></li>
</ul>

<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="blog.debao.me">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Intel Quartus Prime Lite 小记（三）</h1>
    <p class="meta">
<time datetime="2024-05-19T22:04:00+08:00" pubdate>Sun 19 May 2024</time>    </p>
</header>

  <div class="entry-content"><blockquote>
<p>接前面<a href="https://blog.debao.me/2024/05/notes-on-intel-quartus-prime-2/">Quartus Prime Lite小记二</a>，断断续续看了好几天Quaruts基本用法了，在学习Verilog或VHDL之前，应该把git和quartus整合搞定...</p>
</blockquote>
<h2 id="_1">回顾</h2>
<ul>
<li>编写verilog文件 mytest2.v</li>
<li>编写脚本my_setup.tcl</li>
<li>运行quartus_sh命令，完成项目创建和编译工作，得到 mytest3.sof文件</li>
</ul>
<blockquote>
<p>在小记二中，我们有了一个 verilog文件 mytest2.v，文件内定义了一个mytest2的模块。</p>
</blockquote>
<p>我们写了一个tcl脚本my_setup.tcl</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">project_new</span><span class="w"> </span>mytest3<span class="w"> </span><span class="o">-</span>overwrite

<span class="nv">set_global_assignment</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>FAMILY<span class="w"> </span><span class="s2">&quot;MAX 10&quot;</span>
<span class="nv">set_global_assignment</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>DEVICE<span class="w"> </span><span class="mi">10</span>M50SAE144C8G<span class="w"> </span>
set_global_assignment<span class="w"> </span><span class="o">-</span>name<span class="w"> </span>TOP_LEVEL_ENTITY<span class="w"> </span>mytest2
<span class="nv">set_global_assignment</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>PROJECT_OUTPUT_DIRECTORY<span class="w"> </span><span class="s2">&quot;output_files&quot;</span>
<span class="nv">set_global_assignment</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>VERILOG_FILE<span class="w"> </span>mytest2.v

<span class="nv">set_location_assignment</span><span class="w"> </span>PIN_6<span class="w"> </span><span class="o">-</span>to<span class="w"> </span>x1
<span class="nv">set_location_assignment</span><span class="w"> </span>PIN_7<span class="w"> </span><span class="o">-</span>to<span class="w"> </span>x2
<span class="nv">set_location_assignment</span><span class="w"> </span>PIN_8<span class="w"> </span><span class="o">-</span>to<span class="w"> </span>f
</code></pre></div></td></tr></table></div>

<p>通过执行如下命令创建一个完整工程：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>quartus_sh -t my_setup.tcl
</code></pre></div></td></tr></table></div>

<p>得到文件</p>
<ul>
<li>mytest3.qpf</li>
<li>mytest3.qsf</li>
</ul>
<p>再执行编译</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>quartus_sh --flow compile mytest3
</code></pre></div></td></tr></table></div>

<p>即可得到：</p>
<ul>
<li>mytest3.sof</li>
</ul>
<p>那么..., 如何获取git信息，并体现在编译输出的文件名中...</p>
<h2 id="git">Git基础</h2>
<p>Git作为分布式的源码管理工具，没有可以类比SVN的递增值。</p>
<ul>
<li>提交的唯一标识是一个长长的SHA值：</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>git rev-parse  HEAD
</code></pre></div></td></tr></table></div>

<ul>
<li>要短一点也可以</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>git rev-parse --short HEAD
</code></pre></div></td></tr></table></div>

<p>用这个东西肯定是正确的，但是现实中用它，对用户很不友好...，友好的方式可以选择...</p>
<ul>
<li>打上tag，使用describe，可以获取类似 "v1.0-3-gabc123" 的字符串</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>git descrbe
</code></pre></div></td></tr></table></div>

<p>如果偷懒的话，直接用提交数可以（确保和中央仓库同步），在一些小项目中，这么做比较简单，但是不严谨：</p>
<ul>
<li>获取提交数</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>git rev-list --count HEAD
</code></pre></div></td></tr></table></div>

<ul>
<li>或者提交数加上当前提交的日期，获取日期可以通过：</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>git log -1 --format=%cd --date=format:%Y%m%d%H%M%S
</code></pre></div></td></tr></table></div>

<h2 id="_2">编译过程中执行自定义脚本</h2>
<p>quaruts允许配置如下钩子：</p>
<ul>
<li><code>PRE_FLOW_SCRIPT_FILE</code> 指定流程开始前要执行的脚本</li>
<li><code>POST_MODULE_SCRIPT_FILE</code> 指定编译每个阶段执行完执行的脚本（比如map、fit、asm每个阶段执行完的时候）</li>
<li><code>POST_FLOW_SCRIPT_FILE</code>指定流程结束后执行的脚本</li>
</ul>
<p>在.qsf中进行配置，语法如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">set_global_assignment</span><span class="w"> </span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="o">&lt;</span><span class="n">assignment</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">executable</span><span class="o">&gt;:&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span>
</code></pre></div></td></tr></table></div>

<p>执行时，quartus会转换成如下命令进行执行</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>&lt;executable&gt; -t &lt;script name&gt; &lt;flow or module name&gt; &lt;project name&gt; &lt;revision name&gt;
</code></pre></div></td></tr></table></div>

<h3 id="git_1">输出git信息</h3>
<p>编写一个脚本 get_git_info.tcl：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># 获取最新提交的哈希值</span>
<span class="k">set</span><span class="w"> </span>commit_hash<span class="w"> </span><span class="k">[</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>rev-parse<span class="w"> </span>HEAD<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>commit_count<span class="w"> </span><span class="k">[</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>rev-list<span class="w"> </span><span class="o">--</span>count<span class="w"> </span>HEAD<span class="k">]</span>

<span class="c"># 将哈希值写入文件</span>
<span class="k">set</span><span class="w"> </span>file<span class="w"> </span><span class="k">[</span><span class="nb">open</span><span class="w"> </span><span class="s2">&quot;version_info.txt&quot;</span><span class="w"> </span><span class="s2">&quot;w&quot;</span><span class="k">]</span>
<span class="nb">puts</span><span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="s2">&quot;$commit_count $commit_hash&quot;</span>
<span class="nb">close</span><span class="w"> </span><span class="nv">$file</span>
</code></pre></div></td></tr></table></div>

<p>加入到.qsf文件中：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">set_global_assignment</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>PRE_FLOW_SCRIPT_FILE<span class="w"> </span>quartus_sh:get_git_info.tcl
</code></pre></div></td></tr></table></div>

<p>在命令行中，或者在quartus中，执行编译操作，即可得到一个包含版本信息的文件</p>
<ul>
<li>version_info.txt</li>
</ul>
<blockquote>
<p>注意：该文件不会被 <code>quartus_sh --clean</code> 清理。</p>
</blockquote>
<p>为了避免脚本在git仓库之外执行，或者git找不到造成崩溃问题，可以调整一下脚本：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># 尝试获取最新提交的哈希值和提交计数</span>
<span class="k">set</span><span class="w"> </span>commit_hash<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="k">set</span><span class="w"> </span>commit_count<span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="k">catch</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>commit_hash<span class="w"> </span><span class="k">[</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>rev-parse<span class="w"> </span>HEAD<span class="k">]</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>commit_count<span class="w"> </span><span class="k">[</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>rev-list<span class="w"> </span><span class="o">--</span>count<span class="w"> </span>HEAD<span class="k">]</span>
<span class="k">}</span><span class="w"> </span>err

<span class="c"># 检查是否成功获取了信息</span>
<span class="k">if</span><span class="w"> </span><span class="k">{</span><span class="nv">$commit_hash</span><span class="w"> </span><span class="nv">eq</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">$commit_count</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="k">}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>commit_hash<span class="w"> </span><span class="s2">&quot;unknown&quot;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>commit_count<span class="w"> </span><span class="s2">&quot;0&quot;</span>
<span class="k">}</span>

<span class="c"># 将哈希值和计数写入文件</span>
<span class="k">set</span><span class="w"> </span>file<span class="w"> </span><span class="k">[</span><span class="nb">open</span><span class="w"> </span><span class="s2">&quot;version_info.txt&quot;</span><span class="w"> </span><span class="s2">&quot;w&quot;</span><span class="k">]</span>
<span class="nb">puts</span><span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="s2">&quot;$commit_count $commit_hash&quot;</span>
<span class="nb">close</span><span class="w"> </span><span class="nv">$file</span>
</code></pre></div></td></tr></table></div>

<blockquote>
<p>这只是一个demo，理论上，我们应该可以将git信息输出到项目文件，或者被verilog或vhdl包含的文件中。进而编译进固件中，并可以被后续上位机读取。</p>
</blockquote>
<h3 id="sof">修改sof文件名</h3>
<p>没找到如何直接配置sof和pof的文件名，只要写一个tcl脚本，编译结束后，直接拷贝出来，拷贝成我们想要的文件名。</p>
<p>脚本 my_post.tcl：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c"># 定义源文件夹和目标文件夹</span>
<span class="k">set</span><span class="w"> </span>source_folder<span class="w"> </span><span class="s2">&quot;output_files&quot;</span>
<span class="k">set</span><span class="w"> </span>target_folder<span class="w"> </span><span class="s2">&quot;./&quot;</span>

<span class="c"># 确保目标文件夹存在，如果不存在，则创建</span>
<span class="k">if</span><span class="w"> </span><span class="k">{</span><span class="o">!</span><span class="k">[</span><span class="nb">file</span><span class="w"> </span>exists<span class="w"> </span><span class="nv">$target_folder</span><span class="k">]}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nb">file</span><span class="w"> </span>mkdir<span class="w"> </span><span class="nv">$target_folder</span>
<span class="k">}</span>

<span class="c"># 获取Git提交次数</span>
<span class="k">if</span><span class="w"> </span><span class="k">{[catch</span><span class="w"> </span><span class="k">{</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>rev-list<span class="w"> </span><span class="o">--</span>count<span class="w"> </span>HEAD<span class="k">}</span><span class="w"> </span>git_commit_count<span class="k">]}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Error getting git commit count: $git_commit_count&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="mi">1</span>
<span class="k">}</span>

<span class="c"># 获取最后一次提交的日期，格式为YYYYMMDDHHMMSS</span>
<span class="k">if</span><span class="w"> </span><span class="k">{[catch</span><span class="w"> </span><span class="k">{</span><span class="nb">exec</span><span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">--</span>format<span class="err">=</span><span class="o">%</span>cd<span class="w"> </span><span class="o">--</span>date<span class="err">=</span>format:<span class="o">%</span>Y<span class="o">%</span>m<span class="o">%</span>d<span class="o">%</span>H<span class="o">%</span>M<span class="o">%</span>S<span class="k">}</span><span class="w"> </span>git_last_commit_date<span class="k">]}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Error getting last commit date: $git_last_commit_date&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="mi">1</span>
<span class="k">}</span>

<span class="c"># 移除任何可能的双引号</span>
<span class="k">set</span><span class="w"> </span>git_last_commit_date<span class="w"> </span><span class="k">[</span><span class="nb">string</span><span class="w"> </span>map<span class="w"> </span><span class="k">{</span><span class="err">\</span><span class="s2">&quot; &quot;&quot;} $git_last_commit_date]</span>

<span class="s2"># 遍历指定类型的文件</span>
<span class="s2">foreach filetype {sof pof} {</span>
<span class="s2">    set files [glob -nocomplain -directory $source_folder *.$filetype]</span>
<span class="s2">    foreach file_path $files {</span>
<span class="s2">        # 获取文件名（不含扩展名）</span>
<span class="s2">        set filename [file rootname [file tail $file_path]]</span>
<span class="s2">        # 获取文件扩展名</span>
<span class="s2">        set extension [file extension $file_path]</span>
<span class="s2">        # 构造新的文件名</span>
<span class="s2">        set new_filename &quot;</span><span class="nv">${target_folder}</span><span class="o">/</span><span class="nv">${filename}_${git_commit_count}</span>_<span class="nv">${git_last_commit_date}${extension}</span><span class="s2">&quot;</span>

<span class="s2">        # 尝试复制文件，捕获并报告任何错误</span>
<span class="s2">        if {[catch {file copy -force -- $file_path $new_filename} error_message]} {</span>
<span class="s2">            puts &quot;</span>Error<span class="w"> </span>copying<span class="w"> </span>file<span class="w"> </span>from<span class="w"> </span><span class="nv">$file_path</span><span class="w"> </span>to<span class="w"> </span><span class="nv">$new_filename:</span><span class="w"> </span><span class="nv">$error_message</span><span class="s2">&quot;</span>
<span class="s2">        } else {</span>
<span class="s2">            puts &quot;</span>Successfully<span class="w"> </span>copied<span class="w"> </span><span class="nv">$file_path</span><span class="w"> </span>to<span class="w"> </span><span class="nv">$new_filename</span><span class="s2">&quot;</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">}</span>

<span class="s2">puts &quot;</span>Operation<span class="w"> </span>completed<span class="w"> </span>successfully.<span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>

<p>在 .psf 进行配置：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">set_global_assignment</span><span class="w"> </span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">POST_FLOW_SCRIPT_FILE</span><span class="w"> </span><span class="nl">quartus_sh:</span><span class="n">my_post</span><span class="p">.</span><span class="n">tcl</span>
</code></pre></div></td></tr></table></div>

<h2 id="gitignore">.gitignore</h2>
<p>先记录一个 <a href="https://gist.github.com/nhasbun/71918796044b7ba89d6662133495f754">Git ignore file for quartus II projects · GitHub</a>作为后续参考，后面需要时再调整</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gh">#</span> Need to keep all HDL files
<span class="gh">#</span> *.vhd
<span class="gh">#</span> *.v

<span class="gh">#</span> ignore Quartus II generated files
*_generation_script*
<span class="gs">*_inst.vhd</span>
<span class="gs">*</span>.bak
<span class="gs">*.cmp</span>
<span class="gs">*</span>.done
<span class="gs">*.eqn</span>
<span class="gs">*</span>.hex
<span class="gs">*.html</span>
<span class="gs">*</span>.jdi
<span class="gs">*.jpg</span>
<span class="gs"># *</span>.mif
<span class="gs">*.pin</span>
<span class="gs">*</span>.pof
<span class="gs">*.ptf.*</span>
*.qar
<span class="gs">*.qarlog</span>
<span class="gs">*</span>.qws
<span class="gs">*.rpt</span>
<span class="gs">*</span>.smsg
<span class="gs">*.sof</span>
<span class="gs">*</span>.sopc_builder
<span class="gs">*.summary</span>
<span class="gs">*</span>.tcl
<span class="gs">*.txt # Explicitly add any text files used</span>
<span class="gs">*</span>~
<span class="gs">*example*</span>
*sopc_*
<span class="gh">#</span> *.sdc # I want those timing files

<span class="gh">#</span> ignore Quartus II generated folders
*/db/
<span class="gs">*/incremental_db/</span>
<span class="gs">*</span>/simulation/
<span class="gs">*/timing/</span>
<span class="gs">*</span>/testbench/
*/*_sim/
incremental_db/
db/
_output_files/
PLLJ_PLLSPE_INFO.txt
</code></pre></div></td></tr></table></div>

<h2 id="qsf">禁止更新 .qsf文件</h2>
<p>quartus执行时会自动 .qsf文件，这对于源码管控很不友好...</p>
<p>看一下通过GUI界面执行编译时，后台的命令：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>quartus_map --read_settings_files=on --write_settings_files=off mytest3 -c mytest3
quartus_fit --read_settings_files=off --write_settings_files=off mytest3 -c mytest3
quartus_asm --read_settings_files=off --write_settings_files=off mytest3 -c mytest3
quartus_pow --read_settings_files=off --write_settings_files=off mytest3 -c mytest3
quartus_sta mytest3 -c mytest3
</code></pre></div></td></tr></table></div>

<p>估计问题出在<code>quartus_sta</code>上？</p>
<p>先记录一下，后面慢慢了解...</p>
<h2 id="_3">参考</h2>
<ul>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683325/18-1/automating-script-execution.html">2.9. Automating Script Execution (intel.com)</a></li>
<li><a href="https://community.intel.com/t5/Intel-Quartus-Prime-Software/Quartus-version-control-methodology/m-p/1479729">Solved: Quartus version control methodology - Intel Community</a></li>
<li><a href="https://community.intel.com/t5/Intel-Quartus-Prime-Software/How-to-change-the-default-name-of-sof-file-in-Quartus/td-p/145024">How to change the default name of *.sof file in Quartus - Intel Community</a></li>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683296/24-1/projectwideassignments.html">Project-Wide Assignments</a></li>
</ul></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Debao Zhang
    </span>
  </span>
<time datetime="2024-05-19T22:04:00+08:00" pubdate>Sun 19 May 2024</time>  <span class="categories">
    <a class='category' href='https://blog.debao.me/categories/ee.html'>EE</a>
  </span>
  <span class="categories">
    <a class="category" href="https://blog.debao.me/tags/fpga.html">FPGA</a>,    <a class="category" href="https://blog.debao.me/tags/quartus.html">Quartus</a>,    <a class="category" href="https://blog.debao.me/tags/git.html">Git</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://blog.debao.me/2025/02/notes-on-bpm/">BPM 小记</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/a-brief-note-on-semiconductor-memory-terminology/">半导体存储器术语小记</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/notes-on-yizhuang-bda-and-e-town/">亦庄、经开区、亦庄新城备忘</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/freecad-learning-notes-2/">FreeCAD学习小记（二）</a>
      </li>
      <li class="post">
          <a href="https://blog.debao.me/2025/01/what-is-document-no.-37/">37号文是个啥？</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="https://blog.debao.me/categories/c.html">C++</a></li>
        <li><a href="https://blog.debao.me/categories/cax.html">CAx</a></li>
        <li><a href="https://blog.debao.me/categories/ee.html">EE</a></li>
        <li><a href="https://blog.debao.me/categories/esl.html">ESL</a></li>
        <li><a href="https://blog.debao.me/categories/javascript.html">JavaScript</a></li>
        <li><a href="https://blog.debao.me/categories/legal.html">Legal</a></li>
        <li><a href="https://blog.debao.me/categories/python.html">Python</a></li>
        <li><a href="https://blog.debao.me/categories/qt.html">Qt</a></li>
        <li><a href="https://blog.debao.me/categories/science.html">Science</a></li>
        <li><a href="https://blog.debao.me/categories/sem.html">SEM</a></li>
        <li><a href="https://blog.debao.me/categories/tools.html">Tools</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="https://blog.debao.me/tags/python.html">Python</a>,    <a href="https://blog.debao.me/tags/pyside.html">pyside</a>,    <a href="https://blog.debao.me/tags/qt.html">Qt</a>,    <a href="https://blog.debao.me/tags/c.html">C++</a>,    <a href="https://blog.debao.me/tags/pelican.html">pelican</a>,    <a href="https://blog.debao.me/tags/vtk.html">vtk</a>,    <a href="https://blog.debao.me/tags/sem.html">SEM</a>,    <a href="https://blog.debao.me/tags/cmake.html">cmake</a>,    <a href="https://blog.debao.me/tags/qmake.html">qmake</a>,    <a href="https://blog.debao.me/tags/cax.html">CAx</a>,    <a href="https://blog.debao.me/tags/latex.html">latex</a>,    <a href="https://blog.debao.me/tags/markdown.html">markdown</a>,    <a href="https://blog.debao.me/tags/pandoc.html">pandoc</a>,    <a href="https://blog.debao.me/tags/katex.html">katex</a>,    <a href="https://blog.debao.me/tags/vscode.html">vscode</a>,    <a href="https://blog.debao.me/tags/cad.html">cad</a>,    <a href="https://blog.debao.me/tags/stm32.html">STM32</a>,    <a href="https://blog.debao.me/tags/git.html">Git</a>,    <a href="https://blog.debao.me/tags/arm.html">ARM</a>,    <a href="https://blog.debao.me/tags/fpga.html">FPGA</a>,    <a href="https://blog.debao.me/tags/questa.html">Questa</a>,    <a href="https://blog.debao.me/tags/quartus.html">Quartus</a>,    <a href="https://blog.debao.me/tags/eda.html">EDA</a>,    <a href="https://blog.debao.me/tags/opengl.html">opengl</a>,    <a href="https://blog.debao.me/tags/coroutine.html">coroutine</a>,    <a href="https://blog.debao.me/tags/ui.html">ui</a>,    <a href="https://blog.debao.me/tags/javascript.html">javascript</a>,    <a href="https://blog.debao.me/tags/nodejs.html">nodejs</a>,    <a href="https://blog.debao.me/tags/web.html">web</a>,    <a href="https://blog.debao.me/tags/crypto.html">crypto</a>,    <a href="https://blog.debao.me/tags/rsa.html">rsa</a>,    <a href="https://blog.debao.me/tags/der.html">der</a>,    <a href="https://blog.debao.me/tags/openssl.html">openssl</a>,    <a href="https://blog.debao.me/tags/css.html">css</a>,    <a href="https://blog.debao.me/tags/scss.html">scss</a>,    <a href="https://blog.debao.me/tags/ci.html">CI</a>,    <a href="https://blog.debao.me/tags/github.html">github</a>,    <a href="https://blog.debao.me/tags/gitlab.html">gitlab</a>,    <a href="https://blog.debao.me/tags/joomla.html">Joomla</a>,    <a href="https://blog.debao.me/tags/qthread.html">QThread</a>,    <a href="https://blog.debao.me/tags/sdl.html">SDL</a>,    <a href="https://blog.debao.me/tags/qt-macros.html">Qt-Macros</a>,    <a href="https://blog.debao.me/tags/octopress.html">octopress</a>,    <a href="https://blog.debao.me/tags/qt4.html">Qt4</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://blog.debao.me/feeds/atom.xml" type="application/atom+xml" rel="alternate">Atom</a></li>
            <li><a href="https://github.com/dbzhang800" target="_blank">github</a></li>
            <li><a href="https://www.zhihu.com/people/dbzhang800" target="_blank">zhihu</a></li>
            <li><a href="https://blog.csdn.net/dbzhang800" target="_blank">csdn</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2010&ndash;2025  Debao Zhang &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://blog.debao.me/theme/js/modernizr-2.0.js"></script>
  <script src="https://blog.debao.me/theme/js/ender.js"></script>
  <script src="https://blog.debao.me/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>